# å®Œæ•´æ¢å¤å‘å¯¼è®¡åˆ’ä¹¦

> åˆ›å»ºæ—¶é—´ï¼š2026-01-09  
> çŠ¶æ€ï¼šğŸ“‹ è§„åˆ’ä¸­

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
å®Œæ•´æ¢å¤å‘å¯¼ï¼ˆComplete Restore Wizardï¼‰

### é¡¹ç›®ç›®æ ‡
1. æä¾›å¼•å¯¼å¼çš„æ¢å¤æµç¨‹ï¼Œç¡®ä¿ç”¨æˆ·æŒ‰æ­£ç¡®é¡ºåºæ¢å¤ä¹¦ç­¾å’Œå¤‡ä»½å†å²
2. æ”¯æŒä»äº‘ç«¯ï¼ˆWebDAV/GitHubï¼‰å’Œæœ¬åœ°æ–‡ä»¶æ¢å¤
3. æ™ºèƒ½æ£€æµ‹å½“å‰ä¹¦ç­¾ä¸å¤‡ä»½çš„åŒ¹é…åº¦ï¼Œç»™å‡ºè­¦å‘Šå’Œå»ºè®®
4. æ•´åˆä¹¦ç­¾æ¢å¤å’Œå¤‡ä»½å†å²æ¢å¤ï¼Œæä¾›ä¸€ç«™å¼ä½“éªŒ

### æ ¸å¿ƒç†å¿µ
**ä¹¦ç­¾å’Œå¤‡ä»½å†å²å¿…é¡»ä¿æŒå…³è”æ€§**ã€‚å¤‡ä»½å†å²è®°å½•çš„æ˜¯ä¹¦ç­¾çš„å˜åŒ–ï¼Œå¦‚æœä¹¦ç­¾ç»“æ„ä¸å†å²ä¸åŒ¹é…ï¼Œå†å²è®°å½•å°†å¤±å»æ„ä¹‰ã€‚å› æ­¤ï¼š
- å¿…é¡»å…ˆæ¢å¤ä¹¦ç­¾ï¼Œå†æ¢å¤å¤‡ä»½å†å²
- å¯¼å…¥å¤‡ä»½å†å²æ—¶éœ€è¦æ£€æµ‹åŒ¹é…åº¦

---

## ğŸ¯ åŠŸèƒ½åˆ†æœŸ

### Phase 1: å¤‡ä»½å†å²æ‰‹åŠ¨å¯¼å…¥ï¼ˆæ–¹æ¡ˆ Aï¼šæ™ºèƒ½æ£€æµ‹ + è­¦å‘Šï¼‰

åœ¨ history.html é¡µé¢å®ç°å¤‡ä»½å†å²å¯¼å…¥ï¼ŒåŒ…å«æ™ºèƒ½æ£€æµ‹ã€‚

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| å¯¼å…¥æŒ‰é’® | åœ¨å…¨å±€å¯¼å‡ºæ—æ·»åŠ å¯¼å…¥æŒ‰é’® | âœ… å·²å®Œæˆ |
| è§£æ JSON/ZIP | è§£æå¯¼å…¥çš„æ–‡ä»¶ | ğŸ”´ é«˜ |
| æ™ºèƒ½æ£€æµ‹ | æ£€æµ‹å½“å‰ä¹¦ç­¾ä¸å¯¼å…¥å†å²çš„åŒ¹é…åº¦ | ğŸ”´ é«˜ |
| è­¦å‘Šæç¤º | åŒ¹é…åº¦ä½æ—¶ç»™å‡ºè­¦å‘Š | ğŸ”´ é«˜ |
| åˆå¹¶/è¦†ç›–ç­–ç•¥ | ç”¨æˆ·é€‰æ‹©å¯¼å…¥ç­–ç•¥ | ğŸ”´ é«˜ |
| æ¢å¤è§†å›¾è®¾ç½® | æ¢å¤å±•å¼€çŠ¶æ€ç­‰ | ğŸŸ¡ ä¸­ |

### Phase 2: å®Œæ•´æ¢å¤å‘å¯¼ï¼ˆæ–¹æ¡ˆ Cï¼šå‘å¯¼å¼ UIï¼‰

åœ¨ä¸» UI çš„ã€Œè®¾ç½®ä¸åˆå§‹åŒ–ã€é¢æ¿æä¾›å®Œæ•´æ¢å¤å‘å¯¼ã€‚

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| å‘å¯¼å…¥å£ | è®¾ç½®é¢æ¿å³ä¾§æ·»åŠ æ¢å¤å‘å¯¼å…¥å£ | ğŸ”´ é«˜ |
| æ•°æ®æºé€‰æ‹© | äº‘ç«¯/æœ¬åœ°æ–‡ä»¶é€‰æ‹© | ğŸ”´ é«˜ |
| äº‘ç«¯æ£€æµ‹ | è‡ªåŠ¨æ£€æµ‹äº‘ç«¯å¤‡ä»½çŠ¶æ€ | ğŸŸ¡ ä¸­ |
| ä¹¦ç­¾æ¢å¤ | ä»å¤‡ä»½æ¢å¤ä¹¦ç­¾åˆ°æµè§ˆå™¨ | ğŸ”´ é«˜ |
| å†å²æ¢å¤ | å¯¼å…¥å¤‡ä»½å†å² | ğŸ”´ é«˜ |
| æ¢å¤é¢„è§ˆ | æ˜¾ç¤ºæ¢å¤å°†äº§ç”Ÿçš„å½±å“ | ğŸŸ¡ ä¸­ |

### Phase 3: è‡ªåŠ¨åŒæ­¥

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|------|------|--------|
| å®šæ—¶æ£€æµ‹ | å®šæœŸæ£€æŸ¥äº‘ç«¯æ˜¯å¦æœ‰æ›´æ–° | ğŸŸ¢ ä½ |
| å¢é‡åŒæ­¥ | åªåŒæ­¥å˜åŒ–çš„éƒ¨åˆ† | ğŸŸ¢ ä½ |
| å†²çªè‡ªåŠ¨è§£å†³ | æ ¹æ®ç­–ç•¥è‡ªåŠ¨å¤„ç†å†²çª | ğŸŸ¢ ä½ |

---

## ğŸ—ï¸ Phase 1 è¯¦ç»†è®¾è®¡ï¼šæ™ºèƒ½æ£€æµ‹ + è­¦å‘Š

### 1.1 æ™ºèƒ½æ£€æµ‹ç®—æ³•

**æ£€æµ‹æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | è®¡ç®—æ–¹å¼ | æƒé‡ |
|------|----------|------|
| **Fingerprint åŒ¹é…** | æœ€è¿‘ N æ¡è®°å½•çš„ fingerprint æ˜¯å¦åœ¨å¯¼å…¥æ•°æ®ä¸­ | 40% |
| **ä¹¦ç­¾æ•°é‡ç›¸ä¼¼åº¦** | \|å½“å‰æ•°é‡ - æœ€è¿‘è®°å½•æ•°é‡\| / æœ€è¿‘è®°å½•æ•°é‡ | 30% |
| **æ ¹èŠ‚ç‚¹åŒ¹é…** | æ£€æŸ¥æ ¹æ–‡ä»¶å¤¹ç»“æ„æ˜¯å¦ç›¸ä¼¼ | 30% |

**åŒ¹é…åº¦åˆ¤å®š**ï¼š

| åŒ¹é…åº¦ | åˆ†æ•° | æç¤º |
|--------|------|------|
| ğŸŸ¢ é«˜ | > 80% | å¯ä»¥ç›´æ¥å¯¼å…¥ |
| ğŸŸ¡ ä¸­ | 50-80% | å»ºè®®å…ˆæ¢å¤ä¹¦ç­¾ |
| ğŸ”´ ä½ | < 50% | å¼ºçƒˆå»ºè®®å…ˆæ¢å¤ä¹¦ç­¾ |

### 1.2 æ£€æµ‹å‡½æ•°è®¾è®¡

```javascript
/**
 * æ£€æµ‹å½“å‰ä¹¦ç­¾ä¸å¯¼å…¥å†å²çš„åŒ¹é…åº¦
 * @param {Array} importedRecords - å¯¼å…¥çš„è®°å½•æ•°ç»„
 * @returns {Promise<{score: number, level: string, message: string, details: Object}>}
 */
async function detectCompatibility(importedRecords) {
    // 1. è·å–å½“å‰ä¹¦ç­¾æ ‘
    const currentTree = await chrome.bookmarks.getTree();
    const currentFingerprint = await calculateFingerprint(currentTree);
    const currentStats = countBookmarks(currentTree);
    
    // 2. è·å–å¯¼å…¥è®°å½•çš„æœ€è¿‘ä¸€æ¡
    const latestRecord = importedRecords[0];
    const recordFingerprint = latestRecord._exportInfo?.fingerprint;
    const recordStats = latestRecord._exportInfo?.stats;
    
    // 3. è®¡ç®—å„é¡¹æŒ‡æ ‡
    const fingerprintMatch = currentFingerprint === recordFingerprint ? 100 : 0;
    
    const countDiff = Math.abs(currentStats.bookmarkCount - recordStats.bookmarkCount);
    const countSimilarity = 100 - Math.min(100, (countDiff / recordStats.bookmarkCount) * 100);
    
    const rootMatch = compareRootStructure(currentTree, latestRecord._rawBookmarkTree);
    
    // 4. åŠ æƒè®¡ç®—æ€»åˆ†
    const score = fingerprintMatch * 0.4 + countSimilarity * 0.3 + rootMatch * 0.3;
    
    // 5. åˆ¤å®šåŒ¹é…çº§åˆ«
    let level, message;
    if (score > 80) {
        level = 'high';
        message = 'å½“å‰ä¹¦ç­¾ä¸å¤‡ä»½å†å²åŒ¹é…åº¦é«˜ï¼Œå¯ä»¥ç›´æ¥å¯¼å…¥';
    } else if (score > 50) {
        level = 'medium';
        message = 'æ£€æµ‹åˆ°ä¹¦ç­¾ç»“æ„æœ‰å·®å¼‚ï¼Œå»ºè®®å…ˆæ¢å¤ä¹¦ç­¾';
    } else {
        level = 'low';
        message = 'å½“å‰ä¹¦ç­¾ä¸å¤‡ä»½å†å²å·®å¼‚è¾ƒå¤§ï¼Œå¼ºçƒˆå»ºè®®å…ˆæ¢å¤ä¹¦ç­¾';
    }
    
    return {
        score,
        level,
        message,
        details: {
            fingerprintMatch,
            countSimilarity,
            rootMatch,
            currentStats,
            recordStats
        }
    };
}
```

### 1.3 å¯¼å…¥å¼¹çª—è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¥ å¯¼å…¥å¤‡ä»½å†å²                                           [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©                           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  æ”¯æŒ .json æˆ– .zip æ–‡ä»¶                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š æ–‡ä»¶ä¿¡æ¯:                                                   â”‚
â”‚  â€¢ æ–‡ä»¶ç±»å‹: ZIP å½’æ¡£                                           â”‚
â”‚  â€¢ è®°å½•æ•°é‡: 45 æ¡                                              â”‚
â”‚  â€¢ æ—¶é—´èŒƒå›´: 2025-12-01 ~ 2026-01-09                            â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ å…¼å®¹æ€§æ£€æµ‹:                                    åŒ¹é…åº¦: 62%  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ£€æµ‹åˆ°å½“å‰ä¹¦ç­¾ç»“æ„ä¸å¤‡ä»½å†å²æœ‰å·®å¼‚                       â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â€¢ å½“å‰ä¹¦ç­¾: 143 ä¸ª                                     â”‚    â”‚
â”‚  â”‚  â€¢ æœ€è¿‘å¤‡ä»½: 128 ä¸ª (+15 å·®å¼‚)                          â”‚    â”‚
â”‚  â”‚  â€¢ æŒ‡çº¹ä¸åŒ¹é…                                           â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  ğŸ’¡ å»ºè®®: å…ˆä»å¤‡ä»½æ¢å¤ä¹¦ç­¾ï¼Œå†å¯¼å…¥å†å²                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  å¯¼å…¥ç­–ç•¥:                                                      â”‚
â”‚  â—‹ åˆå¹¶ - ä¿ç•™ç°æœ‰è®°å½•ï¼Œæ·»åŠ æ–°è®°å½•                              â”‚
â”‚  â— è¦†ç›– - æ¸…ç©ºç°æœ‰è®°å½•ï¼Œä½¿ç”¨å¯¼å…¥æ•°æ®                            â”‚
â”‚                                                                 â”‚
â”‚  é™„åŠ é€‰é¡¹:                                                      â”‚
â”‚  â˜‘ æ¢å¤å±•å¼€çŠ¶æ€                                                 â”‚
â”‚  â˜‘ æ¢å¤è§†å›¾æ¨¡å¼è®¾ç½®                                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             [å–æ¶ˆ]    [ä»ç„¶å¯¼å…¥ âš ï¸]    [å…ˆæ¢å¤ä¹¦ç­¾ â†’]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 æŒ‰é’®è¡Œä¸º

| æŒ‰é’® | åŒ¹é…åº¦é«˜æ—¶ | åŒ¹é…åº¦ä½æ—¶ |
|------|-----------|-----------|
| **ç¡®è®¤å¯¼å…¥** | ç›´æ¥å¯¼å…¥ | æ˜¾ç¤ºä¸ºã€Œä»ç„¶å¯¼å…¥ âš ï¸ã€ |
| **å…ˆæ¢å¤ä¹¦ç­¾** | éšè— | æ˜¾ç¤ºï¼Œè·³è½¬åˆ°æ¢å¤å‘å¯¼ |
| **å–æ¶ˆ** | å…³é—­å¼¹çª— | å…³é—­å¼¹çª— |

---

## ğŸ—ï¸ Phase 2 è¯¦ç»†è®¾è®¡ï¼šå®Œæ•´æ¢å¤å‘å¯¼

### 2.1 å‘å¯¼å…¥å£ä½ç½®

åœ¨ã€Œè®¾ç½®ä¸åˆå§‹åŒ–ã€é¢æ¿çš„å³ä¾§åŒºåŸŸæ·»åŠ æ¢å¤å‘å¯¼å…¥å£ã€‚

### 2.2 å‘å¯¼æ­¥éª¤

#### æ­¥éª¤ 1: é€‰æ‹©æ•°æ®æº

```javascript
const dataSources = {
    webdav: {
        name: 'WebDAV',
        status: 'available', // 'available' | 'unavailable' | 'checking'
        lastBackup: '2026-01-09 15:30',
        bookmarkFiles: [...],
        historyFiles: [...]
    },
    github: {
        name: 'GitHub',
        status: 'available',
        lastBackup: '2026-01-09 14:20',
        bookmarkFiles: [...],
        historyFiles: [...]
    },
    local: {
        name: 'æœ¬åœ°æ–‡ä»¶',
        status: 'ready',
        selectedFiles: []
    }
};
```

#### æ­¥éª¤ 2: é€‰æ‹©æ¢å¤å†…å®¹

```javascript
const restoreOptions = {
    restoreBookmarks: true,
    bookmarkSource: 'latest', // 'latest' | æ—¶é—´æˆ³
    restoreHistory: true,
    historyStrategy: 'merge', // 'merge' | 'overwrite'
    restoreViewSettings: true
};
```

#### æ­¥éª¤ 3: ç¡®è®¤å¹¶æ‰§è¡Œ

```javascript
async function executeRestore(options) {
    const results = {
        bookmarks: null,
        history: null,
        viewSettings: null
    };
    
    // 1. æ¢å¤ä¹¦ç­¾ï¼ˆå¦‚æœé€‰ä¸­ï¼‰
    if (options.restoreBookmarks) {
        results.bookmarks = await restoreBookmarksFromBackup(options.bookmarkSource);
    }
    
    // 2. æ¢å¤å¤‡ä»½å†å²ï¼ˆå¦‚æœé€‰ä¸­ï¼‰
    if (options.restoreHistory) {
        results.history = await importBackupHistory(options.historyFiles, {
            strategy: options.historyStrategy
        });
    }
    
    // 3. æ¢å¤è§†å›¾è®¾ç½®ï¼ˆå¦‚æœé€‰ä¸­ï¼‰
    if (options.restoreViewSettings) {
        results.viewSettings = await restoreViewSettings(options.historyFiles);
    }
    
    return results;
}
```

### 2.3 ä¹¦ç­¾æ¢å¤å®ç°

```javascript
/**
 * ä»å¤‡ä»½æ¢å¤ä¹¦ç­¾åˆ°æµè§ˆå™¨
 * @param {Object} bookmarkTree - ä¹¦ç­¾æ ‘æ•°æ®
 * @returns {Promise<{success: boolean, count: number}>}
 */
async function restoreBookmarksFromBackup(bookmarkTree) {
    // 1. è·å–ç‰¹æ®Šæ–‡ä»¶å¤¹ ID
    const [root] = await chrome.bookmarks.getTree();
    const bookmarkBar = root.children.find(c => c.id === '1'); // ä¹¦ç­¾æ 
    const otherBookmarks = root.children.find(c => c.id === '2'); // å…¶ä»–ä¹¦ç­¾
    
    // 2. æ¸…ç©ºç°æœ‰ä¹¦ç­¾ï¼ˆå¯é€‰ï¼Œéœ€ç”¨æˆ·ç¡®è®¤ï¼‰
    // await clearAllBookmarks();
    
    // 3. é€’å½’åˆ›å»ºä¹¦ç­¾
    let count = 0;
    async function createNode(node, parentId) {
        if (node.url) {
            // åˆ›å»ºä¹¦ç­¾
            await chrome.bookmarks.create({
                parentId,
                title: node.title,
                url: node.url
            });
            count++;
        } else if (node.children) {
            // åˆ›å»ºæ–‡ä»¶å¤¹
            const folder = await chrome.bookmarks.create({
                parentId,
                title: node.title
            });
            for (const child of node.children) {
                await createNode(child, folder.id);
            }
        }
    }
    
    // 4. ä»æ ¹èŠ‚ç‚¹å¼€å§‹åˆ›å»º
    for (const child of bookmarkTree.children || []) {
        const targetParent = child.title === 'ä¹¦ç­¾æ ' ? bookmarkBar.id : otherBookmarks.id;
        for (const subChild of child.children || []) {
            await createNode(subChild, targetParent);
        }
    }
    
    return { success: true, count };
}
```

---

## ğŸ“Š æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ•°æ®æ¢å¤æµç¨‹                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   WebDAV    â”‚      â”‚   GitHub    â”‚      â”‚  æœ¬åœ°æ–‡ä»¶   â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  è§£æå¤‡ä»½æ–‡ä»¶    â”‚
                    â”‚  (JSON/ZIP)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
              â–¼               â–¼               â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ä¹¦ç­¾å¤‡ä»½       â”‚ â”‚ å¤‡ä»½å†å²     â”‚ â”‚  è§†å›¾è®¾ç½®    â”‚
     â”‚  (HTML/JSON)   â”‚ â”‚ (ZIP/JSON)   â”‚ â”‚ (expandedIds) â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚                â”‚
              â–¼                 â–¼                â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ æ™ºèƒ½æ£€æµ‹       â”‚ â”‚ å…¼å®¹æ€§æ£€æµ‹   â”‚ â”‚              â”‚
     â”‚ ä¸å½“å‰ä¹¦ç­¾æ¯”è¾ƒ â”‚ â”‚ ä¸å½“å‰ä¹¦ç­¾   â”‚ â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â”‚    âš ï¸ è­¦å‘Š      â”‚
              â”‚   (åŒ¹é…åº¦ä½)    â”‚
              â–¼                 â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ æ¢å¤ä¹¦ç­¾       â”‚ â”‚ å¯¼å…¥å†å²     â”‚ â”‚ æ¢å¤è®¾ç½®     â”‚
     â”‚ chrome.bookmarksâ”‚ â”‚ syncHistory â”‚ â”‚ historyView  â”‚
     â”‚ .create()      â”‚ â”‚              â”‚ â”‚ Settings     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å®ç°æ¸…å•

### Phase 1: æ™ºèƒ½æ£€æµ‹ + è­¦å‘Šï¼ˆå¤‡ä»½å†å²å¯¼å…¥ï¼‰

- [x] åœ¨ history.html æ·»åŠ å¯¼å…¥æŒ‰é’®
- [ ] æ·»åŠ å¯¼å…¥å¼¹çª— HTML
- [ ] æ·»åŠ å¯¼å…¥å¼¹çª— CSS
- [ ] å¼•å…¥ JSZip åº“ï¼ˆè§£å‹ ZIPï¼‰
- [ ] å®ç° `parseImportFile()` - è§£æ JSON/ZIP
- [ ] å®ç° `detectCompatibility()` - æ™ºèƒ½æ£€æµ‹
- [ ] å®ç° `importBackupHistory()` - æ‰§è¡Œå¯¼å…¥
- [ ] å®ç° `restoreViewSettings()` - æ¢å¤è§†å›¾è®¾ç½®
- [ ] æ·»åŠ å¯¼å…¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶
- [ ] æ·»åŠ æ–‡ä»¶æ‹–æ‹½æ”¯æŒ
- [ ] æ·»åŠ é¢„è§ˆåŠŸèƒ½
- [ ] æ·»åŠ è¿›åº¦æ˜¾ç¤º
- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- [ ] æµ‹è¯• JSON å¯¼å…¥
- [ ] æµ‹è¯• ZIP å¯¼å…¥
- [ ] æµ‹è¯•æ™ºèƒ½æ£€æµ‹

### Phase 2: å®Œæ•´æ¢å¤å‘å¯¼

- [ ] åœ¨è®¾ç½®é¢æ¿æ·»åŠ æ¢å¤å‘å¯¼å…¥å£
- [ ] è®¾è®¡å‘å¯¼å¼¹çª— HTML
- [ ] å®ç°æ­¥éª¤ 1ï¼šæ•°æ®æºé€‰æ‹©
- [ ] å®ç°äº‘ç«¯æ£€æµ‹ï¼ˆWebDAVï¼‰
- [ ] å®ç°äº‘ç«¯æ£€æµ‹ï¼ˆGitHubï¼‰
- [ ] å®ç°æ­¥éª¤ 2ï¼šæ¢å¤å†…å®¹é€‰æ‹©
- [ ] å®ç°æ­¥éª¤ 3ï¼šç¡®è®¤ä¸é¢„è§ˆ
- [ ] å®ç° `restoreBookmarksFromBackup()` - ä¹¦ç­¾æ¢å¤
- [ ] å®ç°æ¢å¤æ‰§è¡Œæµç¨‹
- [ ] æ·»åŠ è¿›åº¦æ˜¾ç¤º
- [ ] æ·»åŠ é”™è¯¯å¤„ç†
- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- [ ] æµ‹è¯•å®Œæ•´æµç¨‹

### Phase 3: è‡ªåŠ¨åŒæ­¥

- [ ] è®¾è®¡å¢é‡åŒæ­¥ç­–ç•¥
- [ ] å®ç°å®šæ—¶æ£€æµ‹
- [ ] å®ç°å†²çªè‡ªåŠ¨è§£å†³
- [ ] æ·»åŠ åŒæ­¥çŠ¶æ€æ˜¾ç¤º

---

## ğŸ“ å…³è”æ–‡æ¡£

- [å¤‡ä»½å†å²ç»Ÿä¸€å­˜å‚¨è®¡åˆ’ä¹¦](./backup_history_unified_storage_plan.md)
- [è®¾ç½®ä¸åˆå§‹åŒ– UI è®¡åˆ’ä¹¦](./settings_initialization_ui_plan.md)
- [å¤‡ä»½å†å²å¯¼å…¥æ¢å¤è®¡åˆ’ä¹¦](./backup_history_import_restore_plan.md)

---

*è®¡åˆ’ä¹¦ç»“æŸ*
