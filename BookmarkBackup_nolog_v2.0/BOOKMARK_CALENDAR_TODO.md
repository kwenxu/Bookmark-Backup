# 书签日历实现任务清单

## 设计要求
- ✅ iOS风格层级导航：年 → 月 → 周 → 日
- ✅ 默认进入月视图
- ✅ 面包屑导航显示当前层级
- ✅ 每个视图下方显示书签列表（带图标、可点击）
- ✅ 分级显示：年视图显示月周日、月视图显示周日、周视图显示日

## 实现步骤

### 阶段1：基础文件创建
- [x] 创建 `bookmark_calendar.js` - iOS风格日历核心逻辑
- [x] 创建 `bookmark_calendar.css` - 日历样式
- [x] 修改 `history.html` - 更新HTML结构（添加面包屑+日历容器）
- [ ] 修改 `history.js` - 更新翻译和初始化

### 阶段2：HTML结构修改
- [ ] 修改导航标题：「书签温故」→「书签记录」
- [ ] 移除旧的过滤器UI（状态、时间过滤）
- [ ] 添加面包屑导航容器
- [ ] 添加日历容器

### 阶段3：JavaScript核心功能  
- [x] 实现BookmarkCalendar类初始化
- [x] 实现书签数据加载和按日期分组
- [x] 实现月视图渲染（左侧周数 + 中间日历）
- [x] 实现月视图下方书签列表（按日分组）
- [x] 实现面包屑导航更新和点击返回
- [x] 实现层级点击逻辑（点击日期进入下一层）
- [x] 实现周视图渲染（7天横向卡片）+ 下方书签列表
- [x] 实现日视图渲染（按小时分组 + 书签列表）
- [x] 实现年视图渲染（12个月卡片 + 点击导航）

### 阶段4：书签列表功能
- [x] 实现书签项组件（favicon + 标题 + URL + 时间）
- [x] 实现点击书签打开新标签页
- [x] 实现悬停高亮效果
- [x] 实现分组标题（按月/周/日/小时）
- [x] 实现书签数量统计显示

### 阶段5：样式美化
- [x] 面包屑导航样式
- [x] 月视图日历网格样式
- [x] 周数列样式
- [x] 7天卡片样式
- [x] 书签列表样式
- [x] 年视图卡片样式
- [x] 响应式布局

### 阶段6：翻译更新
- [x] 更新中文翻译（书签温故→书签记录）
- [x] 更新英文翻译（Review→Records）
- [x] 更新界面文本

### 阶段7：测试和优化
- [ ] 测试月视图显示和导航
- [ ] 测试周视图显示和导航
- [ ] 测试日视图显示和导航
- [ ] 测试年视图显示和导航
- [ ] 测试面包屑返回功能
- [ ] 测试书签列表点击
- [ ] 测试大量书签性能

## 实现细节

### 默认视图
```javascript
// 默认进入月视图，显示最近有书签的月份
this.viewLevel = 'month';
this.jumpToRecentBookmarks(); // 跳转到最近有书签的月份
```

### 书签列表显示规则
1. **年视图下方**：显示全年书签，分组：
   - 按月分组 → 按周分组 → 按日显示
   
2. **月视图下方**：显示本月书签，分组：
   - 按周分组 → 按日显示
   
3. **周视图下方**：显示本周书签，分组：
   - 按日显示
   
4. **日视图下方**：显示当日书签
   - 按小时分组显示

### 书签项格式
```html
<div class="bookmark-item" data-url="...">
  <img class="bookmark-favicon" src="chrome://favicon/...">
  <div class="bookmark-info">
    <div class="bookmark-title">标题</div>
    <div class="bookmark-url">https://...</div>
  </div>
  <div class="bookmark-time">10:30</div>
</div>
```

---

**创建时间**: 2025-11-20
**完成时间**: 2025-11-20
**当前状态**: ✅ 实现完成，待测试

---

## 实现总结

### 已完成功能
✅ **月视图（默认）**
- 左侧周数列 + 中间日历网格
- 显示每日书签数量
- 点击日期跳转到日视图
- 点击周数跳转到周视图
- 下方显示本月所有书签（按日分组）

✅ **周视图**
- 7天横向卡片显示
- 每天显示书签数量
- 点击卡片跳转到日视图
- 下方显示本周所有书签（按日分组）

✅ **日视图**
- 显示完整日期
- 按小时分组显示书签（00:00-23:59）
- 空状态提示

✅ **年视图**
- 12个月卡片网格
- 显示每月书签总数
- 点击月份卡片跳转到月视图

✅ **面包屑导航**
- iOS风格层级导航
- 显示当前位置：年/月/周/日
- 点击返回上级视图

✅ **书签列表**
- Favicon图标显示
- 标题、URL、时间信息
- 点击打开新标签页
- 悬停高亮效果

### 测试步骤
1. 打开Chrome扩展管理页面
2. 刷新BookmarkBackup扩展
3. 点击扩展图标，打开history.html
4. 点击「书签记录」标签
5. 验证默认显示月视图
6. 测试导航：
   - 点击日期 → 进入日视图
   - 点击周数 → 进入周视图
   - 点击面包屑 → 返回上级
   - 点击年份 → 进入年视图
7. 测试书签列表点击功能
