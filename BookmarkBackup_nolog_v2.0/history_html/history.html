<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="history.css?v=2.1">
    <link rel="stylesheet" href="canvas_obsidian_style.css">
    <link rel="stylesheet" href="bookmark_calendar.css">
    <link rel="stylesheet" href="../font-awesome.min.css">
    <script src="history_bootstrap.js" defer></script>
    <script src="vendor/marked.min.js"></script>
    <script src="vendor/obsidian-markdown.js"></script>
    <script src="bookmark_tree_context_menu.js" defer></script>
    <script src="bookmark_tree_drag_drop.js" defer></script>
    <script src="pointer_drag.js" defer></script>
    <script src="bookmark_canvas_module.js?v=3.7" defer></script>
    <script src="shortcuts_helpers.js" defer></script>
    <script src="bookmark_calendar.js" defer></script>
    <script src="browsing_history_calendar.js" defer></script>
    <!-- ÊµèËßàÂéÜÂè≤ËæÖÂä©Â∑•ÂÖ∑ÔºàÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞Ôºâ -->
    <script src="database/utils.js" defer></script>
    <script src="history.js" defer></script>
</head>

<body>
    <!-- Â§¥ÈÉ®ÂØºËà™ -->
    <header class="history-header">
        <div class="header-left">
            <h1 id="pageTitle">Â§á‰ªΩÂéÜÂè≤Êü•ÁúãÂô®</h1>
            <span class="header-subtitle" id="pageSubtitle">Á±ª‰ºº Git ÁöÑ‰π¶Á≠æÂèòÂåñËøΩË∏™</span>
        </div>
        <div class="header-right">
            <!-- ÊêúÁ¥¢Ê°Ü -->
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢‰π¶Á≠æ„ÄÅÊñá‰ª∂Â§π..." />
                <i class="fas fa-search"></i>
            </div>

            <!-- Â∑•ÂÖ∑ÊåâÈíÆÁªÑ -->
            <div class="tool-buttons">

                <!-- ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ - Áã¨Á´ãËÆæÁΩÆÔºå‰∏ªUI‰ºòÂÖà -->
                <button id="themeToggle" class="tool-btn">
                    <i class="fas fa-moon"></i>
                    <span class="btn-tooltip" id="themeTooltip"></span>
                </button>
                <!-- ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ - Áã¨Á´ãËÆæÁΩÆÔºå‰∏ªUI‰ºòÂÖà -->
                <button id="langToggle" class="tool-btn">
                    <span class="lang-text">EN</span>
                    <span class="btn-tooltip" id="langTooltip"></span>
                </button>
                <!-- ËØ¥ÊòéÊåâÈíÆÔºöÂø´Êç∑ÈîÆ & ÂºÄÊ∫ê‰ø°ÊÅØ -->
                <button id="helpToggle" class="tool-btn">
                    <i class="fas fa-question-circle"></i>
                    <span class="btn-tooltip" id="helpTooltip"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <div class="main-container">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <aside class="sidebar" id="sidebar">
            <!-- ‰æßËæπÊ†èÊî∂Ëµ∑ÊåâÈíÆ -->
            <button class="sidebar-toggle" id="sidebarToggle" title="Êî∂Ëµ∑/Â±ïÂºÄ‰æßËæπÊ†è">
                <i class="fas fa-chevron-left"></i>
            </button>

            <nav class="nav-tabs">
                <!-- Bookmark Git Âå∫ÂüüÁªÑ -->
                <div class="nav-group">
                    <div class="nav-group-title" id="bookmarkGitTitle"></div>
                    <button class="nav-tab" data-view="current-changes">
                        <i class="fas fa-exchange-alt"></i>
                        <span id="navCurrentChangesText">ÂΩìÂâçÂèòÂåñ</span>
                    </button>
                    <button class="nav-tab" data-view="history">
                        <i class="fas fa-history"></i>
                        <span id="navHistoryText">Â§á‰ªΩÂéÜÂè≤</span>
                    </button>
                </div>

                <!-- Bookmark toolbox Âå∫ÂüüÁªÑ -->
                <div class="nav-group">
                    <div class="nav-group-title" id="bookmarkToolboxTitle"></div>
                    <button class="nav-tab" data-view="canvas">
                        <i class="fas fa-project-diagram"></i>
                        <span id="navCanvasText">Bookmark Canvas</span>
                    </button>
                    <button class="nav-tab" data-view="additions">
                        <i class="fas fa-plus-circle"></i>
                        <span id="navAdditionsText">‰π¶Á≠æÊ∏©ÊïÖ</span>
                    </button>
                    <button class="nav-tab" data-view="recommend">
                        <i class="fas fa-lightbulb"></i>
                        <span id="navRecommendText">‰π¶Á≠æÊé®Ëçê</span>
                    </button>
                </div>
            </nav>

            <!-- Êó∂Èó¥ÊçïÊçâÂ∞èÁªÑ‰ª∂ -->
            <div class="time-tracking-widget" id="timeTrackingWidget">
                <div class="time-tracking-widget-header">
                    <i class="fas fa-stopwatch"></i>
                    <span id="timeTrackingWidgetTitle">Êó∂Èó¥ÊçïÊçâ</span>
                </div>
                <div class="time-tracking-widget-list" id="timeTrackingWidgetList">
                    <div class="time-tracking-widget-empty" id="timeTrackingWidgetEmpty">
                        <span id="timeTrackingWidgetEmptyText">ÊöÇÊó†ËøΩË∏™‰∏≠ÁöÑ‰π¶Á≠æ</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Âè≥‰æßÂÜÖÂÆπÂå∫Âüü -->
        <main class="content-area">
            <!-- Âø´Êç∑ÈîÆ‰∏éÂºÄÊ∫ê‰ø°ÊÅØÂºπÁ™ó -->
            <div id="shortcutsModal" class="modal">
                <div class="modal-content shortcuts-modal">
                    <div class="shortcuts-header">
                        <h2 id="shortcutsModalTitle"></h2>
                        <button id="closeShortcutsModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div id="openSourceInfo" class="shortcuts-section open-source-section">
                        <div class="shortcuts-card">
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div>
                                    <p id="openSourceGithubLabel"
                                        style="font-size: 14px; color: var(--text-secondary); margin: 0 0 4px 0;">GitHub
                                        ‰ªìÂ∫ì:</p>
                                    <a id="openSourceGithubLink"
                                        href="https://github.com/kwenxu/Bookmark-Backup?tab=readme-ov-file#readme"
                                        target="_blank"
                                        style="display: block; padding: 8px 12px; background-color: var(--bg-tertiary); border-radius: 6px; color: var(--link-color); text-decoration: none; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        <i class="fab fa-github" style="margin-right: 5px;"></i>
                                        https://github.com/kwenxu/Bookmark-Backup
                                    </a>
                                </div>

                                <div>
                                    <p id="openSourceIssueLabel"
                                        style="font-size: 14px; color: var(--text-secondary); margin: 0 0 4px 0;">ÈóÆÈ¢òÂèçÈ¶à:
                                    </p>
                                    <a id="openSourceIssueLink" href="https://github.com/kwenxu/Bookmark-Backup/issues"
                                        target="_blank"
                                        style="display: block; padding: 8px 12px; background-color: var(--bg-tertiary); border-radius: 6px; color: var(--link-color); text-decoration: none;">
                                        <i class="fas fa-exclamation-circle" style="margin-right: 5px;"></i>
                                        <span id="openSourceIssueText">Êèê‰∫§ÈóÆÈ¢ò</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="shortcuts-divider" />
                    <div id="shortcutsContent" class="shortcuts-section"></div>
                </div>
            </div>

            <!-- Êó∂Èó¥ÊçïÊçâÁä∂ÊÄÅËØ¥ÊòéÂºπÁ™ó -->
            <div id="trackingStateModal" class="modal">
                <div class="modal-content tracking-state-modal">
                    <div class="modal-header">
                        <h2 id="trackingStateModalTitle">Êó∂Èó¥ÊçïÊçâÁä∂ÊÄÅËØ¥Êòé</h2>
                        <button id="closeTrackingStateModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div class="tracking-state-content">
                        <table class="tracking-state-table">
                            <thead>
                                <tr>
                                    <th id="stateTableHeaderIcon">ÂõæÊ†á</th>
                                    <th id="stateTableHeaderState">Áä∂ÊÄÅ</th>
                                    <th id="stateTableHeaderCondition">Êù°‰ª∂</th>
                                    <th id="stateTableHeaderRate">ËÆ°Êó∂ÂÄçÁéá</th>
                                    <th id="stateTableHeaderExample">‰æãÂ≠ê</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="state-icon-cell">üü¢</td>
                                    <td id="stateActiveLabel">Ê¥ªË∑É</td>
                                    <td id="stateActiveCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£ÁÑ¶ÁÇπ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó1.0</td>
                                    <td id="stateActiveExample">Ê≠£Âú®ÈòÖËØª„ÄÅÊªöÂä®È°µÈù¢„ÄÅÊâìÂ≠ó</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üü°</td>
                                    <td id="stateIdleLabel">ÂâçÂè∞ÈùôÊ≠¢</td>
                                    <td id="stateIdleCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£ÁÑ¶ÁÇπ + Áî®Êà∑Á©∫Èó≤</td>
                                    <td class="state-rate-cell">√ó0.8</td>
                                    <td id="stateIdleExample">ÈùôÊ≠¢ËßÇÁúãËßÜÈ¢ë„ÄÅÊÄùËÄÉÂÜÖÂÆπ</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üîµ</td>
                                    <td id="stateVisibleLabel">ÂèØËßÅÂèÇËÄÉ</td>
                                    <td id="stateVisibleCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£Êó†ÁÑ¶ÁÇπ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó0.5</td>
                                    <td id="stateVisibleExample">ÂàÜÂ±èÂèÇËÄÉÊñáÊ°£„ÄÅÂØπÁÖß‰ª£Á†Å</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">‚ö™</td>
                                    <td id="stateBackgroundLabel">ÂêéÂè∞</td>
                                    <td id="stateBackgroundCondition">ÈùûÂΩìÂâçÊ†áÁ≠æ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó0.1</td>
                                    <td id="stateBackgroundExample">ÊåÇÊú∫„ÄÅÂêéÂè∞Êí≠ÊîæÈü≥‰πê</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üí§</td>
                                    <td id="stateSleepLabel">Áù°Áú†</td>
                                    <td id="stateSleepCondition">Áî®Êà∑Á©∫Èó≤Ôºà‰ªª‰ΩïÊ†áÁ≠æÔºâ</td>
                                    <td class="state-rate-cell">√ó0</td>
                                    <td id="stateSleepExample">Á¶ªÂºÄÁîµËÑë„ÄÅÈîÅÂ±è„ÄÅÈ°µÈù¢Ëá™Âä®Áù°Áú†</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="tracking-state-formula">
                            <code id="trackingStateFormula">ÁªºÂêàÊó∂Èó¥ = Ê¥ªË∑É√ó1.0 + ÂâçÂè∞ÈùôÊ≠¢√ó0.8 + ÂèØËßÅÂèÇËÄÉ√ó0.5 + ÂêéÂè∞√ó0.1</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÊùÉÈáçÂÖ¨ÂºèËØ¥ÊòéÂºπÁ™ó -->
            <div id="formulaHelpModal" class="modal content-center">
                <div class="modal-content formula-help-modal">
                    <div class="modal-header">
                        <h2 id="formulaHelpModalTitle">ÊùÉÈáçÂÖ¨ÂºèËØ¥Êòé</h2>
                        <button id="closeFormulaHelpModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div class="formula-help-content">
                        <div class="formula-help-section">
                            <h3 id="formulaHelpGeneralTitle">ÈÄöÁî®ÂÖ¨Âºè</h3>
                            <div class="formula-help-code">
                                <code>Âõ†Â≠êÂÄº = 1 / (1 + (ÂÆûÈôÖÂÄº / ÈòàÂÄº)^0.7)</code>
                            </div>
                        </div>

                        <div class="formula-help-section">
                            <h3 id="formulaHelpFeaturesTitle">ÂÖ¨ÂºèÁâπÁÇπ</h3>
                            <ul class="formula-help-list">
                                <li id="formulaHelpFeature1"><strong>ÈòàÂÄºÂ§Ñ = 0.5</strong>ÔºöÂΩìÂÆûÈôÖÂÄºÁ≠â‰∫éÈòàÂÄºÊó∂ÔºåÂõ†Â≠êÂÄºÊ≠£Â•ΩÊòØ0.5</li>
                                <li id="formulaHelpFeature2"><strong>Âπ≥ÊªëË°∞Âáè</strong>Ôºö‰ΩøÁî®ÂπÇÂáΩÊï∞(^0.7)‰ΩøË°∞ÂáèÊõ¥Âπ≥ÁºìÔºåÈÅøÂÖçÁ°¨Êà™Êñ≠</li>
                                <li id="formulaHelpFeature3"><strong>Ê∞∏‰∏çÂΩíÈõ∂</strong>ÔºöÂç≥‰ΩøÊï∞ÂÄºÂæàÂ§ßÔºå‰ªç‰øùÁïôÂæÆÂ∞èÂå∫ÂàÜÂ∫¶</li>
                                <li id="formulaHelpFeature4"><strong>Â§ßÊï∞ÂÄºÂèãÂ•Ω</strong>Ôºö1000Ê¨°ÁÇπÂáª‰ªçÊúâ0.02ÁöÑÂå∫ÂàÜÂ∫¶</li>
                            </ul>
                        </div>

                        <div class="formula-help-section">
                            <h3 id="formulaHelpNotesTitle">Ê≥®ÊÑè‰∫ãÈ°π</h3>
                            <ul class="formula-help-list">
                                <li id="formulaHelpNote1"><strong>F„ÄÅC„ÄÅT</strong> ‰ΩøÁî® inverse Ê®°ÂºèÔºöÂÄºË∂äÂ§ßÔºåÂõ†Â≠êË∂äÂ∞èÔºàÂ¶ÇÁÇπÂáªË∂äÂ§öÔºåÂÜ∑Èó®Â∫¶Ë∂ä‰ΩéÔºâ
                                </li>
                                <li id="formulaHelpNote2"><strong>D</strong> ‰ΩøÁî®Ê≠£ÂêëÊ®°ÂºèÔºöÊú™ËÆøÈóÆÂ§©Êï∞Ë∂äÂ§öÔºåÈÅóÂøòÂ∫¶Ë∂äÈ´ò</li>
                                <li id="formulaHelpNote3"><strong>L</strong> ÊòØÂ∏ÉÂ∞îÂÄºÔºöÊâãÂä®Ê∑ªÂä†=1ÔºåÂê¶Âàô=0</li>
                            </ul>
                        </div>

                        <div class="formula-help-section">
                            <h3 id="formulaHelpExampleTitle">ÊïàÊûúÁ§∫‰æã</h3>
                            <table class="formula-help-table">
                                <thead>
                                    <tr>
                                        <th id="formulaHelpTableValue">ÂÆûÈôÖÂÄº/ÈòàÂÄº</th>
                                        <th id="formulaHelpTableResult">Âõ†Â≠êÂÄº</th>
                                        <th id="formulaHelpTableMeaning">Âê´‰πâ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>0</td>
                                        <td>1.00</td>
                                        <td id="formulaHelpMeaning1">ÊúÄÈ´ò‰ºòÂÖà</td>
                                    </tr>
                                    <tr>
                                        <td>0.5√ó</td>
                                        <td>0.75</td>
                                        <td id="formulaHelpMeaning2">ËæÉÈ´ò</td>
                                    </tr>
                                    <tr>
                                        <td id="formulaHelpThreshold">1√ó(ÈòàÂÄº)</td>
                                        <td>0.50</td>
                                        <td id="formulaHelpMeaning3">‰∏≠Á≠â</td>
                                    </tr>
                                    <tr>
                                        <td>3√ó</td>
                                        <td>0.22</td>
                                        <td id="formulaHelpMeaning4">ËæÉ‰Ωé</td>
                                    </tr>
                                    <tr>
                                        <td>10√ó</td>
                                        <td>0.10</td>
                                        <td id="formulaHelpMeaning5">Âæà‰Ωé</td>
                                    </tr>
                                    <tr>
                                        <td>100√ó</td>
                                        <td>0.02</td>
                                        <td id="formulaHelpMeaning6">ÊûÅ‰Ωé‰ΩÜ‰ªçÊúâÂå∫ÂàÜ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂΩìÂâçÂèòÂåñËßÜÂõæ -->
            <div id="current-changesView" class="view">

                <!-- ÂèòÂåñÂàóË°®ÔºàÂç°ÁâáÂºèÔºå‰π¶Á≠æÊ†ëÈ¢ÑËßà‰ºöÂÜÖÂµåÂà∞Bookmark ChangesÂÜÖÈÉ®Ôºâ -->
                <div id="currentChangesList" class="current-changes-container">
                    <!-- Âä®ÊÄÅÂä†ËΩΩÂΩìÂâçÂèòÂåñ -->
                </div>
            </div>

            <!-- Â§á‰ªΩÂéÜÂè≤ËßÜÂõæ -->
            <div id="historyView" class="view">
                <div class="view-header">
                    <div class="view-header-left">
                        <h2 id="historyViewTitle">Â§á‰ªΩÂéÜÂè≤</h2>
                    </div>
                    <div class="view-header-right">
                        <!-- ÂàÜÈ°µÊéß‰ª∂ -->
                        <div id="historyPagination"
                            style="display: flex; align-items: center; gap: 8px; margin-right: 12px;">
                            <button id="historyPrevPage" class="action-btn compact no-tooltip">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <input type="text" id="historyPageInput" value="1"
                                style="width: 32px; height: 28px; padding: 4px; font-size: 13px; text-align: center; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-secondary); color: var(--text-primary); outline: none;">
                            <div
                                style="display: flex; align-items: center; color: var(--text-secondary); font-size: 13px;">
                                <span style="margin: 0 4px;">/</span>
                                <span id="historyTotalPages">1</span>
                            </div>
                            <button id="historyNextPage" class="action-btn compact no-tooltip">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>

                        <!-- Ê∏ÖÈô§Â§á‰ªΩÂéÜÂè≤ËÆ∞ÂΩïÔºà‰∏é‰∏ªUI‰∏ÄËá¥Ôºâ -->
                        <button id="clearBackupHistoryBtn" class="action-btn compact" title="Ê∏ÖÈô§ËÆ∞ÂΩï">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <!-- ÂÖ®Â±ÄÂØºÂá∫ÊåâÈíÆ -->
                        <button id="globalExportBtn" class="action-btn compact" title="ÂÖ®Â±ÄÂØºÂá∫">
                            <i class="fas fa-file-export"></i>
                        </button>
                        <!-- ËØ¶Áï•ÂàáÊç¢ÊåâÈíÆ -->
                        <div class="toggle-btn-group" id="historyDetailModeToggle">
                            <button id="historyDetailModeSimple" class="toggle-btn active" data-mode="simple"
                                title="ÁÆÄÁï•Ê®°Âºè">
                                <svg class="icon-compact" viewBox="0 0 24 24" width="16" height="16" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="4" y1="9" x2="20" y2="9" />
                                    <line x1="4" y1="15" x2="20" y2="15" />
                                    <circle cx="2" cy="9" r="1.5" fill="currentColor" stroke="none" />
                                    <circle cx="2" cy="15" r="1.5" fill="currentColor" stroke="none" />
                                </svg>
                                <span id="historyDetailModeSimpleText">ÁÆÄÁï•</span>
                            </button>
                            <button id="historyDetailModeDetailed" class="toggle-btn" data-mode="detailed" title="ËØ¶ÁªÜÊ®°Âºè">
                                <svg class="icon-detail" viewBox="0 0 24 24" width="16" height="16" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="4" y1="6" x2="20" y2="6" />
                                    <line x1="4" y1="10" x2="20" y2="10" />
                                    <line x1="4" y1="14" x2="20" y2="14" />
                                    <line x1="4" y1="18" x2="20" y2="18" />
                                </svg>
                                <span id="historyDetailModeDetailedText">ËØ¶ÁªÜ</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="historyList" class="history-commits">
                    <!-- Âä®ÊÄÅÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩï -->
                </div>
            </div>

            <!-- ‰π¶Á≠æËÆ∞ÂΩïËßÜÂõæ -->
            <div id="additionsView" class="view">
                <div class="view-header">
                    <h2 id="additionsViewTitle">‰π¶Á≠æËÆ∞ÂΩï</h2>
                </div>

                <!-- ‰π¶Á≠æËÆ∞ÂΩïÂ≠êËßÜÂõæÊ†áÁ≠æ -->
                <div class="additions-tabs">
                    <button id="additionsTabReview" class="additions-tab active" data-tab="review">‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩï</button>
                    <button id="additionsTabBrowsing" class="additions-tab" data-tab="browsing">‰π¶Á≠æÊµèËßàËÆ∞ÂΩï</button>
                    <button id="additionsTabTracking" class="additions-tab" data-tab="tracking">Êó∂Èó¥ÊçïÊçâ</button>
                </div>

                <!-- Â≠êËßÜÂõæ 1Ôºö‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩïÔºàÊó•ÂéÜËßÜÂõæÔºâ -->
                <div id="additionsReviewPanel" class="additions-subview active">
                    <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                    <div class="calendar-breadcrumb-nav">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn active" id="breadcrumbYear">
                                    <i class="fas fa-calendar"></i>
                                    <span id="breadcrumbYearText">2024Âπ¥</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbYear">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbYear-menu">
                                    <!-- Âπ¥‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator1" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbMonth" style="display:none;">
                                    <span id="breadcrumbMonthText">11Êúà</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbMonth">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbMonth-menu">
                                    <!-- Êúà‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator2" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbWeek" style="display:none;">
                                    <span id="breadcrumbWeekText">Á¨¨45Âë®</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbWeek">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbWeek-menu">
                                    <!-- Âë®ÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator3" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbDay" style="display:none;">
                                    <span id="breadcrumbDayText">11Êúà20Êó•</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbDay">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbDay-menu">
                                    <!-- Êó•ÊúüÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button class="calendar-action-btn" id="calendarExportBtn">
                                <i class="fas fa-file-export"></i>
                                <span class="btn-tooltip" id="calendarExportTooltip">ÂØºÂá∫ËÆ∞ÂΩï</span>
                            </button>
                            <button class="calendar-action-btn" id="calendarSelectModeBtn">
                                <i class="fas fa-check-square"></i>
                                <span class="btn-tooltip" id="calendarSelectModeText">ÂãæÈÄâ</span>
                            </button>
                            <button class="calendar-action-btn" id="calendarLocateTodayBtn">
                                <i class="fas fa-crosshairs"></i>
                                <span class="btn-tooltip" id="calendarLocateTodayText">ÂÆö‰ΩçËá≥‰ªäÂ§©</span>
                            </button>
                        </div>
                    </div>

                    <!-- Êó•ÂéÜÂÆπÂô® -->
                    <div id="bookmarkCalendarView" class="bookmark-calendar-view">
                        <div style="padding: 40px; text-align: center; color: var(--text-secondary);">
                            <i class="fas fa-calendar-alt"
                                style="font-size: 48px; opacity: 0.3; margin-bottom: 16px;"></i>
                            <p id="calendarLoadingText">Ê≠£Âú®Âä†ËΩΩÊó•ÂéÜ...</p>
                        </div>
                    </div>
                </div>

                <!-- Â≠êËßÜÂõæ 2Ôºö‰π¶Á≠æÊµèËßàËÆ∞ÂΩï -->
                <div id="additionsBrowsingPanel" class="additions-subview">
                    <!-- ÊµèËßàËÆ∞ÂΩïÂ≠êËßÜÂõæÊ†áÁ≠æ -->
                    <div class="browsing-sub-tabs">
                        <button id="browsingTabHistory" class="browsing-sub-tab active"
                            data-sub-tab="history">ÁÇπÂáªËÆ∞ÂΩï</button>
                        <button id="browsingTabRanking" class="browsing-sub-tab" data-sub-tab="ranking">ÁÇπÂáªÊéíË°å</button>
                        <button id="browsingTabRelated" class="browsing-sub-tab" data-sub-tab="related">ÂÖ≥ËÅîËÆ∞ÂΩï</button>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.1ÔºöÁÇπÂáªËÆ∞ÂΩïÔºàÊó•ÂéÜËßÜÂõæÔºâ -->
                    <div id="browsingHistoryPanel" class="browsing-sub-panel active">
                        <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                        <div class="calendar-breadcrumb-nav">
                            <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn active" id="browsingBreadcrumbYear">
                                        <i class="fas fa-calendar"></i>
                                        <span id="browsingBreadcrumbYearText">2024Âπ¥</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbYear">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbYear-menu">
                                        <!-- Âπ¥‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator1"
                                    style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbMonth" style="display:none;">
                                        <span id="browsingBreadcrumbMonthText">11Êúà</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbMonth">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbMonth-menu">
                                        <!-- Êúà‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator2"
                                    style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbWeek" style="display:none;">
                                        <span id="browsingBreadcrumbWeekText">Á¨¨45Âë®</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbWeek">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbWeek-menu">
                                        <!-- Âë®ÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator3"
                                    style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbDay" style="display:none;">
                                        <span id="browsingBreadcrumbDayText">11Êúà20Êó•</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbDay">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbDay-menu">
                                        <!-- Êó•ÊúüÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="calendar-action-btn" id="browsingCalendarExportBtn">
                                    <i class="fas fa-file-export"></i>
                                    <span class="btn-tooltip" id="browsingCalendarExportTooltip">ÂØºÂá∫ËÆ∞ÂΩï</span>
                                </button>
                                <button class="calendar-action-btn" id="browsingCalendarSelectModeBtn">
                                    <i class="fas fa-check-square"></i>
                                    <span class="btn-tooltip" id="browsingCalendarSelectModeText">ÂãæÈÄâ</span>
                                </button>
                                <button class="calendar-action-btn" id="browsingCalendarLocateTodayBtn">
                                    <i class="fas fa-crosshairs"></i>
                                    <span class="btn-tooltip" id="browsingCalendarLocateTodayText">ÂÆö‰ΩçËá≥‰ªäÂ§©</span>
                                </button>
                            </div>
                        </div>

                        <!-- Êó•ÂéÜÂÆπÂô® -->
                        <div id="browsingCalendarView" class="bookmark-calendar-view">
                            <div style="padding: 40px; text-align: center; color: var(--text-secondary);">
                                <i class="fas fa-calendar-alt"
                                    style="font-size: 48px; opacity: 0.3; margin-bottom: 16px;"></i>
                                <p id="browsingCalendarLoadingText">Ê≠£Âú®Âä†ËΩΩÊó•ÂéÜ...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.2ÔºöÁÇπÂáªÊéíË°å -->
                    <div id="browsingRankingPanel" class="browsing-sub-panel">
                        <div class="browsing-ranking-header">
                            <div class="browsing-ranking-title-block">
                                <div id="browsingRankingTitle" class="ranking-title">ÁÇπÂáªÊéíË°å</div>
                                <div id="browsingRankingDescription" class="ranking-description">
                                    Âü∫‰∫éÊµèËßàÂô®ÂéÜÂè≤ËÆ∞ÂΩïÔºåÊåâÁÇπÂáªÊ¨°Êï∞ÁªüËÆ°ÂΩìÂâç‰π¶Á≠æÁöÑÁÉ≠Èó®Á®ãÂ∫¶„ÄÇ
                                </div>
                            </div>
                            <div class="browsing-ranking-filters">
                                <button id="browsingRankingFilterDay" class="ranking-time-filter-btn"
                                    data-range="day">ÂΩìÂ§©</button>
                                <button id="browsingRankingFilterWeek" class="ranking-time-filter-btn"
                                    data-range="week">ÂΩìÂë®</button>
                                <button id="browsingRankingFilterMonth" class="ranking-time-filter-btn active"
                                    data-range="month">ÂΩìÊúà</button>
                                <button id="browsingRankingFilterYear" class="ranking-time-filter-btn"
                                    data-range="year">ÂΩìÂπ¥</button>
                                <button id="browsingRankingFilterAll" class="ranking-time-filter-btn"
                                    data-range="all">ÂÖ®ÈÉ®</button>
                            </div>
                        </div>
                        <!-- Êó∂Èó¥ÊÆµËèúÂçïÂÆπÂô®ÔºàÂú®Á≠õÈÄâÊåâÈíÆ‰∏ãÊñπÔºâ -->
                        <div id="browsingRankingTimeMenu" class="browsing-time-menu" style="display: none;"></div>
                        <div id="browsingRankingList" class="ranking-list">
                            <div class="empty-state">
                                <div class="empty-state-icon"><i class="fas fa-chart-bar"></i></div>
                                <div class="empty-state-title" id="browsingRankingLoadingText">Ê≠£Âú®ËØªÂèñÂéÜÂè≤ËÆ∞ÂΩï...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.3Ôºö‰π¶Á≠æÂÖ≥ËÅîËÆ∞ÂΩï -->
                    <div id="browsingRelatedPanel" class="browsing-sub-panel">
                        <div class="browsing-ranking-header">
                            <div class="browsing-ranking-title-block">
                                <div id="browsingRelatedTitle" class="ranking-title">ÂÖ≥ËÅîËÆ∞ÂΩï</div>
                                <div id="browsingRelatedDescription" class="ranking-description">
                                    ÊòæÁ§∫ÊµèËßàÂô®ÂéÜÂè≤ËÆ∞ÂΩïÔºåÂπ∂Áî®ÁªøËâ≤ËæπÊ°ÜÂá∏Êòæ‰π¶Á≠æÁõ∏ÂÖ≥ÁöÑËÆ∞ÂΩï„ÄÇ
                                </div>
                            </div>
                            <div class="browsing-ranking-filters">
                                <button id="browsingRelatedFilterDay" class="ranking-time-filter-btn active"
                                    data-range="day">ÂΩìÂ§©</button>
                                <button id="browsingRelatedFilterWeek" class="ranking-time-filter-btn"
                                    data-range="week">ÂΩìÂë®</button>
                                <button id="browsingRelatedFilterMonth" class="ranking-time-filter-btn"
                                    data-range="month">ÂΩìÊúà</button>
                                <button id="browsingRelatedFilterYear" class="ranking-time-filter-btn"
                                    data-range="year">ÂΩìÂπ¥</button>
                                <button id="browsingRelatedFilterAll" class="ranking-time-filter-btn"
                                    data-range="all">ÂÖ®ÈÉ®</button>
                                <button id="browsingRelatedSortBtn" class="ranking-sort-btn">
                                    <i class="fas fa-sort-amount-down"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Êó∂Èó¥ÊÆµËèúÂçïÂÆπÂô®ÔºàÂú®Á≠õÈÄâÊåâÈíÆ‰∏ãÊñπÔºâ -->
                        <div id="browsingRelatedTimeMenu" class="browsing-time-menu" style="display: none;"></div>
                        <div id="browsingRelatedList" class="related-history-list">
                            <div class="empty-state">
                                <div class="empty-state-icon"><i class="fas fa-history"></i></div>
                                <div class="empty-state-title" id="browsingRelatedLoadingText">Ê≠£Âú®ËØªÂèñÂéÜÂè≤ËÆ∞ÂΩï...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â≠êËßÜÂõæ 3ÔºöÊó∂Èó¥ÊçïÊçâ -->
                <div id="additionsTrackingPanel" class="additions-subview">
                    <div class="tracking-panel-header">
                        <div class="tracking-panel-title">
                            <span id="trackingPanelDesc">ËøΩË∏™‰π¶Á≠æÈ°µÈù¢ÁöÑÊ¥ªË∑ÉÊµèËßàÊó∂Èó¥</span>
                        </div>
                        <div class="tracking-panel-actions">
                            <button id="clearTrackingBtn" class="tracking-action-btn" title="Ê∏ÖÈô§ËÆ∞ÂΩï">
                                <i class="fas fa-trash-alt"></i>
                                <span id="clearTrackingText">Ê∏ÖÈô§</span>
                            </button>
                            <button id="trackingBlockBtn" class="tracking-action-btn" title="Â±èËîΩÁÆ°ÁêÜ">
                                <i class="fas fa-ban"></i>
                                <span id="trackingBlockText">Â±èËîΩ</span>
                            </button>
                            <button id="trackingToggleBtn" class="tracking-toggle-btn active">
                                <span class="tracking-indicator"></span>
                                <span id="trackingToggleText">ÂºÄÂêØ</span>
                            </button>
                        </div>
                    </div>

                    <!-- Ê≠£Âú®ËøΩË∏™ÁöÑ‰π¶Á≠æ -->
                    <div class="tracking-section">
                        <div class="tracking-section-header">
                            <span class="tracking-section-title">
                                <i class="fas fa-broadcast-tower"></i>
                                <span id="trackingCurrentTitle">Ê≠£Âú®ËøΩË∏™</span>
                                <span class="tracking-count">(<span id="trackingCurrentCount">0</span>)</span>
                            </span>
                        </div>
                        <div class="tracking-table-wrapper">
                            <table class="tracking-table" id="trackingCurrentTable">
                                <thead>
                                    <tr>
                                        <th id="trackingHeaderState"><span class="tracking-header-text">Áä∂ÊÄÅ</span><i
                                                class="fas fa-question-circle tracking-state-help"
                                                id="trackingStateHelpBtn" title="Áä∂ÊÄÅËØ¥Êòé"></i></th>
                                        <th id="trackingHeaderTitle">‰π¶Á≠æ</th>
                                        <th id="trackingHeaderTime">ÁªºÂêàÊó∂Èó¥ÔºàÂΩìÂâçÔºâ</th>
                                        <th id="trackingHeaderWakes">Âî§ÈÜí</th>
                                        <th id="trackingHeaderRatio">Ê¥ªË∑É</th>
                                    </tr>
                                </thead>
                                <tbody id="trackingCurrentList">
                                    <tr class="tracking-empty-row">
                                        <td colspan="5">
                                            <span id="trackingNoActiveText">ÊöÇÊó†Ê≠£Âú®ËøΩË∏™ÁöÑ‰π¶Á≠æ</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ÁªºÂêàÊéíË°å -->
                    <div class="tracking-section">
                        <div class="tracking-section-header">
                            <span class="tracking-section-title">
                                <i class="fas fa-chart-bar"></i>
                                <span id="trackingRankingTitle">ÁªºÂêàÊéíË°å</span>
                            </span>
                            <div class="tracking-ranking-controls">
                                <select id="trackingRankingType" class="tracking-range-select">
                                    <option value="composite" id="trackingRankingTypeComposite">ÁªºÂêàÊó∂Èó¥</option>
                                    <option value="wakes" id="trackingRankingTypeWakes">Âî§ÈÜíÊ¨°Êï∞</option>
                                </select>
                                <select id="trackingRankingRange" class="tracking-range-select">
                                    <option value="today" id="trackingRangeToday">‰ªäÂ§©</option>
                                    <option value="week" selected id="trackingRangeWeek">Êú¨Âë®</option>
                                    <option value="month" id="trackingRangeMonth">Êú¨Êúà</option>
                                    <option value="year" id="trackingRangeYear">ÂΩìÂπ¥</option>
                                    <option value="all" id="trackingRangeAll">ÂÖ®ÈÉ®</option>
                                </select>
                            </div>
                        </div>
                        <div class="tracking-list" id="trackingRankingList">
                            <div class="empty-state-small">
                                <span id="trackingNoDataText">ÊöÇÊó†Ê¥ªË∑ÉÊó∂Èó¥Êï∞ÊçÆ</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- ‰π¶Á≠æÊé®ËçêËßÜÂõæÔºàÁã¨Á´ãËßÜÂõæÔºâ -->
            <div id="recommendView" class="view">
                <div class="view-header">
                    <h2 id="recommendViewTitle">‰π¶Á≠æÊé®Ëçê</h2>
                </div>

                <!-- BÂå∫ÔºöÊé®ËçêÂç°ÁâáÔºà‰∏âÂç°Âπ∂ÊéíÔºâ -->
                <div class="recommend-card-section">
                    <div class="cards-row" id="cardsRow">
                        <div class="recommend-card" data-index="0">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">S = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i
                                            class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i
                                            class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i
                                            class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="recommend-card" data-index="1">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">S = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i
                                            class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i
                                            class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i
                                            class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="recommend-card" data-index="2">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">S = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i
                                            class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i
                                            class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i
                                            class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-navigation">
                        <button id="refreshSettingsBtn" class="card-nav-btn compact" title="Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆ"><i
                                class="fas fa-cog"></i></button>
                        <button id="cardRefreshBtn" class="card-nav-btn primary"><i class="fas fa-sync-alt"></i> <span
                                id="cardRefreshText">Âà∑Êñ∞Êé®Ëçê</span></button>
                    </div>
                </div>

                <!-- ÂèØÊãñÊãΩÊäòÂè†Âå∫ÂüüÂÆπÂô® -->
                <div class="recommend-sections-container" id="recommendSectionsContainer">
                    <!-- ÂæÖÂ§ç‰π†ÈòüÂàóÔºàÊï∞Èáè‰∏∫0Êó∂ÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-postponed-section collapsible draggable-section" data-section-id="postponed">
                        <div class="section-header">
                            <span class="section-title"><i class="fas fa-clock"></i> <span
                                    id="postponedTitle">ÂæÖÂ§ç‰π†</span> (<span id="postponedCount">0</span>) <span
                                    id="postponedPriorityBadge" class="priority-mode-badge"
                                    style="display:none;">‚ö°‰ºòÂÖà</span></span>
                            <div class="section-header-actions">
                                <button class="section-action-btn" id="postponedAddBtn" title="Ê∑ªÂä†‰π¶Á≠æÂà∞ÂæÖÂ§ç‰π†"><i
                                        class="fas fa-plus"></i></button>
                                <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                            </div>
                        </div>
                        <div class="section-content">
                            <div class="postponed-list" id="postponedList">
                                <div class="empty-state-inline" id="postponedEmpty">
                                    <span id="postponedEmptyText">ÊöÇÊó†ÂæÖÂ§ç‰π†ÁöÑ‰π¶Á≠æ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Â±èËîΩÁÆ°ÁêÜÔºàÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-block-section collapsible collapsed draggable-section"
                        data-section-id="block">
                        <div class="section-header">
                            <span class="section-title"><i class="fas fa-ban"></i> <span
                                    id="blockManageTitle">Â±èËîΩÁÆ°ÁêÜ</span></span>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content">
                            <!-- Â∑≤Â±èËîΩ‰π¶Á≠æ -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-bookmark"></i> <span id="blockedBookmarksTitle">Â∑≤Â±èËîΩ‰π¶Á≠æ</span>
                                        (<span id="blockedBookmarksCount">0</span>)</span>
                                </div>
                                <div class="block-list" id="blockedBookmarksList">
                                    <div class="empty-state-inline" id="blockedBookmarksEmpty">
                                        <span id="blockedBookmarksEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩ‰π¶Á≠æ</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Â∑≤Â±èËîΩÊñá‰ª∂Â§π -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-folder"></i> <span id="blockedFoldersTitle">Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span>
                                        (<span id="blockedFoldersCount">0</span>)</span>
                                    <button class="block-add-btn" id="addBlockFolderBtn"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <div class="block-list" id="blockedFoldersList">
                                    <div class="empty-state-inline" id="blockedFoldersEmpty">
                                        <span id="blockedFoldersEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Â∑≤Â±èËîΩÂüüÂêç -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-globe"></i> <span id="blockedDomainsTitle">Â∑≤Â±èËîΩÂüüÂêç</span>
                                        (<span id="blockedDomainsCount">0</span>)</span>
                                    <button class="block-add-btn" id="addBlockDomainBtn"><i
                                            class="fas fa-plus"></i></button>
                                </div>
                                <div class="block-list" id="blockedDomainsList">
                                    <div class="empty-state-inline" id="blockedDomainsEmpty">
                                        <span id="blockedDomainsEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÂüüÂêç</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊùÉÈáçÂÖ¨ÂºèÔºàÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-formula-section collapsible collapsed draggable-section"
                        data-section-id="formula">
                        <div class="section-header" id="formulaHeader">
                            <i class="fas fa-superscript formula-icon"></i>
                            <div class="formula-main">
                                <span class="formula-label">S</span>
                                <span class="formula-equals">=</span>
                                <span class="formula-bracket">(</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightFreshness" value="0.15"
                                        readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">F</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightColdness" value="0.20" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">C</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term" id="termTimeDegree">
                                    <input type="text" class="formula-weight" id="weightTimeDegree" value="0.30"
                                        readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">T</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightForgetting" value="0.20"
                                        readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">D</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term" id="termLaterReview">
                                    <input type="text" class="formula-weight" id="weightLaterReview" value="0.20"
                                        readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">L</span>
                                </span>
                                <span class="formula-bracket">)</span>
                                <span class="formula-multiply">√ó</span>
                                <span class="formula-factor formula-factor-r">R</span>
                            </div>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content" id="formulaContent">
                            <div class="formula-display">
                                <div class="formula-legend">
                                    <span class="legend-item legend-score"><span class="legend-factor">S</span><span
                                            id="legendScore">Êé®ËçêÂàÜÊï∞</span></span>
                                    <span class="legend-item"><span class="legend-factor">F</span><span
                                            id="legendFreshness">Êñ∞È≤úÂ∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">C</span><span
                                            id="legendColdness">ÂÜ∑Èó®Â∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">T</span><span
                                            id="legendTimeDegree">Êó∂Èó¥Â∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">D</span><span
                                            id="legendForgetting">ÈÅóÂøòÂ∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">L</span><span
                                            id="legendLaterReview">ÂæÖÂ§ç‰π†</span></span>
                                    <span class="legend-item legend-recall"><span class="legend-factor">R</span><span
                                            id="legendRecall">ËÆ∞ÂøÜÂ∫¶</span></span>
                                </div>
                                <div class="formula-thresholds-wrapper">
                                    <div class="formula-thresholds">
                                        <span class="threshold-item">F = 1/(1+(Ê∑ªÂä†Â§©Êï∞/<input type="text"
                                                class="threshold-value" id="thresholdFreshness" value="30">)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">C = 1/(1+(ÁÇπÂáªÊï∞/<input type="text"
                                                class="threshold-value" id="thresholdColdness" value="10">)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">T = 1/(1+(ÁªºÂêàÊó∂Èó¥/<input type="text"
                                                class="threshold-value" id="thresholdTimeDegree"
                                                value="5">ÂàÜÈíü)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">D = 1-1/(1+(Êú™ËÆøÈóÆ/<input type="text"
                                                class="threshold-value" id="thresholdForgetting"
                                                value="14">Â§©)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item" id="thresholdLaterReviewItem">L = <span
                                                id="laterReviewStatus">0</span><span
                                                id="laterReviewDesc">ÔºàÊâãÂä®Ê∑ªÂä†Âêé=1Ôºâ</span></span>
                                        <span class="threshold-item" id="thresholdRecallItem">R =
                                            1-0.9<sup>t/S</sup><span id="recallDesc">ÔºàFSRSÈÅóÂøòÊõ≤Á∫øÔºöÂ§ç‰π†ÂêéÈîêÂáèÔºåÈÄêÊ∏êÊÅ¢Â§çÔºâ</span></span>
                                    </div>
                                    <button class="formula-help-btn" id="formulaHelpBtn" title="ÂÖ¨ÂºèËØ¥Êòé">
                                        <i class="fas fa-question-circle"></i>
                                    </button>
                                </div>
                                <div class="formula-footer">
                                    <div class="preset-modes">
                                        <button class="preset-btn active" data-mode="default" title="ÂùáË°°Êé®Ëçê">
                                            <i class="fas fa-balance-scale"></i> <span>ÈªòËÆ§Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="archaeology" title="ÊåñÊéòÂ∞òÂ∞ÅÂ∑≤‰πÖÁöÑ‰π¶Á≠æ">
                                            <i class="fas fa-hourglass-end"></i> <span>ËÄÉÂè§Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="consolidate" title="Ê∏©‰π†ËøëÊúüÈáçË¶ÅÂÜÖÂÆπ">
                                            <i class="fas fa-fire-alt"></i> <span>Â∑©Âõ∫Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="wander" title="ÈöèÊú∫Êé¢Á¥¢ÂèëÁé∞">
                                            <i class="fas fa-dice"></i> <span>Êº´Ê∏∏Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn priority-mode" data-mode="priority"
                                            id="priorityModeBtn" style="display:none;" title="‰ºòÂÖàÂ§ç‰π†ÊâãÂä®Ê∑ªÂä†ÁöÑ‰π¶Á≠æ">
                                            <i class="fas fa-bolt"></i> <span id="priorityModeText">‰ºòÂÖàÂ∑©Âõ∫</span>
                                        </button>
                                    </div>
                                    <div class="formula-actions">
                                        <button id="resetFormulaBtn" class="formula-btn"><i class="fas fa-undo"></i>
                                            <span id="resetFormulaText">ÊÅ¢Â§çÈªòËÆ§</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁÉ≠ÂäõÂõæ -->
                    <div class="recommend-heatmap-section collapsible draggable-section" data-section-id="heatmap">
                        <div class="section-header" id="heatmapHeader">
                            <span class="section-title"><i class="fas fa-fire"></i> <span
                                    id="heatmapTitle">Â§ç‰π†ÁÉ≠ÂäõÂõæ</span></span>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content" id="heatmapContent">
                            <div class="heatmap-container" id="heatmapContainer">
                                <div class="empty-state">
                                    <div class="empty-state-icon"><i class="fas fa-fire"></i></div>
                                    <div id="heatmapLoadingText" class="empty-state-title">ÁÉ≠ÂäõÂõæÊï∞ÊçÆÂä†ËΩΩ‰∏≠...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Bookmark Canvas ËßÜÂõæ (ÂéüBookmark TreeÊîπÈÄ†) -->
            <div id="canvasView" class="view canvas-fullpage-view">
                <!-- Canvas‰∏ªÂÆπÂô® -->
                <!-- ÂàùÂßãÁº©ÊîæÁî± bookmark_canvas_module.js ‰∏≠ CANVAS_BASE_ZOOM_DEFAULT Áªü‰∏ÄÊéßÂà∂ -->
                <div class="canvas-main-container" style="--canvas-scale: 1; --canvas-pan-x: 0px; --canvas-pan-y: 0px;">
                    <!-- Ëá™ÂÆö‰πâÁ∫µÂêëÊªöÂä®Êù° -->
                    <div class="canvas-scrollbar vertical" id="canvasVerticalScrollbar">
                        <div class="scrollbar-controls">
                            <button class="scrollbar-btn scroll-hide" data-axis="vertical" data-action="toggle-hide"
                                aria-label="ÈöêËóèÁ∫µÂêëÊªöÂä®Êù°">
                                <i class="fas fa-eye-slash"></i>
                            </button>
                            <button class="scrollbar-btn scroll-disable" data-axis="vertical"
                                data-action="toggle-disable" aria-label="Á¶ÅÁî®Á∫µÂêëÊªöÂä®">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                        <div class="scrollbar-track">
                            <div class="scrollbar-thumb" data-axis="vertical"></div>
                        </div>
                    </div>

                    <!-- Ëá™ÂÆö‰πâÊ®™ÂêëÊªöÂä®Êù° -->
                    <div class="canvas-scrollbar horizontal" id="canvasHorizontalScrollbar"
                        style="display: flex; align-items: center; gap: 12px;">
                        <div class="scrollbar-controls">
                            <button class="scrollbar-btn scroll-hide" data-axis="horizontal" data-action="toggle-hide"
                                aria-label="ÈöêËóèÊ®™ÂêëÊªöÂä®Êù°">
                                <i class="fas fa-eye-slash"></i>
                            </button>
                            <button class="scrollbar-btn scroll-disable" data-axis="horizontal"
                                data-action="toggle-disable" aria-label="Á¶ÅÁî®Ê®™ÂêëÊªöÂä®">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                        <span class="scrollbar-hint" data-i18n-text="horizontalScrollHint" data-en="Shift + Wheel"
                            data-zh="Shift + ÊªöËΩÆ">Shift + ÊªöËΩÆ</span>
                        <div class="scrollbar-track">
                            <div class="scrollbar-thumb" data-axis="horizontal"></div>
                        </div>
                    </div>

                    <!-- CanvasÁîªÂ∏ÉÂ∑•‰ΩúÂå∫ -->
                    <div class="canvas-workspace" id="canvasWorkspace">
                        <!-- Áº©ÊîæÊéßÂà∂Âô®ÔºàÂõ∫ÂÆöÂú®ÁîªÂ∏ÉÂ∑¶‰∏äËßíÔºâ -->
                        <div class="canvas-zoom-indicator" id="canvasZoomIndicator" style="display: none;">
                            <div class="canvas-zoom-header">
                                <button class="canvas-fullscreen-btn" id="canvasFullscreenBtn" aria-label="ËøõÂÖ•ÂÖ®Â±è"
                                    aria-pressed="false">ÂÖ®Â±è</button>
                                <button class="canvas-help-btn" id="canvasHelpBtn" title="ËØ¥Êòé"><i
                                        class="fas fa-question-circle"></i></button>
                                <span class="canvas-zoom-label" id="canvasZoomLabel">Áº©Êîæ</span>
                                <span class="zoom-value" id="zoomValue">100%</span>
                            </div>
                            <div class="canvas-zoom-controls">
                                <button class="zoom-btn" id="canvasManageBtn" title="ÁÆ°ÁêÜ"><span
                                        id="canvasManageText">ÁÆ°ÁêÜ</span></button>
                                <button class="zoom-btn" id="zoomLocateBtn" title="ÂÆö‰ΩçÂà∞Ê∞∏‰πÖÊ†èÁõÆ"><span
                                        id="zoomLocateText">ÂÆö‰Ωç</span></button>
                                <button class="zoom-btn" id="zoomOutBtn" title="Áº©Â∞è (10%)">‚àí</button>
                                <button class="zoom-btn" id="zoomInBtn" title="ÊîæÂ§ß (10%)">+</button>
                            </div>
                        </div>

                        <!-- CanvasÂø´Êç∑ÈîÆËØ¥ÊòéÂºπÁ™ó -->
                        <div class="canvas-help-modal" id="canvasHelpModal" style="display: none;">
                            <div class="canvas-help-modal-header">
                                <h4 id="canvasHelpModalTitle">ËØ¥Êòé</h4>
                                <button class="canvas-help-modal-close" id="canvasHelpModalClose"><i
                                        class="fas fa-times"></i></button>
                            </div>
                            <div class="canvas-help-modal-body">
                                <div class="canvas-help-section">
                                    <div class="canvas-help-section-header">
                                        <span class="canvas-help-section-title" id="canvasHelpCtrlTitle">Ctrl ÈîÆÊìç‰Ωú</span>
                                        <button class="canvas-shortcut-edit-btn" id="editCtrlKeyBtn" title="ÁÇπÂáª‰øÆÊîπÂø´Êç∑ÈîÆ"><i
                                                class="fas fa-edit"></i></button>
                                    </div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key"><kbd class="canvas-shortcut-key"
                                                id="ctrlKeyDisplay">Ctrl</kbd> + <span
                                                id="canvasHelpCtrlLeftClick">Â∑¶ÈîÆÔºàÊåâ‰ΩèÔºâ</span></span>
                                        <span class="canvas-help-desc" id="canvasHelpCtrlLeftDesc">ÊãñÂä®ÁîªÂ∏É Êàñ Ê†èÁõÆÂç°Áâá</span>
                                    </div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key"><kbd class="canvas-shortcut-key"
                                                id="ctrlKeyDisplay2">Ctrl</kbd> + <span
                                                id="canvasHelpCtrlWheel">ÊªöËΩÆ</span></span>
                                        <span class="canvas-help-desc" id="canvasHelpCtrlWheelDesc">Áº©Êîæ</span>
                                    </div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key"><kbd class="canvas-shortcut-key"
                                                id="ctrlKeyDisplay3">Ctrl</kbd> + <span
                                                id="canvasHelpCtrlRightClick">Âè≥ÈîÆÔºàÂçïÂáªÔºâ</span></span>
                                        <span class="canvas-help-desc" id="canvasHelpCtrlRightDesc">Êõ¥ÊîπÊ†èÁõÆÂç°ÁâáÁöÑÂ§ßÂ∞è</span>
                                    </div>
                                </div>
                                <div class="canvas-help-section">
                                    <div class="canvas-help-section-header">
                                        <span class="canvas-help-section-title" id="canvasHelpSpaceTitle">Á©∫Ê†ºÈîÆÊìç‰Ωú</span>
                                        <button class="canvas-shortcut-edit-btn" id="editSpaceKeyBtn" title="ÁÇπÂáª‰øÆÊîπÂø´Êç∑ÈîÆ"><i
                                                class="fas fa-edit"></i></button>
                                    </div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key"><kbd class="canvas-shortcut-key"
                                                id="spaceKeyDisplay">Á©∫Ê†º</kbd> + <span
                                                id="canvasHelpSpaceLeftClick">Â∑¶ÈîÆÔºàÊåâ‰ΩèÔºâ</span></span>
                                        <span class="canvas-help-desc" id="canvasHelpSpaceDesc">ÊãñÂä®ÁîªÂ∏É</span>
                                    </div>
                                </div>
                                <div class="canvas-help-section">
                                    <div class="canvas-help-section-title" id="canvasHelpTouchpadTitle">Ëß¶ÊéßÊùøÊìç‰Ωú</div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key" id="canvasHelpTouchpadPinch">ÂèåÊåáÊçèÂêà</span>
                                        <span class="canvas-help-desc" id="canvasHelpTouchpadPinchDesc">Áº©ÊîæÁîªÂ∏É</span>
                                    </div>
                                    <div class="canvas-help-row">
                                        <span class="canvas-help-key" id="canvasHelpTouchpadScroll">ÂèåÊåáÊªëÂä®</span>
                                        <span class="canvas-help-desc" id="canvasHelpTouchpadScrollDesc">ÊãñÂä®ÁîªÂ∏É</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Âø´Êç∑ÈîÆÂΩïÂà∂ÊèêÁ§∫ -->
                            <div class="canvas-shortcut-recorder" id="canvasShortcutRecorder" style="display: none;">
                                <div class="recorder-content">
                                    <span class="recorder-text" id="recorderText">ËØ∑Êåâ‰∏ãÊñ∞ÁöÑÂø´Êç∑ÈîÆ...</span>
                                    <div class="recorder-buttons">
                                        <button class="recorder-help-btn" id="recorderHelpBtn" title="ÂèØÁî®ÊåâÈîÆ"><i
                                                class="fas fa-question-circle"></i></button>
                                        <button class="recorder-cancel-btn" id="recorderCancelBtn">ÂèñÊ∂à</button>
                                    </div>
                                </div>
                                <!-- ÂèØÁî®ÊåâÈîÆËØ¥Êòé -->
                                <div class="recorder-help-tooltip" id="recorderHelpTooltip" style="display: none;">
                                    <div class="tooltip-title" id="recorderHelpTitle">ÂèØÁî®ÊåâÈîÆ</div>
                                    <div class="tooltip-content">
                                        <div class="tooltip-row"><span class="tooltip-label"
                                                id="tooltipModifierLabel">‰øÆÈ•∞ÈîÆ:</span> Ctrl, Alt, Shift, Cmd/Win</div>
                                        <div class="tooltip-row"><span class="tooltip-label"
                                                id="tooltipSpecialLabel">ÁâπÊÆäÈîÆ:</span> Space, Tab</div>
                                        <div class="tooltip-row"><span class="tooltip-label"
                                                id="tooltipLetterLabel">Â≠óÊØçÈîÆ:</span> A-Z</div>
                                        <div class="tooltip-row"><span class="tooltip-label"
                                                id="tooltipNumberLabel">Êï∞Â≠óÈîÆ:</span> 0-9</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CanvasÁÆ°ÁêÜÂºπÁ™ó -->
                        <div class="canvas-manage-modal" id="canvasManageModal" style="display: none;">
                            <div class="canvas-manage-modal-header">
                                <h4 id="canvasManageModalTitle">ÁîªÂ∏ÉÁÆ°ÁêÜ</h4>
                                <button class="canvas-manage-modal-close" id="canvasManageModalClose"><i
                                        class="fas fa-times"></i></button>
                            </div>
                            <div class="canvas-manage-modal-body">
                                <button id="importCanvasBtn" class="canvas-manage-btn">
                                    <i class="fas fa-file-import"></i>
                                    <span id="importCanvasText">ÂØºÂÖ•</span>
                                </button>
                                <button id="exportCanvasBtn" class="canvas-manage-btn">
                                    <i class="fas fa-file-export"></i>
                                    <span id="exportCanvasText">ÂØºÂá∫</span>
                                </button>
                                <!-- Ê∏ÖÈô§ÊåâÈíÆÁªÑÔºà‰∏ªÊåâÈíÆ + ‰∏ãÊãâËèúÂçïÔºâ -->
                                <div class="canvas-clear-dropdown" id="canvasClearDropdown">
                                    <button id="clearMenuBtn" class="canvas-manage-btn danger">
                                        <i class="fas fa-trash-alt"></i>
                                        <span id="clearMenuText">Ê∏ÖÈô§</span>
                                        <i class="fas fa-chevron-down clear-dropdown-arrow"></i>
                                    </button>
                                    <!-- Ê∏ÖÈô§‰∏ãÊãâËèúÂçï -->
                                    <div class="clear-dropdown-menu" id="clearDropdownMenu" style="display: none;">
                                        <!-- ÈÄâÈ°π1ÔºöÁÇπÂáªÊ∏ÖÈô§ -->
                                        <button class="clear-dropdown-item" id="clearByClickBtn">
                                            <i class="fas fa-mouse-pointer"></i>
                                            <span id="clearByClickText">ÁÇπÂáªÊ∏ÖÈô§</span>
                                        </button>
                                        <!-- ÈÄâÈ°π2ÔºöÊ∏ÖÁ©∫Êú™Ê†áÊ≥®ËäÇÁÇπÔºàÂéüÊúâÂäüËÉΩÔºâ -->
                                        <div class="clear-dropdown-item-group">
                                            <button class="clear-dropdown-item" id="clearTempNodesBtn">
                                                <i class="fas fa-eraser"></i>
                                                <span id="clearTempNodesText">Ê∏ÖÁ©∫Êú™Ê†áÊ≥®ËäÇÁÇπ</span>
                                            </button>
                                            <button class="clear-dropdown-help-btn" id="clearTempNodesHelpBtn"
                                                title="Êü•ÁúãÊ∏ÖÈô§ËßÑÂàô">
                                                <i class="fas fa-question-circle"></i>
                                            </button>
                                            <!-- Ê∏ÖÈô§ËßÑÂàôÊèêÁ§∫Ê°Ü -->
                                            <div class="clear-rules-tooltip" id="clearRulesTooltip"
                                                style="display: none;">
                                                <div class="clear-rules-header">
                                                    <i class="fas fa-info-circle"></i>
                                                    <span id="clearRulesTooltipTitle">Ê∏ÖÈô§ËßÑÂàô</span>
                                                </div>
                                                <div class="clear-rules-content">
                                                    <div class="clear-rules-section">
                                                        <div class="clear-rules-section-title" id="clearRulesWillClear">
                                                            ‰ºöË¢´Ê∏ÖÈô§Ôºö
                                                        </div>
                                                        <ul>
                                                            <li id="clearRuleTemp"><strong>‰π¶Á≠æÂûã‰∏¥Êó∂Ê†èÁõÆ</strong>ÔºöÊó†ËØ¥Êòé + ÈªòËÆ§Ê†áÈ¢ò +
                                                                Êó†ËøûÊé•Á∫ø
                                                            </li>
                                                            <li id="clearRuleMd"><strong>Á©∫ÁôΩÊ†èÁõÆ</strong>ÔºöÂÜÖÂÆπ‰∏∫Á©∫ + Êó†ËøûÊé•Á∫ø</li>
                                                        </ul>
                                                    </div>
                                                    <div class="clear-rules-section">
                                                        <div class="clear-rules-section-title" id="clearRulesWillKeep">
                                                            ‰ºöË¢´‰øùÁïôÔºö
                                                        </div>
                                                        <ul>
                                                            <li id="clearRuleKeepDesc"><i class="fas fa-check"></i>
                                                                ÊúâËØ¥ÊòéÊñáÂ≠ó</li>
                                                            <li id="clearRuleKeepTitle"><i class="fas fa-check"></i>
                                                                Ê†áÈ¢òË¢´‰øÆÊîπËøá</li>
                                                            <li id="clearRuleKeepEdge"><i class="fas fa-check"></i> ÊúâËøûÊé•Á∫ø
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- ÈÄâÈ°π3ÔºöÊ∏ÖÈô§ÂÖ®ÈÉ®ÔºàÊ∞∏‰πÖÊ†èÁõÆÈô§Â§ñÔºâ -->
                                        <button class="clear-dropdown-item clear-all-danger" id="clearAllBtn">
                                            <i class="fas fa-trash"></i>
                                            <span id="clearAllText">Ê∏ÖÈô§ÂÖ®ÈÉ®ÔºàÊ∞∏‰πÖÊ†èÁõÆÈô§Â§ñÔºâ</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CanvasÂÜÖÂÆπÂÆπÂô®ÔºàÂ∫îÁî®Áº©ÊîæÂíåÂπ≥ÁßªÔºâ -->
                        <div class="canvas-content" id="canvasContent">
                            <!-- ‰∏¥Êó∂ËäÇÁÇπÂíåÊ∞∏‰πÖÊ†èÁõÆÈÉΩÂú®ËøôÈáå -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ê∞∏‰πÖÊ†èÁõÆ - Âú®canvas-contentÂÜÖÈÉ®ÈÄöËøáJSÊ∑ªÂä† -->
            <template id="permanentSectionTemplate">
                <div class="permanent-bookmark-section" id="permanentSection">
                    <div class="permanent-section-header" id="permanentSectionHeader">
                        <div class="permanent-section-title">
                            <h3 id="permanentSectionTitle">‰π¶Á≠æÊ†ë (Ê∞∏‰πÖÊ†èÁõÆ)</h3>
                            <div class="permanent-section-actions">
                                <button class="permanent-section-action-btn permanent-section-pin-btn pinned"
                                    id="permanentSectionPinBtn" title="ÁΩÆÈ°∂Ê†èÁõÆ">
                                    <i class="fas fa-thumbtack"></i>
                                </button>
                            </div>
                        </div>
                        <div class="permanent-section-tip-container" id="permanentSectionTipContainer">
                            <div class="permanent-section-tip-content">
                                <div class="permanent-section-tip" id="permanentSectionTip"></div>
                                <div class="permanent-section-tip-controls">
                                    <button class="permanent-section-tip-edit-btn" id="permanentSectionTipEditBtn"
                                        title="ÁºñËæëËØ¥Êòé">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="permanent-section-tip-close" id="permanentSectionTipClose"
                                        title="ÂÖ≥Èó≠ÊèêÁ§∫">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <textarea class="permanent-section-tip-editor" id="permanentSectionTipEditor"
                                style="display: none;" placeholder=""></textarea>
                        </div>
                    </div>
                    <div class="permanent-section-body">
                        <div id="bookmarkTree" class="bookmark-tree">
                            <!-- Âä®ÊÄÅÂä†ËΩΩ‰π¶Á≠æÊ†ë -->
                        </div>
                    </div>
                </div>
            </template>
        </main>
    </div>

    <!-- ÂØºÂá∫ÂèòÂåñÊ®°ÊÄÅÊ°Ü -->
    <div id="exportChangesModal" class="modal">
        <div class="modal-content" style="max-width: 420px;">
            <div class="modal-header compact">
                <h3 id="exportChangesModalTitle">ÂØºÂá∫‰π¶Á≠æÂèòÂåñ</h3>
                <button class="modal-close" id="exportChangesModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="padding: 16px 20px;">
                <!-- Ê†ºÂºèÈÄâÊã© -->
                <div class="export-section" style="margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <h4 style="font-size: 14px; color: var(--text-secondary); margin: 0; margin-right: 6px;"
                            id="exportChangesFormatLabel">ÂØºÂá∫Ê†ºÂºè</h4>
                        <i class="fas fa-question-circle" id="exportChangesLegendHelp" title="Ê†áËÆ∞ËØ¥Êòé"
                            style="color: var(--text-tertiary); cursor: pointer; font-size: 13px;"></i>
                    </div>
                    <div class="radio-group" style="display: flex; gap: 20px;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesFormat" value="html" checked>
                            <span>HTML</span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesFormat" value="json">
                            <span>JSON</span>
                        </label>
                    </div>
                    <!-- Ê†áËÆ∞ËØ¥ÊòéÂÜÖÂÆπ -->
                    <div id="exportChangesLegendHelpContent"
                        style="display: none; margin-top: 10px; padding: 10px; background: var(--bg-tertiary); border-radius: 4px; font-size: 12px; color: var(--text-secondary); line-height: 1.6; border: 1px solid var(--border-color);">
                        <div style="display: flex; gap: 12px; flex-wrap: wrap; align-items: center;">
                            <span style="font-weight: bold; color: var(--text-primary);">Ê†áËÆ∞ËØ¥ÊòéÔºö</span>
                            <span><span style="color: var(--success-color); font-weight: bold;">[+]</span> <span
                                    id="legendAdded">Êñ∞Â¢û</span></span>
                            <span><span style="color: var(--danger-color); font-weight: bold;">[-]</span> <span
                                    id="legendDeleted">Âà†Èô§</span></span>
                            <span><span style="color: var(--warning-color); font-weight: bold;">[~]</span> <span
                                    id="legendModified">‰øÆÊîπ</span></span>
                            <span><span style="color: var(--info-color); font-weight: bold;">[‚Üî]</span> <span
                                    id="legendMoved">ÁßªÂä®</span></span>
                        </div>
                    </div>
                </div>

                <!-- Ê®°ÂºèÈÄâÊã© -->
                <div class="export-section" style="margin-bottom: 16px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);"
                        id="exportChangesModeLabel">ÂØºÂá∫Ê®°Âºè</h4>
                    <div class="radio-group" style="display: flex; gap: 20px;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesMode" value="simple" checked>
                            <span id="exportChangesModeSimple">ÁÆÄÂçï</span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesMode" value="detailed">
                            <span id="exportChangesModeDetailed">ËØ¶ÁªÜ</span>
                            <i class="fas fa-question-circle" id="exportChangesDetailedHelp" title="ÂäüËÉΩËØ¥Êòé"
                                style="color: var(--text-tertiary); cursor: pointer; margin-left: 4px;"></i>
                        </label>
                    </div>
                    <!-- ËØ¶ÁªÜÊ®°ÂºèËØ¥ÊòéÂÜÖÂÆπ -->
                    <div id="exportChangesDetailedHelpContent"
                        style="display: none; margin-top: 10px; padding: 10px; background: var(--bg-tertiary); border-radius: 4px; font-size: 13px; color: var(--text-secondary); line-height: 1.6; border: 1px solid var(--border-color);">
                    </div>
                </div>

                <!-- Êâ©Â±ïÂ±ÇÁ∫ßÔºà‰ªÖËØ¶ÁªÜÊ®°ÂºèÊòæÁ§∫Ôºâ -->
                <div class="export-section" id="exportChangesDepthSection" style="margin-bottom: 16px; display: none;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);"
                        id="exportChangesDepthLabel">Êâ©Â±ïÂ±ÇÁ∫ß</h4>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <input type="range" id="exportChangesDepth" min="0" max="3" value="1" style="flex: 1;">
                        <span id="exportChangesDepthValue"
                            style="min-width: 40px; text-align: center; font-weight: 500;">1 Â±Ç</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; font-size: 11px; color: var(--text-tertiary); margin-top: 4px;">
                        <span id="exportChangesDepth0">‰ªÖÂêåÁ∫ß</span>
                        <span id="exportChangesDepth1">1Â±Ç</span>
                        <span id="exportChangesDepth2">2Â±Ç</span>
                        <span id="exportChangesDepth3">3Â±Ç</span>
                    </div>
                </div>

                <!-- Êìç‰ΩúÈÄâÊã© -->
                <div class="export-section" style="margin-bottom: 16px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);"
                        id="exportChangesActionLabel">Êìç‰ΩúÊñπÂºè</h4>
                    <div class="radio-group" style="display: flex; gap: 20px;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesAction" value="download" checked>
                            <span id="exportChangesActionDownload">ÂØºÂá∫Êñá‰ª∂</span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportChangesAction" value="copy">
                            <span id="exportChangesActionCopy">Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</span>
                        </label>
                    </div>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="export-actions"
                    style="text-align: right; border-top: 1px solid var(--border-color); padding-top: 16px;">
                    <button id="doExportChangesBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-file-export"></i> <span id="doExportChangesBtnText">Á°ÆËÆ§</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Êí§ÈîÄË¶ÜÁõñÂ±Ç -->
    <div id="revertOverlay" class="revert-overlay" style="display: none;">
        <div class="revert-overlay-content">
            <div class="revert-spinner"></div>
            <div class="revert-text" id="revertOverlayText">Ê≠£Âú®Â§ÑÁêÜ‰∏≠...</div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÈÖçÁΩÆÂºπÁ™ó (‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩï) -->
    <div id="exportModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="exportModalTitle">ÂØºÂá∫‰π¶Á≠æËÆ∞ÂΩï</h3>
                <button class="modal-close" id="closeExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫ËåÉÂõ¥</h4>
                    <p id="exportScopeText" style="font-weight: 500; font-size: 15px;">ÂΩìÂâçËßÜÂõæ</p>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê®°Âºè</h4>
                    <div class="radio-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="records" checked>
                            <span>‰ªÖÂØºÂá∫Ê∑ªÂä†ËÆ∞ÂΩï <small style="color: var(--text-tertiary);">(‰ªÖÁé∞ÊúâËÆ∞ÂΩï)</small></span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="context">
                            <span>Áé∞ËÆ∞ÂΩïÂÖ≥ËÅîÂØºÂá∫ <small style="color: var(--text-tertiary);">(ÂåÖÂê´ÂêåÊñá‰ª∂Â§π‰∏ãÁöÑÂÖ∂‰ªñ‰π¶Á≠æ)</small></span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="collection">
                            <span>ÈõÜÂêàÂØºÂá∫Âà∞Êó•ÊúüÊñá‰ª∂Â§π <small style="color: var(--text-tertiary);">(ÊåâÊó•ÊúüÂΩíÊ°£Ôºå‰∏ç‰øùÁïôÂéüÁõÆÂΩïÂêç)</small></span>
                        </label>
                    </div>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê†ºÂºè</h4>
                    <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="html" checked>
                            <span>HTML (ÊµèËßàÂô®ÂèØÂØºÂÖ•)</span>
                        </label>
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="json">
                            <span>JSON</span>
                        </label>
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="copy">
                            <span>Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</span>
                        </label>
                    </div>
                </div>

                <div class="export-actions"
                    style="text-align: right; border-top: 1px solid var(--border-color); padding-top: 20px;">
                    <button id="doExportBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-file-export"></i> ÂºÄÂßãÂØºÂá∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÈÖçÁΩÆÂºπÁ™ó (ÁÇπÂáªËÆ∞ÂΩï) -->
    <div id="browsingExportModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="browsingExportModalTitle">ÂØºÂá∫ÁÇπÂáªËÆ∞ÂΩï</h3>
                <button class="modal-close" id="closeBrowsingExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫ËåÉÂõ¥</h4>
                    <p id="browsingExportScopeText" style="font-weight: 500; font-size: 15px;">ÂΩìÂâçËßÜÂõæ</p>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê®°Âºè</h4>
                    <div class="radio-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="browsingExportMode" value="records" checked>
                            <span>‰ªÖÂØºÂá∫ÁÇπÂáªËÆ∞ÂΩï <small style="color: var(--text-tertiary);">(‰ªÖÁé∞ÊúâËÆ∞ÂΩï)</small></span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="browsingExportMode" value="collection">
                            <span>ÈõÜÂêàÂØºÂá∫Âà∞Êó•ÊúüÊñá‰ª∂Â§π <small style="color: var(--text-tertiary);">(ÊåâÊó•ÊúüÂΩíÊ°£Ôºå‰∏ç‰øùÁïôÂéüÁõÆÂΩïÂêç)</small></span>
                        </label>
                    </div>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê†ºÂºè</h4>
                    <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="html" checked>
                            <span>HTML (ÊµèËßàÂô®ÂèØÂØºÂÖ•)</span>
                        </label>
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="json">
                            <span>JSON</span>
                        </label>
                        <label class="checkbox-label"
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="copy">
                            <span>Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</span>
                        </label>
                    </div>
                </div>

                <div class="export-actions"
                    style="text-align: right; border-top: 1px solid var(--border-color); padding-top: 20px;">
                    <button id="doBrowsingExportBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-file-export"></i> ÂºÄÂßãÂØºÂá∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ËØ¶ÊÉÖÂºπÁ™ó -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h3 id="modalTitle">ÂèòÂåñËØ¶ÊÉÖ</h3>
                </div>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Âä®ÊÄÅÂä†ËΩΩËØ¶ÊÉÖÂÜÖÂÆπ -->
            </div>
        </div>
    </div>

    <!-- ‰π¶Á≠æÊÅ¢Â§çÁ°ÆËÆ§ÂºπÁ™ó -->
    <div id="restoreModal" class="modal content-center">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header compact">

                <h3 id="restoreModalTitle">ÊÅ¢Â§ç‰π¶Á≠æ</h3>
                <button class="modal-close" id="restoreModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body"
                style="padding: 0; overflow: hidden; position: relative; transition: height 0.3s ease;"
                id="restoreModalBody">

                <!-- ÂÆπÂô®ÔºöÂåÖÂê´‰∏§‰∏™Â≠êËßÜÂõæ (Main + Preview, ÈÄöËøá display ÂàáÊç¢) -->
                <div id="restoreViewsWrapper" style="display: block; width: 100%; height: 100%;">

                    <!-- 1. ‰∏ªËßÜÂõæ -->
                    <div id="restoreMainView" style="width: 100%; padding: 16px 24px; box-sizing: border-box;">
                        <!-- ÁâàÊú¨‰ø°ÊÅØÂç°Áâá -->
                        <!-- ÁâàÊú¨‰ø°ÊÅØÂç°Áâá -->
                        <div id="restoreVersionInfo" style="margin-bottom: 16px; text-align: center;">
                            <div style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px;"
                                id="restoreVersionNote"></div>
                            <div style="font-size: 13px; color: var(--text-secondary);" id="restoreVersionTime"></div>

                            <!-- ÈöêËóèÂ≠óÊÆµÔºåÈò≤Ê≠¢JSÊä•Èîô -->
                            <span id="restoreVersionSeq" style="display:none"></span>
                            <span id="restoreVersionStats" style="display:none"></span>
                            <span id="restoreVersionFingerprint" style="display:none"></span>
                            <span id="restoreVersionLabel" style="display:none"></span>
                        </div>



                        <!-- ‰π¶Á≠æÂØπÊØîÁªüËÆ°Âå∫Âüü -->
                        <div id="restoreComparison" style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; gap: 12px; font-size: 13px;">
                                <!-- ÂΩìÂâçÊµèËßàÂô®Áä∂ÊÄÅ -->
                                <div
                                    style="flex: 1; padding: 12px 10px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border-color);">
                                    <div style="color: var(--text-secondary); margin-bottom: 8px; text-align: center; font-weight: 500;"
                                        id="restoreCurrentLabel">ÂΩìÂâçÊµèËßàÂô®</div>
                                    <div style="display: flex; justify-content: space-around; align-items: baseline;">
                                        <div style="text-align: center;">
                                            <div id="restoreCurrentCount"
                                                style="font-weight: 600; font-size: 18px; color: var(--text-primary); line-height: 1;">
                                                --</div>
                                            <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px;"
                                                id="restoreCurrentBookmarksLabel">‰π¶Á≠æ</div>
                                        </div>
                                        <div style="text-align: center;">
                                            <div id="restoreCurrentFolders"
                                                style="font-weight: 600; font-size: 18px; color: var(--text-primary); line-height: 1;">
                                                --</div>
                                            <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px;"
                                                id="restoreCurrentFoldersLabel">Êñá‰ª∂Â§π</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ÁÆ≠Â§¥ÂõæÊ†á -->
                                <div
                                    style="display: flex; flex-direction: column; justify-content: center; align-items: center; color: var(--text-tertiary); gap: 4px;">
                                    <i class="fas fa-arrow-right" style="font-size: 16px;"></i>
                                </div>

                                <!-- Â§á‰ªΩËÆ∞ÂΩïÁä∂ÊÄÅ -->
                                <div
                                    style="flex: 1; padding: 12px 10px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--accent-light);">
                                    <div style="color: var(--accent-primary); margin-bottom: 8px; text-align: center; font-weight: 500;"
                                        id="restoreBackupLabel">Â§á‰ªΩËÆ∞ÂΩï</div>
                                    <div style="display: flex; justify-content: space-around; align-items: baseline;">
                                        <div style="text-align: center;">
                                            <div id="restoreBackupCount"
                                                style="font-weight: 600; font-size: 18px; color: var(--accent-primary); line-height: 1;">
                                                --</div>
                                            <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px;"
                                                id="restoreBackupBookmarksLabel">‰π¶Á≠æ</div>
                                        </div>
                                        <div style="text-align: center;">
                                            <div id="restoreBackupFolders"
                                                style="font-weight: 600; font-size: 18px; color: var(--accent-primary); line-height: 1;">
                                                --</div>
                                            <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 4px;"
                                                id="restoreBackupFoldersLabel">Êñá‰ª∂Â§π</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Â∑ÆÂºÇÊëòË¶Å‰∏éÈ¢ÑËßàÊåâÈíÆË°å -->
                            <div
                                style="margin-top: 10px; background: var(--bg-tertiary); border-radius: 6px; padding: 8px 12px; display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                                <!-- Â∑ÆÂºÇÊëòË¶Å (Â∑¶ÂØπÈΩê) -->
                                <div id="restoreDiffSummary"
                                    style="font-size: 12px; color: var(--text-secondary); text-align: left; flex: 1;">
                                    Ê≠£Âú®ËÆ°ÁÆóÂ∑ÆÂºÇ...
                                </div>

                                <!-- È¢ÑËßàÊåâÈíÆ (Á∫ØÊñáÂ≠óÂ∞èÊ°Ü) -->
                                <button id="restorePreviewBtn"
                                    style="display: none; height: 26px; padding: 0 12px; font-size: 12px; border: 1px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary); border-radius: 4px; cursor: pointer; white-space: nowrap; transition: all 0.2s ease;"
                                    onmouseover="this.style.borderColor='var(--accent-primary)'; this.style.color='var(--accent-primary)';"
                                    onmouseout="this.style.borderColor='var(--border-color)'; this.style.color='var(--text-primary)';">
                                    <span id="restorePreviewBtnText">È¢ÑËßà</span>
                                </button>
                            </div>
                        </div>

                        <!-- Ë≠¶ÂëäÊèêÁ§∫ -->
                        <div
                            style="background: var(--warning-light); border: 1px solid var(--warning); border-radius: 6px; padding: 12px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: flex-start; gap: 8px;">
                                <i class="fas fa-exclamation-triangle"
                                    style="color: var(--warning); margin-top: 2px;"></i>
                                <div style="font-size: 13px; color: var(--text-primary); line-height: 1.5;">
                                    <strong id="restoreWarningTitle">Ë≠¶Âëä</strong>
                                    <p style="margin: 4px 0 0 0;" id="restoreWarningText">
                                        Ê≠§Êìç‰ΩúÂ∞Ü‰øÆÊîπÊÇ®ÁöÑÊµèËßàÂô®‰π¶Á≠æ„ÄÇÊÅ¢Â§çÂÆåÊàêÂêé‰ºöËá™Âä®ÂàõÂª∫‰∏ÄÊù°Êñ∞ÁöÑÂ§á‰ªΩËÆ∞ÂΩï„ÄÇ</p>
                                </div>
                            </div>
                        </div>

                        <!-- ËøõÂ∫¶ÊòæÁ§∫Âå∫ÂüüÔºàÈªòËÆ§ÈöêËóèÔºâ -->
                        <div id="restoreProgressSection" style="display: none; margin-bottom: 16px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span id="restoreProgressLabel"
                                    style="font-size: 13px; color: var(--text-secondary);">Ê≠£Âú®ÊÅ¢Â§ç...</span>
                                <span id="restoreProgressPercent" style="font-size: 13px; font-weight: 500;">0%</span>
                            </div>
                            <div
                                style="height: 6px; background: var(--bg-tertiary); border-radius: 3px; overflow: hidden;">
                                <div id="restoreProgressBar"
                                    style="height: 100%; width: 0%; background: var(--accent-primary); transition: width 0.3s ease;">
                                </div>
                            </div>
                            <div id="restoreProgressText"
                                style="font-size: 12px; color: var(--text-tertiary); margin-top: 6px; text-align: center;">
                                ÂáÜÂ§á‰∏≠...</div>
                        </div>

                        <!-- Êìç‰ΩúÊåâÈíÆ -->
                        <div class="modal-footer"
                            style="display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid var(--border-color); padding-top: 16px;">
                            <button class="modal-btn" id="restoreCancelBtn">ÂèñÊ∂à</button>
                            <button class="modal-btn primary" id="restoreConfirmBtn"
                                style="background: var(--accent-primary); color: white;">
                                ÊÅ¢Â§ç‰π¶Á≠æ
                        </div>
                    </div>

                    <!-- 2. È¢ÑËßàËßÜÂõæ (ÂêåÁ∫ßÂàáÊç¢) -->
                    <div id="restorePreviewView"
                        style="display: none; width: 100%; height: 100%; box-sizing: border-box; flex-direction: column;">
                        <div id="restorePreviewContent" class="history-tree-container"
                            style="flex: 1; overflow-y: auto; padding: 10px 24px;">
                            <!-- Tree content goes here -->
                        </div>
                    </div>

                </div> <!-- End restoreViewsWrapper -->
            </div> <!-- End modal-body -->
        </div>
    </div>
    </div>



    <!-- Ê∏ÖÁ©∫Â§á‰ªΩÂéÜÂè≤Á°ÆËÆ§ÂºπÁ™ó -->
    <div id="clearBackupHistoryModal" class="modal content-center">
        <div class="modal-content" style="max-width: 480px;">
            <div class="modal-header compact">
                <h3 id="clearBackupHistoryModalTitle">Ê∏ÖÈô§ËÆ∞ÂΩï</h3>
                <button class="modal-close" id="clearBackupHistoryModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="padding: 16px 20px;">
                <p id="clearBackupHistoryModalDesc"
                    style="font-size: 14px; color: var(--text-primary); margin: 0 0 14px 0;">
                    ÈÄâÊã©Ë¶ÅÂà†Èô§ÁöÑÂ§á‰ªΩÂéÜÂè≤ËÆ∞ÂΩïËåÉÂõ¥Ôºö
                </p>

                <!-- Âà†Èô§ËåÉÂõ¥ÈÄâÊã©Âå∫Âüü -->
                <div id="clearBackupHistoryOptions"
                    style="background: var(--bg-secondary); border-radius: 8px; padding: 14px 16px; margin-bottom: 14px;">

                    <!-- ÂèåÊªëÂùóËåÉÂõ¥ÈÄâÊã©Âô® -->
                    <div id="clearHistoryRangeContainer" class="range-slider-container">
                        <!-- ÊªëÂùóËΩ®ÈÅìÂÆπÂô® -->
                        <div id="clearHistoryRangeTrack" class="range-slider-track">
                            <!-- ÈÄâ‰∏≠Âå∫ÂüüÈ´ò‰∫Æ -->
                            <div id="clearHistoryRangeHighlight" class="range-slider-highlight"></div>
                        </div>

                        <!-- Â∑¶ÊªëÂùóÔºàËµ∑ÂßãÂ∫èÂè∑Ôºâ -->
                        <input type="range" id="clearHistoryRangeMin" class="range-slider-input" min="1" max="100"
                            value="1">

                        <!-- Âè≥ÊªëÂùóÔºàÁªìÊùüÂ∫èÂè∑Ôºâ -->
                        <input type="range" id="clearHistoryRangeMax" class="range-slider-input" min="1" max="100"
                            value="50">

                        <!-- Â∫èÂè∑ÂàªÂ∫¶ -->
                        <div id="clearHistoryRangeLabels" class="range-slider-labels">
                            <span id="clearHistoryMinSeqLabel">1</span>
                            <span id="clearHistoryMaxSeqLabel">100</span>
                        </div>

                        <div id="clearHistoryRangeMinBubble" class="range-slider-bubble">1</div>
                        <div id="clearHistoryRangeMaxBubble" class="range-slider-bubble">1</div>
                    </div>

                    <!-- ÈÄâ‰∏≠ËåÉÂõ¥ÊòæÁ§∫ -->
                    <div id="clearHistorySelectionDisplay" style="text-align: center; margin-top: 8px;">
                        <span style="font-size: 13px; color: var(--text-secondary);">
                            <span id="clearHistorySelectionLabel">Â∞ÜÂà†Èô§Â∫èÂè∑</span>
                            <span id="clearHistorySelectionRange"
                                style="font-weight: 600; color: var(--error);">1-50</span>
                            <span id="clearHistorySelectionCount" style="color: var(--text-secondary);">ÔºàÂÖ± 50 Êù°Ôºâ</span>
                        </span>
                    </div>

                    <!-- È¢ÑËßàÂà†Èô§Êï∞Èáè -->
                    <div id="clearHistoryPreview"
                        style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--border-color);">
                        <span style="font-size: 12px; color: var(--text-tertiary);">
                            <i class="fas fa-info-circle" style="margin-right: 4px;"></i>
                            <span id="clearHistoryPreviewText">ÂΩìÂâçÂÖ± 0 Êù°ËÆ∞ÂΩïÔºåÂ∞ÜÂà†Èô§ 0 Êù°</span>
                        </span>
                    </div>
                </div>

                <div class="modal-footer"
                    style="margin-top: 14px; display: flex; justify-content: flex-end; gap: 10px;">
                    <button class="modal-btn" id="clearBackupHistoryCancelBtn">ÂèñÊ∂à</button>
                    <button class="modal-btn danger" id="clearBackupHistoryConfirmBtn">Á°ÆËÆ§Âà†Èô§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê∏ÖÈô§ÂéÜÂè≤‰∫åÊ¨°Á°ÆËÆ§ÂºπÁ™ó -->
    <div id="clearHistorySecondConfirmModal" class="modal content-center">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header compact">
                <h3 id="clearHistorySecondConfirmTitle">Á°ÆËÆ§Âà†Èô§</h3>
                <button class="modal-close" id="clearHistorySecondConfirmClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="padding: 16px 20px;">
                <div style="text-align: center; margin-bottom: 16px;">
                    <div
                        style="width: 48px; height: 48px; background: var(--error-light); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 12px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 20px; color: var(--error);"></i>
                    </div>
                    <p id="clearHistorySecondConfirmText"
                        style="font-size: 15px; color: var(--text-primary); margin: 0 0 8px 0; font-weight: 500;">
                        <span id="clearHistorySecondConfirmPrefix">Âç≥Â∞ÜÂà†Èô§</span>
                        <span id="clearHistoryDeleteCountDisplay"
                            style="color: var(--error); font-weight: 700;">0</span>
                        <span id="clearHistorySecondConfirmSuffix">Êù°ËÆ∞ÂΩï</span>
                        <span id="clearHistoryRangeDisplay"
                            style="font-size: 13px; color: var(--text-secondary); font-weight: 400;"></span>
                    </p>
                    <p id="clearHistorySecondConfirmWarning"
                        style="font-size: 13px; color: var(--text-secondary); margin: 0;">
                        Ê≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄÔºåÂª∫ËÆÆÂÖàÂ§á‰ªΩÂÜçÂà†Èô§
                    </p>
                </div>

                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- ÂÖàÂ§á‰ªΩÊåâÈíÆ -->
                    <button class="modal-btn" id="clearHistoryExportFirstBtn"
                        style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 10px; background: var(--accent-light); border-color: var(--accent-primary); color: var(--accent-primary);">
                        <i class="fas fa-file-export"></i>
                        <span id="clearHistoryExportFirstText">ÂÖàÂ§á‰ªΩËøô‰∫õËÆ∞ÂΩï</span>
                    </button>

                    <!-- Áõ¥Êé•Âà†Èô§ÊåâÈíÆ -->
                    <button class="modal-btn danger" id="clearHistoryDirectDeleteBtn"
                        style="width: 100%; padding: 10px;">
                        <span id="clearHistoryDirectDeleteText">Áõ¥Êé•Âà†Èô§</span>
                    </button>

                    <!-- ËøîÂõûÊåâÈíÆ -->
                    <button class="modal-btn" id="clearHistorySecondConfirmCancelBtn"
                        style="width: 100%; padding: 10px; background: var(--bg-secondary); color: var(--text-secondary);">
                        <span id="clearHistorySecondConfirmCancelText">ËøîÂõû‰øÆÊîπ</span>
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆÂºπÁ™ó -->
    <div id="refreshSettingsModal" class="modal content-center">
        <div class="modal-content refresh-settings-modal">
            <div class="modal-header compact">
                <h3 id="refreshSettingsTitle">Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆ</h3>
                <button class="modal-close" id="refreshSettingsClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="refresh-settings-section">
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshEveryNOpensEnabled" checked>
                        <span id="refreshEveryNOpensLabel">ÊØèÊâìÂºÄ</span>
                        <input type="number" id="refreshEveryNOpensValue" value="3" min="1" max="100"
                            style="width: 50px; margin: 0 6px;">
                        <span id="refreshEveryNOpensUnit">Ê¨°Âà∑Êñ∞</span>
                    </label>
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshAfterHoursEnabled">
                        <span id="refreshAfterHoursLabel">Ë∑ù‰∏äÊ¨°Âà∑Êñ∞Ë∂ÖËøá</span>
                        <input type="number" id="refreshAfterHoursValue" value="1" min="1" max="24"
                            style="width: 50px; margin: 0 6px;">
                        <span id="refreshAfterHoursUnit">Â∞èÊó∂</span>
                    </label>
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshAfterDaysEnabled">
                        <span id="refreshAfterDaysLabel">Ë∑ù‰∏äÊ¨°Âà∑Êñ∞Ë∂ÖËøá</span>
                        <input type="number" id="refreshAfterDaysValue" value="1" min="1" max="30"
                            style="width: 50px; margin: 0 6px;">
                        <span id="refreshAfterDaysUnit">Â§©</span>
                    </label>
                </div>
                <div class="refresh-settings-status" id="refreshSettingsStatus"
                    style="margin-top: 12px; padding: 8px 10px; background: var(--bg-tertiary); border-radius: 6px; font-size: 13px; color: var(--text-secondary);">
                    <!-- Âä®ÊÄÅÊòæÁ§∫Áä∂ÊÄÅ -->
                </div>
                <div class="refresh-settings-actions" style="margin-top: 12px; text-align: right;">
                    <button id="refreshSettingsSaveBtn" class="view-action-btn"
                        style="display: inline-flex; width: auto;">
                        <i class="fas fa-check"></i> <span id="refreshSettingsSaveText">‰øùÂ≠ò</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†Âà∞ÂæÖÂ§ç‰π†ÂºπÁ™ó -->
    <div id="addToPostponedModal" class="modal content-center">
        <div class="modal-content add-postponed-modal">
            <div class="modal-header">
                <h3 id="addPostponedModalTitle">Ê∑ªÂä†Âà∞ÂæÖÂ§ç‰π†</h3>
                <button class="modal-close" id="addPostponedModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Ê∑ªÂä†ÊñπÂºèÈÄâÈ°πÂç° -->
                <div class="add-postponed-tabs">
                    <button class="add-postponed-tab active" data-tab="folder">
                        <i class="fas fa-folder"></i> <span id="addTabFolder">‰ªéÊñá‰ª∂Â§π</span>
                    </button>
                    <button class="add-postponed-tab" data-tab="search">
                        <i class="fas fa-search"></i> <span id="addTabSearch">ÊêúÁ¥¢‰π¶Á≠æ</span>
                    </button>
                    <button class="add-postponed-tab" data-tab="domain">
                        <i class="fas fa-globe"></i> <span id="addTabDomain">ÊåâÂüüÂêç</span>
                    </button>
                </div>

                <!-- ‰ªéÊñá‰ª∂Â§πÊ∑ªÂä†Èù¢Êùø -->
                <div class="add-postponed-panel active" data-panel="folder">
                    <div class="add-panel-row">
                        <label id="addFolderLabel">ÈÄâÊã©Êñá‰ª∂Â§πÔºö</label>
                        <button class="add-folder-select-btn" id="addFolderSelectBtn">
                            <i class="fas fa-folder"></i> <span id="addFolderSelectedName">ÁÇπÂáªÈÄâÊã©Êñá‰ª∂Â§π</span>
                        </button>
                    </div>
                    <div class="add-panel-row">
                        <label id="addCountLabel">ÊäΩÂèñÊï∞ÈáèÔºö</label>
                        <div class="add-count-wrapper">
                            <input type="number" id="addFolderCount" value="5" min="1" max="100"
                                class="add-count-input">
                            <label class="add-checkbox-inline">
                                <input type="checkbox" id="addFolderSelectAll">
                                <span id="addSelectAllLabel">ÂÖ®ÈÉ®</span>
                            </label>
                        </div>
                    </div>
                    <div class="add-panel-row" id="addModeRow">
                        <label id="addModeLabel">ÊäΩÂèñÊñπÂºèÔºö</label>
                        <div class="add-mode-options">
                            <label class="add-mode-option">
                                <input type="radio" name="addFolderMode" value="random" checked> <span
                                    id="addModeRandom">ÈöèÊú∫</span>
                            </label>
                            <label class="add-mode-option">
                                <input type="radio" name="addFolderMode" value="sequential"> <span
                                    id="addModeSequential">È°∫Â∫è</span>
                            </label>
                        </div>
                    </div>
                    <div class="add-panel-row">
                        <label class="add-checkbox-label">
                            <input type="checkbox" id="addFolderIncludeSubfolders" checked>
                            <span id="addIncludeSubfolders">ÂåÖÂê´Â≠êÊñá‰ª∂Â§π</span>
                        </label>
                    </div>
                </div>

                <!-- ÊêúÁ¥¢‰π¶Á≠æÈù¢Êùø -->
                <div class="add-postponed-panel" data-panel="search">
                    <div class="add-search-container">
                        <input type="text" id="addSearchInput" class="add-search-input" placeholder="ÊêúÁ¥¢‰π¶Á≠æÊ†áÈ¢òÊàñURL...">
                        <i class="fas fa-search add-search-icon"></i>
                    </div>
                    <div class="add-results-list" id="addSearchResults">
                        <div class="add-results-empty" id="addSearchEmpty">ËæìÂÖ•ÂÖ≥ÈîÆËØçÊêúÁ¥¢‰π¶Á≠æ</div>
                    </div>
                    <div class="add-selected-count">
                        <span id="addSearchSelectedText">Â∑≤ÈÄâÊã©</span>: <span id="addSearchSelectedCount">0</span>
                    </div>
                </div>

                <!-- ÊåâÂüüÂêçÊ∑ªÂä†Èù¢Êùø -->
                <div class="add-postponed-panel" data-panel="domain">
                    <div class="add-search-container">
                        <input type="text" id="addDomainSearchInput" class="add-search-input" placeholder="ÊêúÁ¥¢ÂüüÂêç...">
                        <i class="fas fa-search add-search-icon"></i>
                    </div>
                    <div class="add-domain-list" id="addDomainList">
                        <div class="add-results-empty" id="addDomainLoading">Âä†ËΩΩÂüüÂêçÂàóË°®‰∏≠...</div>
                    </div>
                    <div class="add-selected-count">
                        <span id="addDomainSelectedText">Â∑≤ÈÄâÊã©</span>: <span id="addDomainSelectedCount">0</span> <span
                            id="addDomainSelectedLabel">‰∏™ÂüüÂêç</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="addPostponedCancelBtn">ÂèñÊ∂à</button>
                <button class="modal-btn primary" id="addPostponedConfirmBtn">Ê∑ªÂä†</button>
            </div>
        </div>
    </div>

    <!-- Á®çÂêéÂ§ç‰π†ÂºπÁ™ó -->
    <div id="laterModal" class="modal content-center">
        <div class="modal-content later-modal">
            <button class="later-modal-close" id="laterModalClose">
                <i class="fas fa-times"></i>
            </button>
            <!-- PÂÄºÊé®ËçêÂå∫Âüü -->
            <div class="later-recommend" id="laterRecommendSection">
                <div class="later-recommend-label" id="laterRecommendLabel">Ê†πÊçÆÊµèËßà‰π†ÊÉØÊé®Ëçê</div>
                <button class="later-recommend-btn" id="laterRecommendBtn">
                    <i class="fas fa-magic"></i>
                    <span id="laterRecommendDays">3 Â§©Âêé</span>
                </button>
            </div>
            <div class="later-divider">
                <span id="laterOrText">ÊàñËá™ÂÆö‰πâ</span>
            </div>
            <div class="later-options">
                <button class="later-option" data-delay="3600000">
                    <i class="fas fa-clock"></i>
                    <span data-i18n="laterIn1Hour">1Â∞èÊó∂Âêé</span>
                </button>
                <button class="later-option" data-delay="86400000">
                    <i class="fas fa-sun"></i>
                    <span data-i18n="laterTomorrow">ÊòéÂ§©</span>
                </button>
                <button class="later-option" data-delay="259200000">
                    <i class="fas fa-calendar-day"></i>
                    <span data-i18n="laterIn3Days">3Â§©Âêé</span>
                </button>
                <button class="later-option" data-delay="604800000">
                    <i class="fas fa-calendar-week"></i>
                    <span data-i18n="laterIn1Week">1Âë®Âêé</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Êó∂Èó¥ËøΩË∏™Â±èËîΩÁÆ°ÁêÜÂºπÁ™ó -->
    <div id="trackingBlockModal" class="modal content-center">
        <div class="modal-content" style="max-width: 600px; max-height: 80vh;">
            <div class="modal-header compact">
                <h3 id="trackingBlockModalTitle">Êó∂Èó¥ËøΩË∏™Â±èËîΩÁÆ°ÁêÜ</h3>
                <button class="modal-close" id="trackingBlockModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 60vh; overflow-y: auto; padding: 16px 20px;">
                <!-- Â∑≤Â±èËîΩ‰π¶Á≠æ -->
                <div class="block-subsection">
                    <div class="block-subsection-header">
                        <span><i class="fas fa-bookmark"></i> <span id="trackingBlockedBookmarksTitle">Â∑≤Â±èËîΩ‰π¶Á≠æ</span>
                            (<span id="trackingBlockedBookmarksCount">0</span>)</span>
                        <button class="block-add-btn" id="addTrackingBlockBookmarkBtn"><i
                                class="fas fa-plus"></i></button>
                    </div>
                    <div class="block-list" id="trackingBlockedBookmarksList">
                        <div class="empty-state-inline" id="trackingBlockedBookmarksEmpty">
                            <span id="trackingBlockedBookmarksEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩ‰π¶Á≠æ</span>
                        </div>
                    </div>
                </div>
                <!-- Â∑≤Â±èËîΩÊñá‰ª∂Â§π -->
                <div class="block-subsection">
                    <div class="block-subsection-header">
                        <span><i class="fas fa-folder"></i> <span id="trackingBlockedFoldersTitle">Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span>
                            (<span id="trackingBlockedFoldersCount">0</span>)</span>
                        <button class="block-add-btn" id="addTrackingBlockFolderBtn"><i
                                class="fas fa-plus"></i></button>
                    </div>
                    <div class="block-list" id="trackingBlockedFoldersList">
                        <div class="empty-state-inline" id="trackingBlockedFoldersEmpty">
                            <span id="trackingBlockedFoldersEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span>
                        </div>
                    </div>
                </div>
                <!-- Â∑≤Â±èËîΩÂüüÂêç -->
                <div class="block-subsection">
                    <div class="block-subsection-header">
                        <span><i class="fas fa-globe"></i> <span id="trackingBlockedDomainsTitle">Â∑≤Â±èËîΩÂüüÂêç</span>
                            (<span id="trackingBlockedDomainsCount">0</span>)</span>
                        <button class="block-add-btn" id="addTrackingBlockDomainBtn"><i
                                class="fas fa-plus"></i></button>
                    </div>
                    <div class="block-list" id="trackingBlockedDomainsList">
                        <div class="empty-state-inline" id="trackingBlockedDomainsEmpty">
                            <span id="trackingBlockedDomainsEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÂüüÂêç</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Êó∂Èó¥ËøΩË∏™Ê∑ªÂä†ÂüüÂêçÂ±èËîΩÂºπÁ™ó -->
    <div id="addTrackingBlockDomainModal" class="modal content-center">
        <div class="modal-content add-postponed-modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="addTrackingBlockDomainModalTitle">Ê∑ªÂä†Â±èËîΩÂüüÂêçÔºàÊó∂Èó¥ËøΩË∏™Ôºâ</h3>
                <button class="modal-close" id="addTrackingBlockDomainModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="add-search-container">
                    <input type="text" id="addTrackingBlockDomainSearchInput" class="add-search-input"
                        placeholder="ÊêúÁ¥¢ÊàñËæìÂÖ•ÂüüÂêç...">
                    <i class="fas fa-search add-search-icon"></i>
                </div>
                <div class="add-domain-list" id="addTrackingBlockDomainList" style="height: 300px; margin-top: 10px;">
                    <div class="add-results-empty" id="addTrackingBlockDomainLoading">Âä†ËΩΩÂüüÂêçÂàóË°®‰∏≠...</div>
                </div>
                <!-- Â∫ïÈÉ®Êìç‰ΩúÊ†è -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
                    <div class="add-selected-count">
                        <span id="addTrackingBlockDomainSelectedText">Â∑≤ÈÄâÊã©</span>: <span
                            id="addTrackingBlockDomainSelectedCount">0</span>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button id="addTrackingBlockDomainCancelBtn" class="modal-btn">ÂèñÊ∂à</button>
                        <button id="addTrackingBlockDomainConfirmBtn" class="modal-btn primary">Ê∑ªÂä†Â±èËîΩ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Êó∂Èó¥ËøΩË∏™ÈÄâÊã©Êñá‰ª∂Â§πÂ±èËîΩÂºπÁ™ó -->
    <div id="selectTrackingBlockFolderModal" class="modal content-center">
        <div class="modal-content" style="max-width: 500px; max-height: 70vh;">
            <div class="modal-header compact">
                <h3 id="selectTrackingBlockFolderModalTitle">ÈÄâÊã©Ë¶ÅÂ±èËîΩÁöÑÊñá‰ª∂Â§πÔºàÊó∂Èó¥ËøΩË∏™Ôºâ</h3>
                <button class="modal-close" id="selectTrackingBlockFolderModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 50vh; overflow-y: auto;">
                <div id="trackingBlockFolderTreeContainer" class="folder-tree-container">
                    <!-- Êñá‰ª∂Â§πÊ†ëÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>
        </div>
    </div>

    <!-- Êó∂Èó¥ËøΩË∏™Ê∑ªÂä†Â±èËîΩ‰π¶Á≠æÂºπÁ™ó -->
    <div id="addTrackingBlockBookmarkModal" class="modal content-center">
        <div class="modal-content add-postponed-modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 id="addTrackingBlockBookmarkModalTitle">Ê∑ªÂä†Â±èËîΩ‰π¶Á≠æÔºàÊó∂Èó¥ËøΩË∏™Ôºâ</h3>
                <button class="modal-close" id="addTrackingBlockBookmarkModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Ê†áÁ≠æÈ°µ -->
                <div class="add-postponed-tabs">
                    <button class="add-postponed-tab active" data-tab="tracking" id="trackingBlockBookmarkTabTracking">
                        <i class="fas fa-broadcast-tower"></i> Ê≠£Âú®ËøΩË∏™
                    </button>
                    <button class="add-postponed-tab" data-tab="ranking" id="trackingBlockBookmarkTabRanking">
                        <i class="fas fa-chart-bar"></i> ÁªºÂêàÊéíË°å
                    </button>
                    <button class="add-postponed-tab" data-tab="tree" id="trackingBlockBookmarkTabTree">
                        <i class="fas fa-search"></i> ÊêúÁ¥¢
                    </button>
                </div>

                <!-- Ê≠£Âú®ËøΩË∏™Èù¢Êùø -->
                <div class="add-postponed-panel active" data-panel="tracking">
                    <div class="add-bookmark-list" id="addTrackingBlockBookmarkTrackingList" style="height: 300px;">
                        <div class="add-results-empty">Âä†ËΩΩ‰∏≠...</div>
                    </div>
                </div>

                <!-- ÁªºÂêàÊéíË°åÈù¢Êùø -->
                <div class="add-postponed-panel" data-panel="ranking">
                    <div class="add-bookmark-list" id="addTrackingBlockBookmarkRankingList" style="height: 300px;">
                        <div class="add-results-empty">Âä†ËΩΩ‰∏≠...</div>
                    </div>
                </div>

                <!-- ‰π¶Á≠æÊ†ëÈù¢Êùø -->
                <div class="add-postponed-panel" data-panel="tree">
                    <div class="add-search-container">
                        <input type="text" id="addTrackingBlockBookmarkSearchInput" class="add-search-input"
                            placeholder="ÊêúÁ¥¢‰π¶Á≠æ...">
                        <i class="fas fa-search add-search-icon"></i>
                    </div>
                    <div class="add-bookmark-list" id="addTrackingBlockBookmarkTreeList"
                        style="height: 260px; margin-top: 10px;">
                        <div class="add-results-empty">ËæìÂÖ•ÂÖ≥ÈîÆËØçÊêúÁ¥¢‰π¶Á≠æ</div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®Êìç‰ΩúÊ†è -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
                    <div class="add-selected-count">
                        <span id="addTrackingBlockBookmarkSelectedText">Â∑≤ÈÄâÊã©</span>: <span
                            id="addTrackingBlockBookmarkSelectedCount">0</span>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button id="addTrackingBlockBookmarkCancelBtn" class="modal-btn">ÂèñÊ∂à</button>
                        <button id="addTrackingBlockBookmarkConfirmBtn" class="modal-btn primary">Ê∑ªÂä†Â±èËîΩ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†ÂüüÂêçÂ±èËîΩÂºπÁ™ó -->
    <div id="addDomainModal" class="modal content-center">
        <div class="modal-content add-postponed-modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="addDomainModalTitle">Ê∑ªÂä†Â±èËîΩÂüüÂêç</h3>
                <button class="modal-close" id="addDomainModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="add-search-container">
                    <input type="text" id="addBlockDomainSearchInput" class="add-search-input" placeholder="ÊêúÁ¥¢ÊàñËæìÂÖ•ÂüüÂêç...">
                    <i class="fas fa-search add-search-icon"></i>
                </div>
                <div class="add-domain-list" id="addBlockDomainList" style="height: 300px; margin-top: 10px;">
                    <div class="add-results-empty" id="addBlockDomainLoading">Âä†ËΩΩÂüüÂêçÂàóË°®‰∏≠...</div>
                </div>
                <!-- Â∫ïÈÉ®Êìç‰ΩúÊ†è -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
                    <div class="add-selected-count">
                        <span id="addBlockDomainSelectedText">Â∑≤ÈÄâÊã©</span>: <span
                            id="addBlockDomainSelectedCount">0</span>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button id="addDomainCancelBtn" class="modal-btn">ÂèñÊ∂à</button>
                        <button id="addDomainConfirmBtn" class="modal-btn primary">Ê∑ªÂä†Â±èËîΩ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄâÊã©Êñá‰ª∂Â§πÂ±èËîΩÂºπÁ™ó -->
    <div id="selectFolderModal" class="modal content-center">
        <div class="modal-content" style="max-width: 500px; max-height: 70vh;">
            <div class="modal-header compact">
                <h3 id="selectFolderModalTitle">ÈÄâÊã©Ë¶ÅÂ±èËîΩÁöÑÊñá‰ª∂Â§π</h3>
                <button class="modal-close" id="selectFolderModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 50vh; overflow-y: auto;">
                <div id="folderTreeContainer" class="folder-tree-container">
                    <!-- Êñá‰ª∂Â§πÊ†ëÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>
        </div>
    </div>

    <!-- ÁºñËæë‰π¶Á≠æ/Êñá‰ª∂Â§πÂºπÁ™ó -->
    <div id="editBookmarkModal" class="modal content-center">
        <div class="modal-content" style="max-width: 480px;">
            <div class="modal-header compact">
                <h3 id="editBookmarkModalTitle">ÁºñËæë‰π¶Á≠æ</h3>
                <button class="modal-close" id="editBookmarkModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="edit-bookmark-form">
                    <div class="edit-bookmark-field">
                        <label for="editBookmarkTitle" id="editBookmarkTitleLabel">ÂêçÁß∞</label>
                        <input type="text" id="editBookmarkTitle" class="edit-bookmark-input" placeholder="ËæìÂÖ•ÂêçÁß∞...">
                    </div>
                    <div class="edit-bookmark-field" id="editBookmarkUrlField">
                        <label for="editBookmarkUrl" id="editBookmarkUrlLabel">Âú∞ÂùÄ</label>
                        <input type="text" id="editBookmarkUrl" class="edit-bookmark-input" placeholder="https://...">
                    </div>
                </div>
                <div class="edit-bookmark-actions">
                    <button id="editBookmarkCancelBtn" class="modal-btn">ÂèñÊ∂à</button>
                    <button id="editBookmarkSaveBtn" class="modal-btn primary">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ÂÖ®Â±ÄÂØºÂá∫ÂºπÁ™ó -->
    <div id="globalExportModal" class="modal">
        <div class="modal-content"
            style="max-width: 680px; display: flex; flex-direction: column; max-height: 90vh; position: relative;">
            <div class="modal-header">
                <div>
                    <h3 id="globalExportModalTitle" style="font-size: 18px;">ÂÖ®Â±ÄÂ§á‰ªΩÂØºÂá∫</h3>
                </div>
                <button class="modal-close" id="globalExportModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="overflow-y: auto; flex: 1; padding: 24px; padding-bottom: 70px;">

                <!-- ÁÆÄÂåñÂêéÁöÑÂØºÂá∫ÈÄâÈ°πÂå∫Âüü -->
                <div class="export-section"
                    style="margin-bottom: 24px; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                    <div style="display: flex; gap: 40px; align-items: flex-start;">
                        <!-- Ê†ºÂºèÈÄâÊã© -->
                        <div style="flex: 1;">
                            <h4
                                style="margin-bottom: 12px; font-size: 14px; color: var(--text-secondary); font-weight: 600;">
                                <i class="fas fa-file-alt" style="margin-right: 6px;"></i><span
                                    id="globalExportFormatTitle">ÂØºÂá∫Ê†ºÂºè</span>
                            </h4>
                            <div style="display: flex; gap: 16px;">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="globalExportFormatHtml" checked>
                                    <span style="font-size: 13px;">HTML</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="globalExportFormatJson">
                                    <span style="font-size: 13px;">JSON</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="globalExportFormatMd">
                                    <span style="font-size: 13px;">Markdown</span>
                                </label>
                            </div>
                            <div id="globalExportFormatHint"
                                style="margin-top: 8px; font-size: 12px; color: var(--text-tertiary);">
                                ÂãæÈÄâÂç≥ÂèØÂØºÂá∫ÂØπÂ∫îÊ†ºÂºèÊñá‰ª∂
                            </div>
                        </div>

                        <!-- ÂàÜÈöîÁ∫ø -->
                        <div style="width: 1px; background: var(--border-color); align-self: stretch;"></div>

                        <!-- ÊâìÂåÖÁªìÊûÑ -->
                        <div style="flex: 1;">
                            <h4
                                style="margin-bottom: 12px; font-size: 14px; color: var(--text-secondary); font-weight: 600;">
                                <i class="fas fa-box-open" style="margin-right: 6px;"></i><span
                                    id="globalExportPackTitle">ÊâìÂåÖÁªìÊûÑ</span>
                            </h4>
                            <div style="display: flex; gap: 16px;">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="globalExportPackMode" id="globalExportPackZip" value="zip"
                                        checked>
                                    <span id="globalExportPackZipText" style="font-size: 13px;">ZIP ÂΩíÊ°£</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="globalExportPackMode" id="globalExportPackMerge"
                                        value="merge">
                                    <span id="globalExportPackMergeText" style="font-size: 13px;">Âçï‰∏ÄÊñá‰ª∂ÂêàÂπ∂</span>
                                </label>
                            </div>
                            <div id="globalExportPackHint"
                                style="margin-top: 8px; font-size: 12px; color: var(--text-tertiary);">
                                ZIPÂΩíÊ°£Â∞ÜÂåÖÂê´Â§ö‰∏™Áã¨Á´ãÊñá‰ª∂ÔºõÂçï‰∏ÄÊñá‰ª∂ÂêàÂπ∂Â∞ÜÁîüÊàê‰∏Ä‰∏™Ê±áÊÄªÊñá‰ª∂
                            </div>
                        </div>
                    </div>
                </div>

                <!-- È¢ÑËßàË°®Ê†ºÂå∫Âüü -->
                <div class="export-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h4 style="font-size: 14px; color: var(--text-secondary); font-weight: 600; margin: 0;">
                            <i class="fas fa-list-check" style="margin-right: 6px;"></i><span
                                id="globalExportSelectTitle">ÈÄâÊã©Â§á‰ªΩËÆ∞ÂΩï</span>
                        </h4>
                        <!-- ÂàÜÈ°µÊéß‰ª∂ÔºàÂú®Ê†áÈ¢òË°åÂ±Ö‰∏≠Ôºâ -->
                        <div id="globalExportPagination" style="display: flex; align-items: center; gap: 6px;">
                            <button id="globalExportPrevPage" class="modal-btn"
                                style="padding: 2px 8px; font-size: 11px;">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <input type="text" id="globalExportPageInput" value="1"
                                style="width: 28px; padding: 2px 4px; font-size: 11px; text-align: center; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-secondary); color: var(--text-primary);">
                            <span style="font-size: 11px; color: var(--text-tertiary);">/</span>
                            <span id="globalExportTotalPages"
                                style="font-size: 11px; color: var(--text-secondary);">1</span>
                            <button id="globalExportNextPage" class="modal-btn"
                                style="padding: 2px 8px; font-size: 11px;">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div id="globalExportStatusWrapper" style="display: flex; align-items: center; gap: 6px;">
                            <button id="globalExportRangeToggleBtn" class="modal-btn"
                                style="padding: 2px 6px; font-size: 11px; line-height: 1; min-width: auto;"
                                aria-label="toggle-range">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <span id="globalExportStatus"
                                style="font-size: 12px; color: var(--accent-primary); font-weight: 500; background: var(--accent-light); padding: 2px 8px; border-radius: 4px;">
                                Â∑≤ÈÄâ 0 È°π
                            </span>
                        </div>
                    </div>

                    <!-- ËåÉÂõ¥ÈÄâÊã©ÔºàÊäòÂè†Èù¢ÊùøÔºâ -->
                    <div id="globalExportRangePanel"
                        style="display: none; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 10px 12px; margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px;">
                            <div id="globalExportRangePreviewText"
                                style="font-size: 12px; color: var(--text-tertiary); white-space: nowrap;"></div>
                            <label
                                style="display: inline-flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;">
                                <span id="globalExportRangeEnabledText"
                                    style="font-size: 12px; color: var(--text-secondary);">Ëá™Âä®ÂãæÈÄâ</span>
                                <input type="checkbox" id="globalExportRangeEnabled" style="cursor: pointer;">
                            </label>
                        </div>

                        <div id="globalExportRangeContainer" class="range-slider-container"
                            style="margin-top: 10px; margin-bottom: 0;">
                            <div class="range-slider-track">
                                <div id="globalExportRangeHighlight" class="range-slider-highlight"></div>
                            </div>
                            <input type="range" id="globalExportRangeMin" class="range-slider-input" min="1" max="100"
                                value="1">
                            <input type="range" id="globalExportRangeMax" class="range-slider-input" min="1" max="100"
                                value="1">
                            <div class="range-slider-labels">
                                <span id="globalExportRangeLeftLabel">1</span>
                                <span id="globalExportRangeRightLabel">1</span>
                            </div>
                            <div id="globalExportRangeMinBubble" class="range-slider-bubble">1</div>
                            <div id="globalExportRangeMaxBubble" class="range-slider-bubble">1</div>
                        </div>
                    </div>

                    <div class="global-export-table-container">
                        <table id="globalExportTable" style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="text-align: center; width: 40px;">
                                        <input type="checkbox" id="globalExportSelectAll" style="cursor: pointer;">
                                    </th>
                                    <th style="text-align: center; width: 54px;"><span id="globalExportThSeq">Â∫èÂè∑</span>
                                    </th>
                                    <th style="text-align: left;"><span id="globalExportThNote">Â§áÊ≥®</span></th>
                                    <th style="text-align: left; width: 110px;"><span id="globalExportThHash">ÂìàÂ∏åÂÄº</span>
                                    </th>
                                    <th style="text-align: left; width: 170px;"><span
                                            id="globalExportThViewMode">ËßÜÂõæÊ®°Âºè</span></th>
                                    <th style="text-align: left; width: 160px;"><span id="globalExportThTime">Êó∂Èó¥</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="globalExportTableBody">
                                <!-- Âä®ÊÄÅÁîüÊàê -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ÊÇ¨ÊµÆÊåâÈíÆÂå∫ÂüüÔºàÈÄèÊòéËÉåÊôØÔºåÂõ∫ÂÆöÂú®Â∫ïÈÉ®Ôºå‰∏çÈöèÊªöÂä®Ôºâ -->
            <div
                style="position: absolute; bottom: 0; left: 0; right: 0; padding: 16px 24px; display: flex; justify-content: flex-end; gap: 12px; background: transparent; pointer-events: none;">
                <button class="modal-btn" id="globalExportCancelBtn"
                    style="min-width: 80px; pointer-events: auto;">ÂèñÊ∂à</button>
                <button class="modal-btn primary" id="globalExportConfirmBtn"
                    style="min-width: 120px; pointer-events: auto;">
                    <i class="fas fa-file-export" style="margin-right: 6px;"></i><span
                        id="globalExportConfirmText">ÂØºÂá∫ÈÄâ‰∏≠È°π</span>
                </button>
            </div>
        </div>
    </div>
</body>

</html>