<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="history.css">
    <link rel="stylesheet" href="canvas_obsidian_style.css">
    <link rel="stylesheet" href="bookmark_calendar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="history_bootstrap.js" defer></script>
    <script src="vendor/marked.min.js"></script>
    <script src="vendor/obsidian-markdown.js"></script>
    <script src="bookmark_tree_context_menu.js" defer></script>
    <script src="bookmark_tree_drag_drop.js" defer></script>
    <script src="pointer_drag.js" defer></script>
    <script src="bookmark_canvas_module.js" defer></script>
    <script src="shortcuts_helpers.js" defer></script>
    <script src="bookmark_calendar.js" defer></script>
    <script src="browsing_history_calendar.js" defer></script>
    <!-- ÊµèËßàÂéÜÂè≤ËæÖÂä©Â∑•ÂÖ∑ÔºàÈÄöÁî®Â∑•ÂÖ∑ÂáΩÊï∞Ôºâ -->
    <script src="database/utils.js" defer></script>
    <script src="history.js" defer></script>
</head>
<body>
    <!-- Â§¥ÈÉ®ÂØºËà™ -->
    <header class="history-header">
        <div class="header-left">
            <h1 id="pageTitle">Â§á‰ªΩÂéÜÂè≤Êü•ÁúãÂô®</h1>
            <span class="header-subtitle" id="pageSubtitle">Á±ª‰ºº Git ÁöÑ‰π¶Á≠æÂèòÂåñËøΩË∏™</span>
        </div>
        <div class="header-right">
            <!-- ÊêúÁ¥¢Ê°Ü -->
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢‰π¶Á≠æ„ÄÅÊñá‰ª∂Â§π..." />
                <i class="fas fa-search"></i>
            </div>
            
            <!-- Â∑•ÂÖ∑ÊåâÈíÆÁªÑ -->
            <div class="tool-buttons">
                <button id="refreshBtn" class="tool-btn">
                    <i class="fas fa-sync-alt"></i>
                    <span class="btn-tooltip" id="refreshTooltip"></span>
                </button>
                <!-- ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆ - Áã¨Á´ãËÆæÁΩÆÔºå‰∏ªUI‰ºòÂÖà -->
                <button id="themeToggle" class="tool-btn">
                    <i class="fas fa-moon"></i>
                    <span class="btn-tooltip" id="themeTooltip"></span>
                </button>
                <!-- ËØ≠Ë®ÄÂàáÊç¢ÊåâÈíÆ - Áã¨Á´ãËÆæÁΩÆÔºå‰∏ªUI‰ºòÂÖà -->
                <button id="langToggle" class="tool-btn">
                    <span class="lang-text">EN</span>
                    <span class="btn-tooltip" id="langTooltip"></span>
                </button>
                <!-- ËØ¥ÊòéÊåâÈíÆÔºöÂø´Êç∑ÈîÆ & ÂºÄÊ∫ê‰ø°ÊÅØ -->
                <button id="helpToggle" class="tool-btn">
                    <i class="fas fa-question-circle"></i>
                    <span class="btn-tooltip" id="helpTooltip"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <div class="main-container">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <aside class="sidebar" id="sidebar">
            <!-- ‰æßËæπÊ†èÊî∂Ëµ∑ÊåâÈíÆ -->
            <button class="sidebar-toggle" id="sidebarToggle" title="Êî∂Ëµ∑/Â±ïÂºÄ‰æßËæπÊ†è">
                <i class="fas fa-chevron-left"></i>
            </button>
            
            <nav class="nav-tabs">
                <!-- Bookmark Git Âå∫ÂüüÁªÑ -->
                <div class="nav-group">
                    <div class="nav-group-title" id="bookmarkGitTitle"></div>
                    <button class="nav-tab" data-view="current-changes">
                        <i class="fas fa-exchange-alt"></i>
                        <span id="navCurrentChangesText">ÂΩìÂâç Êï∞Èáè/ÁªìÊûÑ ÂèòÂåñ</span>
                    </button>
                    <button class="nav-tab" data-view="history">
                        <i class="fas fa-history"></i>
                        <span id="navHistoryText">Â§á‰ªΩÂéÜÂè≤</span>
                    </button>
                </div>

                <!-- Bookmark toolbox Âå∫ÂüüÁªÑ -->
                <div class="nav-group">
                    <div class="nav-group-title" id="bookmarkToolboxTitle"></div>
                    <button class="nav-tab" data-view="canvas">
                        <i class="fas fa-project-diagram"></i>
                        <span id="navCanvasText">Bookmark Canvas</span>
                    </button>
                    <button class="nav-tab" data-view="additions">
                        <i class="fas fa-plus-circle"></i>
                        <span id="navAdditionsText">‰π¶Á≠æÊ∏©ÊïÖ</span>
                    </button>
                    <button class="nav-tab" data-view="recommend">
                        <i class="fas fa-lightbulb"></i>
                        <span id="navRecommendText">‰π¶Á≠æÊé®Ëçê</span>
                    </button>
                </div>
            </nav>

            <!-- Êó∂Èó¥ÊçïÊçâÂ∞èÁªÑ‰ª∂ -->
            <div class="time-tracking-widget" id="timeTrackingWidget">
                <div class="time-tracking-widget-header">
                    <i class="fas fa-stopwatch"></i>
                    <span id="timeTrackingWidgetTitle">Êó∂Èó¥ÊçïÊçâ</span>
                </div>
                <div class="time-tracking-widget-list" id="timeTrackingWidgetList">
                    <div class="time-tracking-widget-empty" id="timeTrackingWidgetEmpty">
                        <span id="timeTrackingWidgetEmptyText">ÊöÇÊó†ËøΩË∏™‰∏≠ÁöÑ‰π¶Á≠æ</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Âè≥‰æßÂÜÖÂÆπÂå∫Âüü -->
        <main class="content-area">
            <!-- Âø´Êç∑ÈîÆ‰∏éÂºÄÊ∫ê‰ø°ÊÅØÂºπÁ™ó -->
            <div id="shortcutsModal" class="modal">
                <div class="modal-content shortcuts-modal">
                    <div class="shortcuts-header">
                        <h2 id="shortcutsModalTitle"></h2>
                        <button id="closeShortcutsModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div id="openSourceInfo" class="shortcuts-section open-source-section">
                        <div class="shortcuts-card">
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div>
                                    <p id="openSourceGithubLabel" style="font-size: 14px; color: var(--text-secondary); margin: 0 0 4px 0;">GitHub ‰ªìÂ∫ì:</p>
                                    <a id="openSourceGithubLink" href="https://github.com/kwenxu/Bookmark-Backup?tab=readme-ov-file#readme" target="_blank" style="display: block; padding: 8px 12px; background-color: var(--bg-tertiary); border-radius: 6px; color: var(--link-color); text-decoration: none; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        <i class="fab fa-github" style="margin-right: 5px;"></i>
                                        https://github.com/kwenxu/Bookmark-Backup
                                    </a>
                                </div>
                                
                                <div>
                                    <p id="openSourceIssueLabel" style="font-size: 14px; color: var(--text-secondary); margin: 0 0 4px 0;">ÈóÆÈ¢òÂèçÈ¶à:</p>
                                    <a id="openSourceIssueLink" href="https://github.com/kwenxu/Bookmark-Backup/issues" target="_blank" style="display: block; padding: 8px 12px; background-color: var(--bg-tertiary); border-radius: 6px; color: var(--link-color); text-decoration: none;">
                                        <i class="fas fa-exclamation-circle" style="margin-right: 5px;"></i>
                                        <span id="openSourceIssueText">Êèê‰∫§ÈóÆÈ¢ò</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="shortcuts-divider" />
                    <div id="shortcutsContent" class="shortcuts-section"></div>
                </div>
            </div>

            <!-- Êó∂Èó¥ÊçïÊçâÁä∂ÊÄÅËØ¥ÊòéÂºπÁ™ó -->
            <div id="trackingStateModal" class="modal">
                <div class="modal-content tracking-state-modal">
                    <div class="modal-header">
                        <h2 id="trackingStateModalTitle">Êó∂Èó¥ÊçïÊçâÁä∂ÊÄÅËØ¥Êòé</h2>
                        <button id="closeTrackingStateModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div class="tracking-state-content">
                        <table class="tracking-state-table">
                            <thead>
                                <tr>
                                    <th id="stateTableHeaderIcon">ÂõæÊ†á</th>
                                    <th id="stateTableHeaderState">Áä∂ÊÄÅ</th>
                                    <th id="stateTableHeaderCondition">Êù°‰ª∂</th>
                                    <th id="stateTableHeaderRate">ËÆ°Êó∂ÂÄçÁéá</th>
                                    <th id="stateTableHeaderExample">‰æãÂ≠ê</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="state-icon-cell">üü¢</td>
                                    <td id="stateActiveLabel">Ê¥ªË∑É</td>
                                    <td id="stateActiveCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£ÁÑ¶ÁÇπ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó1.0</td>
                                    <td id="stateActiveExample">Ê≠£Âú®ÈòÖËØª„ÄÅÊªöÂä®È°µÈù¢„ÄÅÊâìÂ≠ó</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üü°</td>
                                    <td id="stateIdleLabel">ÂâçÂè∞ÈùôÊ≠¢</td>
                                    <td id="stateIdleCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£ÁÑ¶ÁÇπ + Áî®Êà∑Á©∫Èó≤</td>
                                    <td class="state-rate-cell">√ó0.8</td>
                                    <td id="stateIdleExample">ÈùôÊ≠¢ËßÇÁúãËßÜÈ¢ë„ÄÅÊÄùËÄÉÂÜÖÂÆπ</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üîµ</td>
                                    <td id="stateVisibleLabel">ÂèØËßÅÂèÇËÄÉ</td>
                                    <td id="stateVisibleCondition">ÂΩìÂâçÊ†áÁ≠æ + Á™óÂè£Êó†ÁÑ¶ÁÇπ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó0.5</td>
                                    <td id="stateVisibleExample">ÂàÜÂ±èÂèÇËÄÉÊñáÊ°£„ÄÅÂØπÁÖß‰ª£Á†Å</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">‚ö™</td>
                                    <td id="stateBackgroundLabel">ÂêéÂè∞</td>
                                    <td id="stateBackgroundCondition">ÈùûÂΩìÂâçÊ†áÁ≠æ + Áî®Êà∑Ê¥ªË∑É</td>
                                    <td class="state-rate-cell">√ó0.1</td>
                                    <td id="stateBackgroundExample">ÊåÇÊú∫„ÄÅÂêéÂè∞Êí≠ÊîæÈü≥‰πê</td>
                                </tr>
                                <tr>
                                    <td class="state-icon-cell">üí§</td>
                                    <td id="stateSleepLabel">Áù°Áú†</td>
                                    <td id="stateSleepCondition">Áî®Êà∑Á©∫Èó≤Ôºà‰ªª‰ΩïÊ†áÁ≠æÔºâ</td>
                                    <td class="state-rate-cell">√ó0</td>
                                    <td id="stateSleepExample">Á¶ªÂºÄÁîµËÑë„ÄÅÈîÅÂ±è</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="tracking-state-formula">
                            <code>ÁªºÂêàÊó∂Èó¥ = Ê¥ªË∑É√ó1.0 + ÂâçÂè∞ÈùôÊ≠¢√ó0.8 + ÂèØËßÅÂèÇËÄÉ√ó0.5 + ÂêéÂè∞√ó0.1</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÊùÉÈáçÂÖ¨ÂºèËØ¥ÊòéÂºπÁ™ó -->
            <div id="formulaHelpModal" class="modal content-center">
                <div class="modal-content formula-help-modal">
                    <div class="modal-header">
                        <h2 id="formulaHelpModalTitle">ÊùÉÈáçÂÖ¨ÂºèËØ¥Êòé</h2>
                        <button id="closeFormulaHelpModal" class="modal-close" aria-label="Close">√ó</button>
                    </div>
                    <div class="formula-help-content">
                        <div class="formula-help-section">
                            <h3 id="formulaHelpGeneralTitle">ÈÄöÁî®ÂÖ¨Âºè</h3>
                            <div class="formula-help-code">
                                <code>Âõ†Â≠êÂÄº = 1 / (1 + (ÂÆûÈôÖÂÄº / ÈòàÂÄº)^0.7)</code>
                            </div>
                        </div>
                        
                        <div class="formula-help-section">
                            <h3 id="formulaHelpFeaturesTitle">ÂÖ¨ÂºèÁâπÁÇπ</h3>
                            <ul class="formula-help-list">
                                <li id="formulaHelpFeature1"><strong>ÈòàÂÄºÂ§Ñ = 0.5</strong>ÔºöÂΩìÂÆûÈôÖÂÄºÁ≠â‰∫éÈòàÂÄºÊó∂ÔºåÂõ†Â≠êÂÄºÊ≠£Â•ΩÊòØ0.5</li>
                                <li id="formulaHelpFeature2"><strong>Âπ≥ÊªëË°∞Âáè</strong>Ôºö‰ΩøÁî®ÂπÇÂáΩÊï∞(^0.7)‰ΩøË°∞ÂáèÊõ¥Âπ≥ÁºìÔºåÈÅøÂÖçÁ°¨Êà™Êñ≠</li>
                                <li id="formulaHelpFeature3"><strong>Ê∞∏‰∏çÂΩíÈõ∂</strong>ÔºöÂç≥‰ΩøÊï∞ÂÄºÂæàÂ§ßÔºå‰ªç‰øùÁïôÂæÆÂ∞èÂå∫ÂàÜÂ∫¶</li>
                                <li id="formulaHelpFeature4"><strong>Â§ßÊï∞ÂÄºÂèãÂ•Ω</strong>Ôºö1000Ê¨°ÁÇπÂáª‰ªçÊúâ0.02ÁöÑÂå∫ÂàÜÂ∫¶</li>
                            </ul>
                        </div>
                        
                        <div class="formula-help-section">
                            <h3 id="formulaHelpNotesTitle">Ê≥®ÊÑè‰∫ãÈ°π</h3>
                            <ul class="formula-help-list">
                                <li id="formulaHelpNote1"><strong>F„ÄÅC„ÄÅT</strong> ‰ΩøÁî® inverse Ê®°ÂºèÔºöÂÄºË∂äÂ§ßÔºåÂõ†Â≠êË∂äÂ∞èÔºàÂ¶ÇÁÇπÂáªË∂äÂ§öÔºåÂÜ∑Èó®Â∫¶Ë∂ä‰ΩéÔºâ</li>
                                <li id="formulaHelpNote2"><strong>D</strong> ‰ΩøÁî®Ê≠£ÂêëÊ®°ÂºèÔºöÊú™ËÆøÈóÆÂ§©Êï∞Ë∂äÂ§öÔºåÈÅóÂøòÂ∫¶Ë∂äÈ´ò</li>
                                <li id="formulaHelpNote3"><strong>L</strong> ÊòØÂ∏ÉÂ∞îÂÄºÔºöÊâãÂä®Ê∑ªÂä†=1ÔºåÂê¶Âàô=0</li>
                            </ul>
                        </div>
                        
                        <div class="formula-help-section">
                            <h3 id="formulaHelpExampleTitle">ÊïàÊûúÁ§∫‰æã</h3>
                            <table class="formula-help-table">
                                <thead>
                                    <tr>
                                        <th id="formulaHelpTableValue">ÂÆûÈôÖÂÄº/ÈòàÂÄº</th>
                                        <th id="formulaHelpTableResult">Âõ†Â≠êÂÄº</th>
                                        <th id="formulaHelpTableMeaning">Âê´‰πâ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>0</td><td>1.00</td><td id="formulaHelpMeaning1">ÊúÄÈ´ò‰ºòÂÖà</td></tr>
                                    <tr><td>0.5√ó</td><td>0.75</td><td id="formulaHelpMeaning2">ËæÉÈ´ò</td></tr>
                                    <tr><td id="formulaHelpThreshold">1√ó(ÈòàÂÄº)</td><td>0.50</td><td id="formulaHelpMeaning3">‰∏≠Á≠â</td></tr>
                                    <tr><td>3√ó</td><td>0.22</td><td id="formulaHelpMeaning4">ËæÉ‰Ωé</td></tr>
                                    <tr><td>10√ó</td><td>0.10</td><td id="formulaHelpMeaning5">Âæà‰Ωé</td></tr>
                                    <tr><td>100√ó</td><td>0.02</td><td id="formulaHelpMeaning6">ÊûÅ‰Ωé‰ΩÜ‰ªçÊúâÂå∫ÂàÜ</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂΩìÂâçÂèòÂåñËßÜÂõæ -->
            <div id="current-changesView" class="view">
                <div class="view-header">
                    <h2 id="currentChangesViewTitle">ÂΩìÂâç Êï∞Èáè/ÁªìÊûÑ ÂèòÂåñ</h2>
                    <div class="view-header-right">
                        <button id="revertAllCurrentBtn" class="view-action-btn">
                            <i class="fas fa-undo"></i>
                            <span id="revertAllCurrentText">ÂÖ®ÈÉ®Êí§ÈîÄ</span>
                        </button>
                    </div>
                </div>
                <div id="currentChangesList" class="current-changes-container">
                    <!-- Âä®ÊÄÅÂä†ËΩΩÂΩìÂâçÂèòÂåñ -->
                </div>
            </div>

            <!-- Â§á‰ªΩÂéÜÂè≤ËßÜÂõæ -->
            <div id="historyView" class="view">
                <div class="view-header">
                    <div class="view-header-left">
                        <h2 id="historyViewTitle">Â§á‰ªΩÂéÜÂè≤ËÆ∞ÂΩï</h2>
                    </div>
                    <div class="view-header-right">
                        <button id="copyAllHistoryBtn" class="view-action-btn" data-action="copyAllHistory">
                            <i class="fas fa-copy"></i>
                            <span id="copyAllHistoryText">Â§çÂà∂ÊâÄÊúâËÆ∞ÂΩï</span>
                        </button>
                    </div>
                </div>
                <div id="historyList" class="history-commits">
                    <!-- Âä®ÊÄÅÂä†ËΩΩÂéÜÂè≤ËÆ∞ÂΩï -->
                </div>
            </div>

            <!-- ‰π¶Á≠æËÆ∞ÂΩïËßÜÂõæ -->
            <div id="additionsView" class="view">
                <div class="view-header">
                    <h2 id="additionsViewTitle">‰π¶Á≠æËÆ∞ÂΩï</h2>
                </div>
                
                <!-- ‰π¶Á≠æËÆ∞ÂΩïÂ≠êËßÜÂõæÊ†áÁ≠æ -->
                <div class="additions-tabs">
                    <button id="additionsTabReview" class="additions-tab active" data-tab="review">‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩï</button>
                    <button id="additionsTabBrowsing" class="additions-tab" data-tab="browsing">‰π¶Á≠æÊµèËßàËÆ∞ÂΩï</button>
                    <button id="additionsTabTracking" class="additions-tab" data-tab="tracking">Êó∂Èó¥ÊçïÊçâ</button>
                </div>

                <!-- Â≠êËßÜÂõæ 1Ôºö‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩïÔºàÊó•ÂéÜËßÜÂõæÔºâ -->
                <div id="additionsReviewPanel" class="additions-subview active">
                    <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                    <div class="calendar-breadcrumb-nav">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn active" id="breadcrumbYear">
                                    <i class="fas fa-calendar"></i>
                                    <span id="breadcrumbYearText">2024Âπ¥</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbYear">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbYear-menu">
                                    <!-- Âπ¥‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator1" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbMonth" style="display:none;">
                                    <span id="breadcrumbMonthText">11Êúà</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbMonth">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbMonth-menu">
                                    <!-- Êúà‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator2" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbWeek" style="display:none;">
                                    <span id="breadcrumbWeekText">Á¨¨45Âë®</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbWeek">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbWeek-menu">
                                    <!-- Âë®ÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                            <span class="breadcrumb-separator" id="separator3" style="display:none;">/</span>
                            <div class="breadcrumb-item-wrapper">
                                <button class="breadcrumb-btn" id="breadcrumbDay" style="display:none;">
                                    <span id="breadcrumbDayText">11Êúà20Êó•</span>
                                </button>
                                <div class="breadcrumb-dropdown-trigger" data-target="breadcrumbDay">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="breadcrumb-dropdown-menu" id="breadcrumbDay-menu">
                                    <!-- Êó•ÊúüÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button class="calendar-action-btn" id="calendarExportBtn">
                                <i class="fas fa-file-export"></i>
                                <span class="btn-tooltip" id="calendarExportTooltip">ÂØºÂá∫ËÆ∞ÂΩï</span>
                            </button>
                            <button class="calendar-action-btn" id="calendarSelectModeBtn">
                                <i class="fas fa-check-square"></i>
                                <span class="btn-tooltip" id="calendarSelectModeText">ÂãæÈÄâ</span>
                            </button>
                            <button class="calendar-action-btn" id="calendarLocateTodayBtn">
                                <i class="fas fa-crosshairs"></i>
                                <span class="btn-tooltip" id="calendarLocateTodayText">ÂÆö‰ΩçËá≥‰ªäÂ§©</span>
                            </button>
                        </div>
                    </div>

                    <!-- Êó•ÂéÜÂÆπÂô® -->
                    <div id="bookmarkCalendarView" class="bookmark-calendar-view">
                        <div style="padding: 40px; text-align: center; color: var(--text-secondary);">
                            <i class="fas fa-calendar-alt" style="font-size: 48px; opacity: 0.3; margin-bottom: 16px;"></i>
                            <p id="calendarLoadingText">Ê≠£Âú®Âä†ËΩΩÊó•ÂéÜ...</p>
                        </div>
                    </div>
                </div>

                <!-- Â≠êËßÜÂõæ 2Ôºö‰π¶Á≠æÊµèËßàËÆ∞ÂΩï -->
                <div id="additionsBrowsingPanel" class="additions-subview">
                    <!-- ÊµèËßàËÆ∞ÂΩïÂ≠êËßÜÂõæÊ†áÁ≠æ -->
                    <div class="browsing-sub-tabs">
                        <button id="browsingTabHistory" class="browsing-sub-tab active" data-sub-tab="history">ÁÇπÂáªËÆ∞ÂΩï</button>
                        <button id="browsingTabRanking" class="browsing-sub-tab" data-sub-tab="ranking">ÁÇπÂáªÊéíË°å</button>
                        <button id="browsingTabRelated" class="browsing-sub-tab" data-sub-tab="related">ÂÖ≥ËÅîËÆ∞ÂΩï</button>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.1ÔºöÁÇπÂáªËÆ∞ÂΩïÔºàÊó•ÂéÜËßÜÂõæÔºâ -->
                    <div id="browsingHistoryPanel" class="browsing-sub-panel active">
                        <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
                        <div class="calendar-breadcrumb-nav">
                            <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn active" id="browsingBreadcrumbYear">
                                        <i class="fas fa-calendar"></i>
                                        <span id="browsingBreadcrumbYearText">2024Âπ¥</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbYear">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbYear-menu">
                                        <!-- Âπ¥‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator1" style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbMonth" style="display:none;">
                                        <span id="browsingBreadcrumbMonthText">11Êúà</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbMonth">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbMonth-menu">
                                        <!-- Êúà‰ªΩÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator2" style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbWeek" style="display:none;">
                                        <span id="browsingBreadcrumbWeekText">Á¨¨45Âë®</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbWeek">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbWeek-menu">
                                        <!-- Âë®ÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <span class="breadcrumb-separator" id="browsingSeparator3" style="display:none;">/</span>
                                <div class="breadcrumb-item-wrapper">
                                    <button class="breadcrumb-btn" id="browsingBreadcrumbDay" style="display:none;">
                                        <span id="browsingBreadcrumbDayText">11Êúà20Êó•</span>
                                    </button>
                                    <div class="breadcrumb-dropdown-trigger" data-target="browsingBreadcrumbDay">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="breadcrumb-dropdown-menu" id="browsingBreadcrumbDay-menu">
                                        <!-- Êó•ÊúüÂÄôÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button class="calendar-action-btn" id="browsingCalendarExportBtn">
                                    <i class="fas fa-file-export"></i>
                                    <span class="btn-tooltip" id="browsingCalendarExportTooltip">ÂØºÂá∫ËÆ∞ÂΩï</span>
                                </button>
                                <button class="calendar-action-btn" id="browsingCalendarSelectModeBtn">
                                    <i class="fas fa-check-square"></i>
                                    <span class="btn-tooltip" id="browsingCalendarSelectModeText">ÂãæÈÄâ</span>
                                </button>
                                <button class="calendar-action-btn" id="browsingCalendarLocateTodayBtn">
                                    <i class="fas fa-crosshairs"></i>
                                    <span class="btn-tooltip" id="browsingCalendarLocateTodayText">ÂÆö‰ΩçËá≥‰ªäÂ§©</span>
                                </button>
                            </div>
                        </div>

                        <!-- Êó•ÂéÜÂÆπÂô® -->
                        <div id="browsingCalendarView" class="bookmark-calendar-view">
                            <div style="padding: 40px; text-align: center; color: var(--text-secondary);">
                                <i class="fas fa-calendar-alt" style="font-size: 48px; opacity: 0.3; margin-bottom: 16px;"></i>
                                <p id="browsingCalendarLoadingText">Ê≠£Âú®Âä†ËΩΩÊó•ÂéÜ...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.2ÔºöÁÇπÂáªÊéíË°å -->
                    <div id="browsingRankingPanel" class="browsing-sub-panel">
                        <div class="browsing-ranking-header">
                            <div class="browsing-ranking-title-block">
                                <div id="browsingRankingTitle" class="ranking-title">ÁÇπÂáªÊéíË°å</div>
                                <div id="browsingRankingDescription" class="ranking-description">
                                    Âü∫‰∫éÊµèËßàÂô®ÂéÜÂè≤ËÆ∞ÂΩïÔºåÊåâÁÇπÂáªÊ¨°Êï∞ÁªüËÆ°ÂΩìÂâç‰π¶Á≠æÁöÑÁÉ≠Èó®Á®ãÂ∫¶„ÄÇ
                                </div>
                            </div>
                            <div class="browsing-ranking-filters">
                                <button id="browsingRankingFilterDay" class="ranking-time-filter-btn" data-range="day">ÂΩìÂ§©</button>
                                <button id="browsingRankingFilterWeek" class="ranking-time-filter-btn" data-range="week">ÂΩìÂë®</button>
                                <button id="browsingRankingFilterMonth" class="ranking-time-filter-btn active" data-range="month">ÂΩìÊúà</button>
                                <button id="browsingRankingFilterYear" class="ranking-time-filter-btn" data-range="year">ÂΩìÂπ¥</button>
                            </div>
                        </div>
                        <!-- Êó∂Èó¥ÊÆµËèúÂçïÂÆπÂô®ÔºàÂú®Á≠õÈÄâÊåâÈíÆ‰∏ãÊñπÔºâ -->
                        <div id="browsingRankingTimeMenu" class="browsing-time-menu" style="display: none;"></div>
                        <div id="browsingRankingList" class="ranking-list">
                            <div class="empty-state">
                                <div class="empty-state-icon"><i class="fas fa-chart-bar"></i></div>
                                <div class="empty-state-title" id="browsingRankingLoadingText">Ê≠£Âú®ËØªÂèñÂéÜÂè≤ËÆ∞ÂΩï...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Â≠êËßÜÂõæ 2.3Ôºö‰π¶Á≠æÂÖ≥ËÅîËÆ∞ÂΩï -->
                    <div id="browsingRelatedPanel" class="browsing-sub-panel">
                        <div class="browsing-ranking-header">
                            <div class="browsing-ranking-title-block">
                                <div id="browsingRelatedTitle" class="ranking-title">ÂÖ≥ËÅîËÆ∞ÂΩï</div>
                                <div id="browsingRelatedDescription" class="ranking-description">
                                    ÊòæÁ§∫ÊµèËßàÂô®ÂéÜÂè≤ËÆ∞ÂΩïÔºåÂπ∂Áî®ÁªøËâ≤ËæπÊ°ÜÂá∏Êòæ‰π¶Á≠æÁõ∏ÂÖ≥ÁöÑËÆ∞ÂΩï„ÄÇ
                                </div>
                            </div>
                            <div class="browsing-ranking-filters">
                                <button id="browsingRelatedFilterDay" class="ranking-time-filter-btn active" data-range="day">ÂΩìÂ§©</button>
                                <button id="browsingRelatedFilterWeek" class="ranking-time-filter-btn" data-range="week">ÂΩìÂë®</button>
                                <button id="browsingRelatedFilterMonth" class="ranking-time-filter-btn" data-range="month">ÂΩìÊúà</button>
                                <button id="browsingRelatedFilterYear" class="ranking-time-filter-btn" data-range="year">ÂΩìÂπ¥</button>
                                <button id="browsingRelatedSortBtn" class="ranking-sort-btn">
                                    <i class="fas fa-sort-amount-down"></i>
                                </button>
                            </div>
                        </div>
                        <!-- Êó∂Èó¥ÊÆµËèúÂçïÂÆπÂô®ÔºàÂú®Á≠õÈÄâÊåâÈíÆ‰∏ãÊñπÔºâ -->
                        <div id="browsingRelatedTimeMenu" class="browsing-time-menu" style="display: none;"></div>
                        <div id="browsingRelatedList" class="related-history-list">
                            <div class="empty-state">
                                <div class="empty-state-icon"><i class="fas fa-history"></i></div>
                                <div class="empty-state-title" id="browsingRelatedLoadingText">Ê≠£Âú®ËØªÂèñÂéÜÂè≤ËÆ∞ÂΩï...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â≠êËßÜÂõæ 3ÔºöÊó∂Èó¥ÊçïÊçâ -->
                <div id="additionsTrackingPanel" class="additions-subview">
                    <div class="tracking-panel-header">
                        <div class="tracking-panel-title">
                            <span id="trackingPanelDesc">ËøΩË∏™‰π¶Á≠æÈ°µÈù¢ÁöÑÊ¥ªË∑ÉÊµèËßàÊó∂Èó¥</span>
                        </div>
                        <div class="tracking-panel-actions">
                            <button id="clearTrackingBtn" class="tracking-action-btn" title="Ê∏ÖÈô§ËÆ∞ÂΩï">
                                <i class="fas fa-trash-alt"></i>
                                <span id="clearTrackingText">Ê∏ÖÈô§</span>
                            </button>
                            <button id="trackingToggleBtn" class="tracking-toggle-btn active">
                                <span class="tracking-indicator"></span>
                                <span id="trackingToggleText">ÂºÄÂêØ</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ê≠£Âú®ËøΩË∏™ÁöÑ‰π¶Á≠æ -->
                    <div class="tracking-section">
                        <div class="tracking-section-header">
                            <span class="tracking-section-title">
                                <i class="fas fa-broadcast-tower"></i>
                                <span id="trackingCurrentTitle">Ê≠£Âú®ËøΩË∏™</span>
                                <span class="tracking-count">(<span id="trackingCurrentCount">0</span>)</span>
                            </span>
                        </div>
                        <div class="tracking-table-wrapper">
                            <table class="tracking-table" id="trackingCurrentTable">
                                <thead>
                                    <tr>
                                        <th id="trackingHeaderState"><span class="tracking-header-text">Áä∂ÊÄÅ</span><i class="fas fa-question-circle tracking-state-help" id="trackingStateHelpBtn" title="Áä∂ÊÄÅËØ¥Êòé"></i></th>
                                        <th id="trackingHeaderTitle">‰π¶Á≠æ</th>
                                        <th id="trackingHeaderTime">ÁªºÂêàÊó∂Èó¥</th>
                                        <th id="trackingHeaderWakes">Âî§ÈÜí</th>
                                        <th id="trackingHeaderRatio">Ê¥ªË∑É</th>
                                    </tr>
                                </thead>
                                <tbody id="trackingCurrentList">
                                    <tr class="tracking-empty-row">
                                        <td colspan="5">
                                            <span id="trackingNoActiveText">ÊöÇÊó†Ê≠£Âú®ËøΩË∏™ÁöÑ‰π¶Á≠æ</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Ê¥ªË∑ÉÊó∂Èó¥ÊéíË°å -->
                    <div class="tracking-section">
                        <div class="tracking-section-header">
                            <span class="tracking-section-title">
                                <i class="fas fa-chart-bar"></i>
                                <span id="trackingRankingTitle">Ê¥ªË∑ÉÊó∂Èó¥ÊéíË°å</span>
                            </span>
                            <select id="trackingRankingRange" class="tracking-range-select">
                                <option value="today" id="trackingRangeToday">‰ªäÂ§©</option>
                                <option value="week" selected id="trackingRangeWeek">Êú¨Âë®</option>
                                <option value="month" id="trackingRangeMonth">Êú¨Êúà</option>
                                <option value="all" id="trackingRangeAll">ÂÖ®ÈÉ®</option>
                            </select>
                        </div>
                        <div class="tracking-list" id="trackingRankingList">
                            <div class="empty-state-small">
                                <span id="trackingNoDataText">ÊöÇÊó†Ê¥ªË∑ÉÊó∂Èó¥Êï∞ÊçÆ</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- ‰π¶Á≠æÊé®ËçêËßÜÂõæÔºàÁã¨Á´ãËßÜÂõæÔºâ -->
            <div id="recommendView" class="view">
                <div class="view-header">
                    <h2 id="recommendViewTitle">‰π¶Á≠æÊé®Ëçê</h2>
                </div>

                <!-- BÂå∫ÔºöÊé®ËçêÂç°ÁâáÔºà‰∏âÂç°Âπ∂ÊéíÔºâ -->
                <div class="recommend-card-section">
                    <div class="cards-row" id="cardsRow">
                        <div class="recommend-card" data-index="0">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">P = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="recommend-card" data-index="1">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">P = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="recommend-card" data-index="2">
                            <img class="card-favicon" src="" alt="">
                            <div class="card-title">--</div>
                            <div class="card-footer">
                                <span class="card-priority">P = --</span>
                                <div class="card-actions">
                                    <button class="card-btn card-btn-block" title="Â±èËîΩ"><i class="fas fa-ban"></i></button>
                                    <button class="card-btn card-btn-later" title="ÂæÖÂ§ç‰π†"><i class="fas fa-clock"></i></button>
                                    <button class="card-btn card-btn-skip" title="Ë∑≥Ëøá"><i class="fas fa-forward"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-navigation">
                        <button id="refreshSettingsBtn" class="card-nav-btn compact" title="Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆ"><i class="fas fa-cog"></i></button>
                        <button id="cardRefreshBtn" class="card-nav-btn primary"><i class="fas fa-sync-alt"></i> <span id="cardRefreshText">Âà∑Êñ∞Êé®Ëçê</span></button>
                    </div>
                </div>

                <!-- ÂèØÊãñÊãΩÊäòÂè†Âå∫ÂüüÂÆπÂô® -->
                <div class="recommend-sections-container" id="recommendSectionsContainer">
                    <!-- ÂæÖÂ§ç‰π†ÈòüÂàóÔºàÊï∞Èáè‰∏∫0Êó∂ÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-postponed-section collapsible draggable-section" data-section-id="postponed">
                        <div class="section-header">
                            <span class="section-title"><i class="fas fa-clock"></i> <span id="postponedTitle">ÂæÖÂ§ç‰π†</span> (<span id="postponedCount">0</span>) <span id="postponedPriorityBadge" class="priority-mode-badge" style="display:none;">‚ö°‰ºòÂÖà</span></span>
                            <div class="section-header-actions">
                                <button class="section-action-btn" id="postponedAddBtn" title="Ê∑ªÂä†‰π¶Á≠æÂà∞ÂæÖÂ§ç‰π†"><i class="fas fa-plus"></i></button>
                                <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                            </div>
                        </div>
                        <div class="section-content">
                            <div class="postponed-list" id="postponedList">
                                <div class="empty-state-inline" id="postponedEmpty">
                                    <span id="postponedEmptyText">ÊöÇÊó†ÂæÖÂ§ç‰π†ÁöÑ‰π¶Á≠æ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Â±èËîΩÁÆ°ÁêÜÔºàÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-block-section collapsible collapsed draggable-section" data-section-id="block">
                        <div class="section-header">
                            <span class="section-title"><i class="fas fa-ban"></i> <span id="blockManageTitle">Â±èËîΩÁÆ°ÁêÜ</span></span>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content">
                            <!-- Â∑≤Â±èËîΩ‰π¶Á≠æ -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-bookmark"></i> <span id="blockedBookmarksTitle">Â∑≤Â±èËîΩ‰π¶Á≠æ</span> (<span id="blockedBookmarksCount">0</span>)</span>
                                </div>
                                <div class="block-list" id="blockedBookmarksList">
                                    <div class="empty-state-inline" id="blockedBookmarksEmpty">
                                        <span id="blockedBookmarksEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩ‰π¶Á≠æ</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Â∑≤Â±èËîΩÊñá‰ª∂Â§π -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-folder"></i> <span id="blockedFoldersTitle">Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span> (<span id="blockedFoldersCount">0</span>)</span>
                                    <button class="block-add-btn" id="addBlockFolderBtn"><i class="fas fa-plus"></i></button>
                                </div>
                                <div class="block-list" id="blockedFoldersList">
                                    <div class="empty-state-inline" id="blockedFoldersEmpty">
                                        <span id="blockedFoldersEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÊñá‰ª∂Â§π</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Â∑≤Â±èËîΩÂüüÂêç -->
                            <div class="block-subsection">
                                <div class="block-subsection-header">
                                    <span><i class="fas fa-globe"></i> <span id="blockedDomainsTitle">Â∑≤Â±èËîΩÂüüÂêç</span> (<span id="blockedDomainsCount">0</span>)</span>
                                    <button class="block-add-btn" id="addBlockDomainBtn"><i class="fas fa-plus"></i></button>
                                </div>
                                <div class="block-list" id="blockedDomainsList">
                                    <div class="empty-state-inline" id="blockedDomainsEmpty">
                                        <span id="blockedDomainsEmptyText">ÊöÇÊó†Â∑≤Â±èËîΩÂüüÂêç</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊùÉÈáçÂÖ¨ÂºèÔºàÈªòËÆ§ÊäòÂè†Ôºâ -->
                    <div class="recommend-formula-section collapsible collapsed draggable-section" data-section-id="formula">
                        <div class="section-header" id="formulaHeader">
                            <i class="fas fa-superscript formula-icon"></i>
                            <div class="formula-main">
                                <span class="formula-label">P</span>
                                <span class="formula-equals">=</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightFreshness" value="0.15" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">F</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightColdness" value="0.20" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">C</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term" id="termTimeDegree">
                                    <input type="text" class="formula-weight" id="weightTimeDegree" value="0.30" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">T</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term">
                                    <input type="text" class="formula-weight" id="weightForgetting" value="0.20" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">D</span>
                                </span>
                                <span class="formula-plus">+</span>
                                <span class="formula-term" id="termLaterReview">
                                    <input type="text" class="formula-weight" id="weightLaterReview" value="0.20" readonly>
                                    <span class="formula-multiply">√ó</span>
                                    <span class="formula-factor">L</span>
                                </span>
                            </div>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content" id="formulaContent">
                            <div class="formula-display">
                                <div class="formula-legend">
                                    <span class="legend-item"><span class="legend-factor">F</span><span id="legendFreshness">Êñ∞È≤úÂ∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">C</span><span id="legendColdness">ÂÜ∑Èó®Â∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">T</span><span id="legendTimeDegree">Êó∂Èó¥Â∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">D</span><span id="legendForgetting">ÈÅóÂøòÂ∫¶</span></span>
                                    <span class="legend-item"><span class="legend-factor">L</span><span id="legendLaterReview">ÂæÖÂ§ç‰π†</span></span>
                                </div>
                                <div class="formula-thresholds-wrapper">
                                    <div class="formula-thresholds">
                                        <span class="threshold-item">F = 1/(1+(Ê∑ªÂä†Â§©Êï∞/<input type="text" class="threshold-value" id="thresholdFreshness" value="30">)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">C = 1/(1+(ÁÇπÂáªÊï∞/<input type="text" class="threshold-value" id="thresholdColdness" value="10">)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">T = 1/(1+(ÁªºÂêàÊó∂Èó¥/<input type="text" class="threshold-value" id="thresholdTimeDegree" value="5">ÂàÜÈíü)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item">D = 1-1/(1+(Êú™ËÆøÈóÆ/<input type="text" class="threshold-value" id="thresholdForgetting" value="14">Â§©)‚Å∞¬∑‚Å∑)</span>
                                        <span class="threshold-item" id="thresholdLaterReviewItem">L = <span id="laterReviewStatus">0</span><span id="laterReviewDesc">ÔºàÊâãÂä®Ê∑ªÂä†Âêé=1Ôºâ</span></span>
                                    </div>
                                    <button class="formula-help-btn" id="formulaHelpBtn" title="ÂÖ¨ÂºèËØ¥Êòé">
                                        <i class="fas fa-question-circle"></i>
                                    </button>
                                </div>
                                <div class="formula-footer">
                                    <div class="preset-modes">
                                        <button class="preset-btn active" data-mode="default" title="ÂùáË°°Êé®Ëçê">
                                            <i class="fas fa-balance-scale"></i> <span>ÈªòËÆ§Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="archaeology" title="ÊåñÊéòÂ∞òÂ∞ÅÂ∑≤‰πÖÁöÑ‰π¶Á≠æ">
                                            <i class="fas fa-hourglass-end"></i> <span>ËÄÉÂè§Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="consolidate" title="Ê∏©‰π†ËøëÊúüÈáçË¶ÅÂÜÖÂÆπ">
                                            <i class="fas fa-fire-alt"></i> <span>Â∑©Âõ∫Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn" data-mode="wander" title="ÈöèÊú∫Êé¢Á¥¢ÂèëÁé∞">
                                            <i class="fas fa-dice"></i> <span>Êº´Ê∏∏Ê®°Âºè</span>
                                        </button>
                                        <button class="preset-btn priority-mode" data-mode="priority" id="priorityModeBtn" style="display:none;" title="‰ºòÂÖàÂ§ç‰π†ÊâãÂä®Ê∑ªÂä†ÁöÑ‰π¶Á≠æ">
                                            <i class="fas fa-bolt"></i> <span id="priorityModeText">‰ºòÂÖàÂ∑©Âõ∫</span>
                                        </button>
                                    </div>
                                    <div class="formula-actions">
                                        <button id="resetFormulaBtn" class="formula-btn"><i class="fas fa-undo"></i> <span id="resetFormulaText">ÊÅ¢Â§çÈªòËÆ§</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁÉ≠ÂäõÂõæ -->
                    <div class="recommend-heatmap-section collapsible draggable-section" data-section-id="heatmap">
                        <div class="section-header" id="heatmapHeader">
                            <span class="section-title"><i class="fas fa-fire"></i> <span id="heatmapTitle">Â§ç‰π†ÁÉ≠ÂäõÂõæ</span></span>
                            <button class="section-toggle"><i class="fas fa-chevron-down"></i></button>
                        </div>
                        <div class="section-content" id="heatmapContent">
                            <div class="heatmap-container" id="heatmapContainer">
                                <div class="empty-state">
                                    <div class="empty-state-icon"><i class="fas fa-fire"></i></div>
                                    <div id="heatmapLoadingText" class="empty-state-title">ÁÉ≠ÂäõÂõæÊï∞ÊçÆÂä†ËΩΩ‰∏≠...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Bookmark Canvas ËßÜÂõæ (ÂéüBookmark TreeÊîπÈÄ†) -->
            <div id="canvasView" class="view">
                <div class="view-header">
                    <div class="view-header-left">
                        <h2 id="canvasViewTitle">Bookmark Canvas</h2>
                    </div>
                    <div class="view-header-right">
                        <button id="importCanvasBtn" class="view-action-btn">
                            <i class="fas fa-file-import"></i>
                            <span id="importCanvasText">ÂØºÂÖ•</span>
                        </button>
                        <button id="exportCanvasBtn" class="view-action-btn">
                            <i class="fas fa-file-export"></i>
                            <span id="exportCanvasText">ÂØºÂá∫</span>
                        </button>
                        <button id="clearTempNodesBtn" class="view-action-btn">
                            <i class="fas fa-trash-alt"></i>
                            <span id="clearTempNodesText">Ê∏ÖÁ©∫‰∏¥Êó∂ËäÇÁÇπ</span>
                        </button>
                    </div>
                </div>
                
                <!-- Canvas‰∏ªÂÆπÂô® -->
                <div class="canvas-main-container" style="--canvas-scale: 1; --canvas-pan-x: 0px; --canvas-pan-y: 0px;">
                    <!-- Ëá™ÂÆö‰πâÁ∫µÂêëÊªöÂä®Êù° -->
                    <div class="canvas-scrollbar vertical" id="canvasVerticalScrollbar">
                        <div class="scrollbar-controls">
                            <button class="scrollbar-btn scroll-hide" data-axis="vertical" data-action="toggle-hide" aria-label="ÈöêËóèÁ∫µÂêëÊªöÂä®Êù°">
                                <i class="fas fa-eye-slash"></i>
                            </button>
                            <button class="scrollbar-btn scroll-disable" data-axis="vertical" data-action="toggle-disable" aria-label="Á¶ÅÁî®Á∫µÂêëÊªöÂä®">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                        <div class="scrollbar-track">
                            <div class="scrollbar-thumb" data-axis="vertical"></div>
                        </div>
                    </div>
                    
                    <!-- Ëá™ÂÆö‰πâÊ®™ÂêëÊªöÂä®Êù° -->
                    <div class="canvas-scrollbar horizontal" id="canvasHorizontalScrollbar" style="display: flex; align-items: center; gap: 12px;">
                        <div class="scrollbar-controls">
                            <button class="scrollbar-btn scroll-hide" data-axis="horizontal" data-action="toggle-hide" aria-label="ÈöêËóèÊ®™ÂêëÊªöÂä®Êù°">
                                <i class="fas fa-eye-slash"></i>
                            </button>
                            <button class="scrollbar-btn scroll-disable" data-axis="horizontal" data-action="toggle-disable" aria-label="Á¶ÅÁî®Ê®™ÂêëÊªöÂä®">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                        <span class="scrollbar-hint" data-i18n-text="horizontalScrollHint" data-en="Shift + Wheel" data-zh="Shift + ÊªöËΩÆ">Shift + ÊªöËΩÆ</span>
                        <div class="scrollbar-track">
                            <div class="scrollbar-thumb" data-axis="horizontal"></div>
                        </div>
                    </div>
                    
                    <!-- CanvasÁîªÂ∏ÉÂ∑•‰ΩúÂå∫ -->
                    <div class="canvas-workspace" id="canvasWorkspace">
                        <!-- Áº©ÊîæÊéßÂà∂Âô®ÔºàÂõ∫ÂÆöÂú®ÁîªÂ∏ÉÂ∑¶‰∏äËßíÔºâ -->
                        <div class="canvas-zoom-indicator" id="canvasZoomIndicator" style="display: none;">
                            <div class="canvas-zoom-header">
                                <button class="canvas-fullscreen-btn" id="canvasFullscreenBtn" aria-label="ËøõÂÖ•ÂÖ®Â±è" aria-pressed="false">ÂÖ®Â±è</button>
                                <span class="canvas-zoom-label" id="canvasZoomLabel">Áº©Êîæ</span>
                                <span class="zoom-value" id="zoomValue">100%</span>
                            </div>
                            <div class="canvas-zoom-controls">
                                <button class="zoom-btn" id="zoomLocateBtn" title="ÂÆö‰ΩçÂà∞Ê∞∏‰πÖÊ†èÁõÆ"><span id="zoomLocateText">ÂÆö‰Ωç</span></button>
                                <button class="zoom-btn" id="zoomOutBtn" title="Áº©Â∞è (10%)">‚àí</button>
                                <button class="zoom-btn" id="zoomInBtn" title="ÊîæÂ§ß (10%)">+</button>
                            </div>
                            <div style="font-size: 10px; margin-top: 6px; color: #57606a; text-align: center;" id="canvasZoomHint">
                                <kbd style="font-size: 9px; padding: 2px 4px; background: #f6f8fa; border: 1px solid #d0d7de; border-radius: 3px;">Ctrl</kbd> + ÊªöËΩÆ | 
                                <kbd style="font-size: 9px; padding: 2px 4px; background: #f6f8fa; border: 1px solid #d0d7de; border-radius: 3px;">Á©∫Ê†º</kbd> ÊãñÂä®
                            </div>
                        </div>
                        
                        <!-- CanvasÂÜÖÂÆπÂÆπÂô®ÔºàÂ∫îÁî®Áº©ÊîæÂíåÂπ≥ÁßªÔºâ -->
                        <div class="canvas-content" id="canvasContent">
                            <!-- ‰∏¥Êó∂ËäÇÁÇπÂíåÊ∞∏‰πÖÊ†èÁõÆÈÉΩÂú®ËøôÈáå -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ê∞∏‰πÖÊ†èÁõÆ - Âú®canvas-contentÂÜÖÈÉ®ÈÄöËøáJSÊ∑ªÂä† -->
            <template id="permanentSectionTemplate">
                <div class="permanent-bookmark-section" id="permanentSection">
                    <div class="permanent-section-header" id="permanentSectionHeader">
                        <div class="permanent-section-title">
                            <h3 id="permanentSectionTitle">‰π¶Á≠æÊ†ë (Ê∞∏‰πÖÊ†èÁõÆ)</h3>
                            <div class="permanent-section-actions">
                                <button class="permanent-section-action-btn permanent-section-pin-btn pinned" id="permanentSectionPinBtn" title="ÁΩÆÈ°∂Ê†èÁõÆ">
                                    <i class="fas fa-thumbtack"></i>
                                </button>
                            </div>
                        </div>
                        <div class="permanent-section-tip-container" id="permanentSectionTipContainer">
                            <div class="permanent-section-tip-content">
                                <p class="permanent-section-tip" id="permanentSectionTip">ÊãñÂä®‰π¶Á≠æ/Êñá‰ª∂Â§πËá≥Á©∫ÁôΩÂ§ÑÔºåÂàõÂª∫‰π¶Á≠æÂûã‰∏¥Êó∂ËäÇÁÇπÔºõ‰∏¥Êó∂ËäÇÁÇπÁöÑ‰øÆÊîπ‰∏çËÆ°ÂÖ•Ê†∏ÂøÉÊï∞ÊçÆÔºåÂèØÁî®Êù•ÂØπÊØîÊü•Áúã/Êï¥ÁêÜÔºõÊ†èÁõÆÈó¥ÂèØ‰∫íÁõ∏ÊãñÂä®/Á≤òË¥¥</p>
                                <div class="permanent-section-tip-controls">
                                    <button class="permanent-section-tip-edit-btn" id="permanentSectionTipEditBtn" title="ÁºñËæëËØ¥Êòé">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="permanent-section-tip-close" id="permanentSectionTipClose" title="ÂÖ≥Èó≠ÊèêÁ§∫">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <textarea class="permanent-section-tip-editor" id="permanentSectionTipEditor" style="display: none;" placeholder=""></textarea>
                        </div>
                    </div>
                    <div class="permanent-section-body">
                        <div id="bookmarkTree" class="bookmark-tree">
                            <!-- Âä®ÊÄÅÂä†ËΩΩ‰π¶Á≠æÊ†ë -->
                        </div>
                    </div>
                </div>
            </template>
        </main>
    </div>

    <!-- Êí§ÈîÄË¶ÜÁõñÂ±Ç -->
    <div id="revertOverlay" class="revert-overlay" style="display: none;">
        <div class="revert-overlay-content">
            <div class="revert-spinner"></div>
            <div class="revert-text" id="revertOverlayText">Ê≠£Âú®Â§ÑÁêÜ‰∏≠...</div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÈÖçÁΩÆÂºπÁ™ó (‰π¶Á≠æÊ∑ªÂä†ËÆ∞ÂΩï) -->
    <div id="exportModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="exportModalTitle">ÂØºÂá∫‰π¶Á≠æËÆ∞ÂΩï</h3>
                <button class="modal-close" id="closeExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫ËåÉÂõ¥</h4>
                    <p id="exportScopeText" style="font-weight: 500; font-size: 15px;">ÂΩìÂâçËßÜÂõæ</p>
                </div>
                
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê®°Âºè</h4>
                    <div class="radio-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="radio-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="records" checked>
                            <span>‰ªÖÂØºÂá∫Ê∑ªÂä†ËÆ∞ÂΩï <small style="color: var(--text-tertiary);">(‰ªÖÁé∞ÊúâËÆ∞ÂΩï)</small></span>
                        </label>
                        <label class="radio-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="context">
                            <span>Áé∞ËÆ∞ÂΩïÂÖ≥ËÅîÂØºÂá∫ <small style="color: var(--text-tertiary);">(ÂåÖÂê´ÂêåÊñá‰ª∂Â§π‰∏ãÁöÑÂÖ∂‰ªñ‰π¶Á≠æ)</small></span>
                        </label>
                        <label class="radio-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="exportMode" value="collection">
                            <span>ÈõÜÂêàÂØºÂá∫Âà∞Êó•ÊúüÊñá‰ª∂Â§π <small style="color: var(--text-tertiary);">(ÊåâÊó•ÊúüÂΩíÊ°£Ôºå‰∏ç‰øùÁïôÂéüÁõÆÂΩïÂêç)</small></span>
                        </label>
                    </div>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê†ºÂºè</h4>
                    <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="html" checked>
                            <span>HTML (ÊµèËßàÂô®ÂèØÂØºÂÖ•)</span>
                        </label>
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="json">
                            <span>JSON</span>
                        </label>
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="exportFormat" value="copy">
                            <span>Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</span>
                        </label>
                    </div>
                </div>
                
                <div class="export-actions" style="text-align: right; border-top: 1px solid var(--border-color); padding-top: 20px;">
                    <button id="doExportBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-file-export"></i> ÂºÄÂßãÂØºÂá∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂØºÂá∫ÈÖçÁΩÆÂºπÁ™ó (ÁÇπÂáªËÆ∞ÂΩï) -->
    <div id="browsingExportModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="browsingExportModalTitle">ÂØºÂá∫ÁÇπÂáªËÆ∞ÂΩï</h3>
                <button class="modal-close" id="closeBrowsingExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫ËåÉÂõ¥</h4>
                    <p id="browsingExportScopeText" style="font-weight: 500; font-size: 15px;">ÂΩìÂâçËßÜÂõæ</p>
                </div>
                
                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê®°Âºè</h4>
                    <div class="radio-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="radio-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="browsingExportMode" value="records" checked>
                            <span>‰ªÖÂØºÂá∫ÁÇπÂáªËÆ∞ÂΩï <small style="color: var(--text-tertiary);">(‰ªÖÁé∞ÊúâËÆ∞ÂΩï)</small></span>
                        </label>
                        <label class="radio-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="radio" name="browsingExportMode" value="collection">
                            <span>ÈõÜÂêàÂØºÂá∫Âà∞Êó•ÊúüÊñá‰ª∂Â§π <small style="color: var(--text-tertiary);">(ÊåâÊó•ÊúüÂΩíÊ°£Ôºå‰∏ç‰øùÁïôÂéüÁõÆÂΩïÂêç)</small></span>
                        </label>
                    </div>
                </div>

                <div class="export-section" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 14px; color: var(--text-secondary);">ÂØºÂá∫Ê†ºÂºè</h4>
                    <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 8px;">
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="html" checked>
                            <span>HTML (ÊµèËßàÂô®ÂèØÂØºÂÖ•)</span>
                        </label>
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="json">
                            <span>JSON</span>
                        </label>
                        <label class="checkbox-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" name="browsingExportFormat" value="copy">
                            <span>Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø</span>
                        </label>
                    </div>
                </div>
                
                <div class="export-actions" style="text-align: right; border-top: 1px solid var(--border-color); padding-top: 20px;">
                    <button id="doBrowsingExportBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-file-export"></i> ÂºÄÂßãÂØºÂá∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ËØ¶ÊÉÖÂºπÁ™ó -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ÂèòÂåñËØ¶ÊÉÖ</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Âä®ÊÄÅÂä†ËΩΩËØ¶ÊÉÖÂÜÖÂÆπ -->
            </div>
        </div>
    </div>

    <!-- Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆÂºπÁ™ó -->
    <div id="refreshSettingsModal" class="modal content-center">
        <div class="modal-content refresh-settings-modal">
            <div class="modal-header compact">
                <h3 id="refreshSettingsTitle">Ëá™Âä®Âà∑Êñ∞ËÆæÁΩÆ</h3>
                <button class="modal-close" id="refreshSettingsClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="refresh-settings-section">
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshEveryNOpensEnabled" checked>
                        <span id="refreshEveryNOpensLabel">ÊØèÊâìÂºÄ</span>
                        <input type="number" id="refreshEveryNOpensValue" value="3" min="1" max="100" style="width: 50px; margin: 0 6px;">
                        <span id="refreshEveryNOpensUnit">Ê¨°Âà∑Êñ∞</span>
                    </label>
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshAfterHoursEnabled">
                        <span id="refreshAfterHoursLabel">Ë∑ù‰∏äÊ¨°Âà∑Êñ∞Ë∂ÖËøá</span>
                        <input type="number" id="refreshAfterHoursValue" value="1" min="1" max="24" style="width: 50px; margin: 0 6px;">
                        <span id="refreshAfterHoursUnit">Â∞èÊó∂</span>
                    </label>
                    <label class="refresh-setting-item">
                        <input type="checkbox" id="refreshAfterDaysEnabled">
                        <span id="refreshAfterDaysLabel">Ë∑ù‰∏äÊ¨°Âà∑Êñ∞Ë∂ÖËøá</span>
                        <input type="number" id="refreshAfterDaysValue" value="1" min="1" max="30" style="width: 50px; margin: 0 6px;">
                        <span id="refreshAfterDaysUnit">Â§©</span>
                    </label>
                </div>
                <div class="refresh-settings-status" id="refreshSettingsStatus" style="margin-top: 12px; padding: 8px 10px; background: var(--bg-tertiary); border-radius: 6px; font-size: 13px; color: var(--text-secondary);">
                    <!-- Âä®ÊÄÅÊòæÁ§∫Áä∂ÊÄÅ -->
                </div>
                <div class="refresh-settings-actions" style="margin-top: 12px; text-align: right;">
                    <button id="refreshSettingsSaveBtn" class="view-action-btn" style="display: inline-flex; width: auto;">
                        <i class="fas fa-check"></i> <span id="refreshSettingsSaveText">‰øùÂ≠ò</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†Âà∞ÂæÖÂ§ç‰π†ÂºπÁ™ó -->
    <div id="addToPostponedModal" class="modal content-center">
        <div class="modal-content add-postponed-modal">
            <div class="modal-header">
                <h3 id="addPostponedModalTitle">Ê∑ªÂä†Âà∞ÂæÖÂ§ç‰π†</h3>
                <button class="modal-close" id="addPostponedModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Ê∑ªÂä†ÊñπÂºèÈÄâÈ°πÂç° -->
                <div class="add-postponed-tabs">
                    <button class="add-postponed-tab active" data-tab="folder">
                        <i class="fas fa-folder"></i> <span id="addTabFolder">‰ªéÊñá‰ª∂Â§π</span>
                    </button>
                    <button class="add-postponed-tab" data-tab="search">
                        <i class="fas fa-search"></i> <span id="addTabSearch">ÊêúÁ¥¢‰π¶Á≠æ</span>
                    </button>
                    <button class="add-postponed-tab" data-tab="domain">
                        <i class="fas fa-globe"></i> <span id="addTabDomain">ÊåâÂüüÂêç</span>
                    </button>
                </div>

                <!-- ‰ªéÊñá‰ª∂Â§πÊ∑ªÂä†Èù¢Êùø -->
                <div class="add-postponed-panel active" data-panel="folder">
                    <div class="add-panel-row">
                        <label id="addFolderLabel">ÈÄâÊã©Êñá‰ª∂Â§πÔºö</label>
                        <button class="add-folder-select-btn" id="addFolderSelectBtn">
                            <i class="fas fa-folder"></i> <span id="addFolderSelectedName">ÁÇπÂáªÈÄâÊã©Êñá‰ª∂Â§π</span>
                        </button>
                    </div>
                    <div class="add-panel-row">
                        <label id="addCountLabel">ÊäΩÂèñÊï∞ÈáèÔºö</label>
                        <div class="add-count-wrapper">
                            <input type="number" id="addFolderCount" value="5" min="1" max="100" class="add-count-input">
                            <label class="add-checkbox-inline">
                                <input type="checkbox" id="addFolderSelectAll">
                                <span id="addSelectAllLabel">ÂÖ®ÈÉ®</span>
                            </label>
                        </div>
                    </div>
                    <div class="add-panel-row" id="addModeRow">
                        <label id="addModeLabel">ÊäΩÂèñÊñπÂºèÔºö</label>
                        <div class="add-mode-options">
                            <label class="add-mode-option">
                                <input type="radio" name="addFolderMode" value="random" checked> <span id="addModeRandom">ÈöèÊú∫</span>
                            </label>
                            <label class="add-mode-option">
                                <input type="radio" name="addFolderMode" value="sequential"> <span id="addModeSequential">È°∫Â∫è</span>
                            </label>
                        </div>
                    </div>
                    <div class="add-panel-row">
                        <label class="add-checkbox-label">
                            <input type="checkbox" id="addFolderIncludeSubfolders" checked>
                            <span id="addIncludeSubfolders">ÂåÖÂê´Â≠êÊñá‰ª∂Â§π</span>
                        </label>
                    </div>
                </div>

                <!-- ÊêúÁ¥¢‰π¶Á≠æÈù¢Êùø -->
                <div class="add-postponed-panel" data-panel="search">
                    <div class="add-search-container">
                        <input type="text" id="addSearchInput" class="add-search-input" placeholder="ÊêúÁ¥¢‰π¶Á≠æÊ†áÈ¢òÊàñURL...">
                        <i class="fas fa-search add-search-icon"></i>
                    </div>
                    <div class="add-results-list" id="addSearchResults">
                        <div class="add-results-empty" id="addSearchEmpty">ËæìÂÖ•ÂÖ≥ÈîÆËØçÊêúÁ¥¢‰π¶Á≠æ</div>
                    </div>
                    <div class="add-selected-count">
                        <span id="addSearchSelectedText">Â∑≤ÈÄâÊã©</span>: <span id="addSearchSelectedCount">0</span>
                    </div>
                </div>

                <!-- ÊåâÂüüÂêçÊ∑ªÂä†Èù¢Êùø -->
                <div class="add-postponed-panel" data-panel="domain">
                    <div class="add-search-container">
                        <input type="text" id="addDomainSearchInput" class="add-search-input" placeholder="ÊêúÁ¥¢ÂüüÂêç...">
                        <i class="fas fa-search add-search-icon"></i>
                    </div>
                    <div class="add-domain-list" id="addDomainList">
                        <div class="add-results-empty" id="addDomainLoading">Âä†ËΩΩÂüüÂêçÂàóË°®‰∏≠...</div>
                    </div>
                    <div class="add-selected-count">
                        <span id="addDomainSelectedText">Â∑≤ÈÄâÊã©</span>: <span id="addDomainSelectedCount">0</span> <span id="addDomainSelectedLabel">‰∏™ÂüüÂêç</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="addPostponedCancelBtn">ÂèñÊ∂à</button>
                <button class="modal-btn primary" id="addPostponedConfirmBtn">Ê∑ªÂä†</button>
            </div>
        </div>
    </div>

    <!-- Á®çÂêéÂ§ç‰π†ÂºπÁ™ó -->
    <div id="laterModal" class="modal content-center">
        <div class="modal-content later-modal">
            <button class="later-modal-close" id="laterModalClose">
                <i class="fas fa-times"></i>
            </button>
            <!-- PÂÄºÊé®ËçêÂå∫Âüü -->
            <div class="later-recommend" id="laterRecommendSection">
                <div class="later-recommend-label" id="laterRecommendLabel">Ê†πÊçÆÊµèËßà‰π†ÊÉØÊé®Ëçê</div>
                <button class="later-recommend-btn" id="laterRecommendBtn">
                    <i class="fas fa-magic"></i>
                    <span id="laterRecommendDays">3 Â§©Âêé</span>
                </button>
            </div>
            <div class="later-divider">
                <span id="laterOrText">ÊàñËá™ÂÆö‰πâ</span>
            </div>
            <div class="later-options">
                <button class="later-option" data-delay="3600000">
                    <i class="fas fa-clock"></i>
                    <span data-i18n="laterIn1Hour">1Â∞èÊó∂Âêé</span>
                </button>
                <button class="later-option" data-delay="86400000">
                    <i class="fas fa-sun"></i>
                    <span data-i18n="laterTomorrow">ÊòéÂ§©</span>
                </button>
                <button class="later-option" data-delay="259200000">
                    <i class="fas fa-calendar-day"></i>
                    <span data-i18n="laterIn3Days">3Â§©Âêé</span>
                </button>
                <button class="later-option" data-delay="604800000">
                    <i class="fas fa-calendar-week"></i>
                    <span data-i18n="laterIn1Week">1Âë®Âêé</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†ÂüüÂêçÂ±èËîΩÂºπÁ™ó -->
    <div id="addDomainModal" class="modal content-center">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header compact">
                <h3 id="addDomainModalTitle">Ê∑ªÂä†Â±èËîΩÂüüÂêç</h3>
                <button class="modal-close" id="addDomainModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="addDomainModalDesc" style="color: var(--text-secondary); margin-bottom: 12px;">ËæìÂÖ•Ë¶ÅÂ±èËîΩÁöÑÂüüÂêçÔºàÂ¶Ç example.comÔºâÔºö</p>
                <input type="text" id="addDomainInput" class="modal-input" placeholder="example.com" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary);">
                <div style="display: flex; gap: 10px; margin-top: 16px; justify-content: flex-end;">
                    <button id="addDomainCancelBtn" class="modal-btn" style="padding: 8px 16px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); cursor: pointer;">ÂèñÊ∂à</button>
                    <button id="addDomainConfirmBtn" class="modal-btn primary" style="padding: 8px 16px; border: none; border-radius: 6px; background: var(--accent-primary); color: white; cursor: pointer;">Ê∑ªÂä†</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄâÊã©Êñá‰ª∂Â§πÂ±èËîΩÂºπÁ™ó -->
    <div id="selectFolderModal" class="modal content-center">
        <div class="modal-content" style="max-width: 500px; max-height: 70vh;">
            <div class="modal-header compact">
                <h3 id="selectFolderModalTitle">ÈÄâÊã©Ë¶ÅÂ±èËîΩÁöÑÊñá‰ª∂Â§π</h3>
                <button class="modal-close" id="selectFolderModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 50vh; overflow-y: auto;">
                <div id="folderTreeContainer" class="folder-tree-container">
                    <!-- Êñá‰ª∂Â§πÊ†ëÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>
        </div>
    </div>
</body>
</html>
