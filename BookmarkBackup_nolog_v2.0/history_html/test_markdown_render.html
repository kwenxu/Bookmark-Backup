<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown渲染测试</title>
    <link rel="stylesheet" href="history.css">
    <script src="vendor/marked.min.js"></script>
    <script src="vendor/obsidian-markdown.js"></script>
    <style>
        body {
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        .test-input {
            background: #f6f8fa;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .test-output {
            background: white;
            padding: 10px;
            border: 1px solid #e1e4e8;
            border-radius: 4px;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Obsidian Markdown 渲染测试</h1>
        
        <div class="test-section">
            <div class="test-title">测试1: 基础Markdown + HTML标签</div>
            <div class="test-input" id="test1-input"></div>
            <div class="test-output md-canvas-text" id="test1-output"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试2: Callout</div>
            <div class="test-input" id="test2-input"></div>
            <div class="test-output md-canvas-text" id="test2-output"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试3: Wiki链接和高亮</div>
            <div class="test-input" id="test3-input"></div>
            <div class="test-output md-canvas-text" id="test3-output"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">测试4: 你的例子</div>
            <div class="test-input" id="test4-input"></div>
            <div class="test-output md-canvas-text" id="test4-output"></div>
        </div>
    </div>
    
    <script>
        // 测试用例
        const tests = [
            {
                id: 'test1',
                input: '**粗体** *斜体* <font color="#ffff00">黄色文字</font> <u>下划线</u>'
            },
            {
                id: 'test2',
                input: '> [!note] 这是一个笔记\n> 这是笔记的内容\n> 支持多行'
            },
            {
                id: 'test3',
                input: '[[Wiki链接]] 和 ==高亮文本== 以及 `代码`'
            },
            {
                id: 'test4',
                input: '「（书签型）临时栏目」下面会将到✅\n\n1、从「核心永久栏目（Locate）」里面拖拽出去形成（<font color="#ffff00">正在实现</font>）；（要形成标识）\n\n2、从导入其他html书签或者json书签，作为「临时栏目」；（右键吗？）（<font color="#00b0f0">还没有做</font>）\n\n<u>双击左键 直接生成一个 空白栏目</u>'
            }
        ];
        
        // 渲染测试
        tests.forEach(test => {
            const inputEl = document.getElementById(test.id + '-input');
            const outputEl = document.getElementById(test.id + '-output');
            
            inputEl.textContent = test.input;
            
            try {
                const html = marked.parse(test.input);
                outputEl.innerHTML = html;
                console.log(`${test.id} 渲染成功:`, html);
            } catch (e) {
                outputEl.textContent = '渲染失败: ' + e.message;
                console.error(`${test.id} 渲染失败:`, e);
            }
        });
    </script>
</body>
</html>
