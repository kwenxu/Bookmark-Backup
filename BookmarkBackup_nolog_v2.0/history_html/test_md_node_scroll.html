<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>空白栏目滚动测试</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #f0f2f5;
            --border-color: #e4e6eb;
            --border-hover: #ccd0d5;
            --text-tertiary: #8a8d91;
        }

        [data-theme="dark"] {
            --bg-primary: #18191a;
            --bg-secondary: #242526;
            --bg-tertiary: #3a3b3c;
            --border-color: #3a3b3c;
            --border-hover: #4e4f50;
            --text-tertiary: #8a8d91;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: #333;
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .test-section h2 {
            margin-top: 0;
        }

        .demo-box {
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            overflow: hidden;
            display: inline-block;
            margin-top: 10px;
        }

        /* ========== 空白栏目样式 ========== */
        .md-canvas-node {
            position: relative;
            box-sizing: border-box;
            background: #ffffff;
            border: 2px solid rgba(27, 31, 36, 0.35);
            border-radius: 8px;
            padding: 0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            width: 350px;
            height: 200px;
        }

        /* 滚动条样式 - 新增 */
        .md-canvas-text::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        .md-canvas-text::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 6px;
        }

        .md-canvas-text::-webkit-scrollbar-thumb {
            background: var(--border-hover);
            border-radius: 6px;
            border: 2px solid var(--bg-tertiary);
        }

        .md-canvas-text::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* 悬停时滚动条更明显 */
        .md-canvas-node:hover .md-canvas-text::-webkit-scrollbar-thumb {
            background: var(--border-color);
        }

        .md-canvas-text {
            width: 100%;
            flex: 1;
            overflow: auto;
            user-select: text;
            cursor: default;
            padding: 12px;
            box-sizing: border-box;
            font-size: 14px;
            line-height: 1.5;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            z-index: 9999;
        }

        [data-theme="dark"] body {
            background: #18191a;
            color: #e4e6eb;
        }

        [data-theme="dark"] .test-section {
            background: #242526;
        }

        [data-theme="dark"] .md-canvas-node {
            background: #1f242b;
            border-color: rgba(255, 255, 255, 0.4);
        }

        [data-theme="dark"] .md-canvas-text {
            color: #e4e6eb;
        }

        .info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 13px;
        }

        [data-theme="dark"] .info {
            background: #1a3a5f;
            border-left-color: #4d9eff;
            color: #93c5fd;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">切换主题</button>

    <div class="container">
        <h1>空白栏目（Markdown 卡片）滚动条测试</h1>

        <div class="test-section">
            <h2>测试 1：很长的文本内容（应该显示滚动条）</h2>
            <div class="info">
                ✓ 鼠标悬停在框上方，应该看到滚动条变深
                <br>
                ✓ 尝试拖动滚动条或者用鼠标滚轮滚动
            </div>
            <div class="demo-box">
                <div class="md-canvas-node">
                    <div class="md-canvas-text">
                        <h3>项目进度 ✅</h3>
                        <p>1、从「核心永久栏目（Locate）」里面拖拽出去形成（<font color="#ffff00">正在实现</font>）</p>
                        <p>2、从导入其他html书签或者json书签，作为「临时栏目」（<font color="#00b0f0">还没有做</font>）</p>
                        <p>3、<u>双击左键 直接生成一个 空白栏目</u></p>
                        <p style="margin-top: 20px;"><strong>快捷操作</strong></p>
                        <ul>
                            <li>双击空白处：创建空白栏目</li>
                            <li>Ctrl+Enter：保存编辑</li>
                            <li>Esc：取消编辑</li>
                            <li>鼠标悬停：显示工具栏</li>
                            <li>拖拽：移动栏目位置</li>
                            <li>角拉手：调整栏目大小</li>
                        </ul>
                        <p><strong>更多说明</strong></p>
                        <p>在书签画布中，空白栏目可以用来记录临时笔记、标记重要书签分组或创建视觉化的笔记区域。你可以使用 Obsidian 风格的 Markdown 语法来格式化内容，包括标题、列表、代码块等。</p>
                        <p>滚动条应该在内容超过容器高度时自动出现。当你鼠标悬停在栏目上时，滚动条会变得更加明显。在编辑模式下，滚动条也会始终保持可见。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>测试 2：对比 - 原生 textarea 滚动（参考）</h2>
            <div class="info">
                这是一个标准的 textarea，用于对比。这个应该能够正常滚动。
            </div>
            <textarea style="width: 350px; height: 200px; padding: 12px; border: 2px solid #ccc; border-radius: 8px; font-family: inherit; font-size: 14px; line-height: 1.5;">项目进度 ✅

1、从「核心永久栏目（Locate）」里面拖拽出去形成（正在实现）

2、从导入其他html书签或者json书签，作为「临时栏目」（还没有做）

3、双击左键 直接生成一个 空白栏目

快捷操作
- 双击空白处：创建空白栏目
- Ctrl+Enter：保存编辑
- Esc：取消编辑
- 鼠标悬停：显示工具栏
- 拖拽：移动栏目位置
- 角拉手：调整栏目大小

更多说明
在书签画布中，空白栏目可以用来记录临时笔记、标记重要书签分组或创建视觉化的笔记区域。你可以使用 Obsidian 风格的 Markdown 语法来格式化内容，包括标题、列表、代码块等。

滚动条应该在内容超过容器高度时自动出现。当你鼠标悬停在栏目上时，滚动条会变得更加明显。在编辑模式下，滚动条也会始终保持可见。</textarea>
        </div>

        <div class="test-section">
            <h2>调试信息</h2>
            <div id="debugInfo" style="background: #f0f0f0; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                <p>点击下面的按钮来检查元素...</p>
            </div>
            <button onclick="checkElement()" style="margin-top: 15px; padding: 8px 16px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer;">检查空白栏目元素</button>
        </div>
    </div>

    <script>
        function toggleTheme() {
            const theme = document.documentElement.getAttribute('data-theme');
            const newTheme = theme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // 恢复主题
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);

        function checkElement() {
            const mdNode = document.querySelector('.md-canvas-node');
            const mdText = document.querySelector('.md-canvas-text');
            
            if (!mdNode || !mdText) {
                document.getElementById('debugInfo').innerHTML = '❌ 找不到元素';
                return;
            }

            const nodeRect = mdNode.getBoundingClientRect();
            const textRect = mdText.getBoundingClientRect();
            
            const debugHtml = `
                <strong>元素尺寸信息：</strong><br>
                .md-canvas-node:<br>
                &nbsp;&nbsp;width: ${mdNode.offsetWidth}px<br>
                &nbsp;&nbsp;height: ${mdNode.offsetHeight}px<br>
                &nbsp;&nbsp;display: ${getComputedStyle(mdNode).display}<br>
                &nbsp;&nbsp;flex-direction: ${getComputedStyle(mdNode).flexDirection}<br>
                &nbsp;&nbsp;overflow: ${getComputedStyle(mdNode).overflow}<br>
                <br>
                .md-canvas-text:<br>
                &nbsp;&nbsp;width: ${mdText.offsetWidth}px<br>
                &nbsp;&nbsp;height: ${mdText.offsetHeight}px<br>
                &nbsp;&nbsp;display: ${getComputedStyle(mdText).display}<br>
                &nbsp;&nbsp;overflow: ${getComputedStyle(mdText).overflow}<br>
                &nbsp;&nbsp;flex: ${getComputedStyle(mdText).flex}<br>
                &nbsp;&nbsp;flex-grow: ${getComputedStyle(mdText).flexGrow}<br>
                &nbsp;&nbsp;flex-basis: ${getComputedStyle(mdText).flexBasis}<br>
                <br>
                <strong>内容溢出检查：</strong><br>
                &nbsp;&nbsp;scrollHeight: ${mdText.scrollHeight}px<br>
                &nbsp;&nbsp;clientHeight: ${mdText.clientHeight}px<br>
                &nbsp;&nbsp;有垂直滚动条: ${mdText.scrollHeight > mdText.clientHeight ? '✓ 是' : '✗ 否'}<br>
                &nbsp;&nbsp;scrollWidth: ${mdText.scrollWidth}px<br>
                &nbsp;&nbsp;clientWidth: ${mdText.clientWidth}px<br>
                &nbsp;&nbsp;有水平滚动条: ${mdText.scrollWidth > mdText.clientWidth ? '✓ 是' : '✗ 否'}<br>
                <br>
                <strong>计算样式：</strong><br>
                &nbsp;&nbsp;box-sizing: ${getComputedStyle(mdText).boxSizing}<br>
                &nbsp;&nbsp;padding: ${getComputedStyle(mdText).padding}<br>
                &nbsp;&nbsp;border: ${getComputedStyle(mdText).border}<br>
                &nbsp;&nbsp;pointer-events: ${getComputedStyle(mdText).pointerEvents}<br>
            `;
            document.getElementById('debugInfo').innerHTML = debugHtml;
        }

        // 页面加载时自动检查
        window.addEventListener('load', () => {
            setTimeout(checkElement, 100);
        });
    </script>
</body>
</html>
